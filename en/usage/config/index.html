
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://py-art.github.io/arfi-settings/en/usage/config/">
      
      
        <link rel="prev" href="../../about/debug_mode/">
      
      
        <link rel="next" href="../pyproject/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>Основные настройки - ArFiSettings</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="ArFiSettings" class="md-header__button md-logo" aria-label="ArFiSettings" data-md-component="logo">
      
  <img src="../../../assets/images/logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ArFiSettings
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Основные настройки
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../../usage/config/" hreflang="ru" class="md-select__link">
              Russian
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/py-art/arfi-settings" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../" class="md-tabs__link">
          
  
  ArFiSettings

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/custom_reader_and_handler/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog/" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="ArFiSettings" class="md-nav__button md-logo" aria-label="ArFiSettings" data-md-component="logo">
      
  <img src="../../../assets/images/logo-white.png" alt="logo">

    </a>
    ArFiSettings
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/py-art/arfi-settings" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ArFiSettings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            ArFiSettings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why and what's next
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/library_goals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Library Goals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/app_configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/reverse_inheritance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reverse inheritance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/debug_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug mode
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Основные настройки
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Основные настройки
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mode" class="md-nav__link">
    <span class="md-ellipsis">
      MODE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base_dir" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_DIR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config" class="md-nav__link">
    <span class="md-ellipsis">
      read_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config_force" class="md-nav__link">
    <span class="md-ellipsis">
      read_config_force
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_pyproject_toml" class="md-nav__link">
    <span class="md-ellipsis">
      read_pyproject_toml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_nested" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_nested
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config" class="md-nav__link">
    <span class="md-ellipsis">
      file_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="file_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conf_dir" class="md-nav__link">
    <span class="md-ellipsis">
      conf_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ext" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_custom_ext_handler" class="md-nav__link">
    <span class="md-ellipsis">
      conf_custom_ext_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      conf_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config" class="md-nav__link">
    <span class="md-ellipsis">
      env_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="env_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#env_file" class="md-nav__link">
    <span class="md-ellipsis">
      env_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_nested_delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      env_nested_delimiter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      env_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      env_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      env_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="model_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encoding" class="md-nav__link">
    <span class="md-ellipsis">
      encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli" class="md-nav__link">
    <span class="md-ellipsis">
      cli
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      file_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_class" class="md-nav__link">
    <span class="md-ellipsis">
      handler_class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler" class="md-nav__link">
    <span class="md-ellipsis">
      handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      handler_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#property" class="md-nav__link">
    <span class="md-ellipsis">
      Свойства (property)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Свойства (property)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#root_dir" class="md-nav__link">
    <span class="md-ellipsis">
      root_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      conf_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_path" class="md-nav__link">
    <span class="md-ellipsis">
      env_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode_dir_path" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computed_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      computed_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      parent_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyproject_toml_path" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject_toml_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inherited_params" class="md-nav__link">
    <span class="md-ellipsis">
      inherited_params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#settings_config" class="md-nav__link">
    <span class="md-ellipsis">
      settings_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pyproject/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Настройки pyproject.toml
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handlers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Обработчики
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../readers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Читатели
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Параметры командной строки
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../connectors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Коннекторы
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/custom_reader_and_handler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Собственные читатели и обработчики
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/new_file_extentions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Чтение файлов с расширением, которое отсутствует по умолчанию
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mode" class="md-nav__link">
    <span class="md-ellipsis">
      MODE
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#base_dir" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_DIR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config" class="md-nav__link">
    <span class="md-ellipsis">
      read_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config_force" class="md-nav__link">
    <span class="md-ellipsis">
      read_config_force
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_pyproject_toml" class="md-nav__link">
    <span class="md-ellipsis">
      read_pyproject_toml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_nested" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_nested
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config" class="md-nav__link">
    <span class="md-ellipsis">
      file_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="file_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conf_dir" class="md-nav__link">
    <span class="md-ellipsis">
      conf_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ext" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_custom_ext_handler" class="md-nav__link">
    <span class="md-ellipsis">
      conf_custom_ext_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      conf_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config" class="md-nav__link">
    <span class="md-ellipsis">
      env_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="env_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#env_file" class="md-nav__link">
    <span class="md-ellipsis">
      env_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_nested_delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      env_nested_delimiter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      env_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      env_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      env_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="model_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encoding" class="md-nav__link">
    <span class="md-ellipsis">
      encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli" class="md-nav__link">
    <span class="md-ellipsis">
      cli
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      file_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_class" class="md-nav__link">
    <span class="md-ellipsis">
      handler_class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler" class="md-nav__link">
    <span class="md-ellipsis">
      handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      handler_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#property" class="md-nav__link">
    <span class="md-ellipsis">
      Свойства (property)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Свойства (property)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#root_dir" class="md-nav__link">
    <span class="md-ellipsis">
      root_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      conf_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_path" class="md-nav__link">
    <span class="md-ellipsis">
      env_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode_dir_path" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computed_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      computed_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      parent_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyproject_toml_path" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject_toml_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inherited_params" class="md-nav__link">
    <span class="md-ellipsis">
      inherited_params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#settings_config" class="md-nav__link">
    <span class="md-ellipsis">
      settings_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/py-art/arfi-settings/blob/main/docs/ru/usage/config.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="_1">Основные настройки<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="mode">MODE<a class="headerlink" href="#mode" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Задаёт режим работы, например <code>debug</code>, <code>test</code>, <code>docker</code>, <code>prod</code> и так далее, для конкретного класса настроек или для всего приложения в целом.
Значение этой переменной не фиксированное и зависит только от вашего воображения!</p>
<p>Это одна из главных и <strong>КЛЮЧЕВЫХ</strong> особенностей библиотеки <code>arfi_settings</code>, которая ставит данную библиотеку на порядок выше всех остальных python-библиотек в направлении чтения и обработки настроек!</p>
<p>Основная цель библиотеки <code>arfi_settings</code> - это упростить жизнь разработчикам! Но остальные возможности библиотеки полностью закрывают потребности разработчиков настольных приложений.</p>
<p>Принцип работы этого параметра и лёг в основу создания текущей библиотеки.</p>
<p>Изначально предполагалось, что задание переменной окружения <code>MODE="prod"</code> должно автоматически переключать поведение всего приложения. Но по мере развития библиотеки оказалось, что можно задавать режимы работы не только для всего приложения в целом, но и отдельно для каждого класса настроек!</p>
<p>Например, в процессе разработки можно с лёгкостью переключаться между локальной базой данных, базой данных на тестовом стенде и реальной продуктовой базой данных, изменив всего один параметр <code>MODE</code> для настроек базы данных, при этом сохраняя все текущие локальные настройки, например для <code>Redis</code> или <code>token</code> телеграм-бота, в котором тестируется приложение.</p>
<p>То есть можно локально тестировать действующее приложение или часть приложения на реальных данных не выкатывая в прод, а просто изменив параметры подключения одной переменной. И это работает из коробки!</p>
<p>Параметр <code>MODE</code> - это обычное поле модели <code>pydantic.BaseModel</code>, тип <code>str</code>. По этому его можно задавать хоть в командной строке, хоть в секретной директории, хоть в переменных окружения, хоть в самих файлах конфигурации. Всё зависит от того, как именно вы настроите своё приложение, и какой механизм чтения настроек будет в нём прописан!</p>
<p>Если явно задать этот параметр в классе настроек, то он будет переопределён в соответствии с механизмом, заложенным в разделе <a href="../handlers/#обработчики-файлов-конфигурации">Обработчики файлов конфигурации</a>. По этому нет смысла явно задавать этот параметр в классе настроек!</p>
<p>Как показала практика, проще всего задавать режим для всего приложение в командной строке при запуске приложения или в секретной директории.
А вот в переменных окружения или в файлах конфигурации проще задавать режимы чтения для конкретных настроек при разработке, потому что в командной строке или в секретной директории нет привязки переменной к конкретному классу настроек.</p>
<p>Применение режима <code>MODE</code> распространяется только на чтение конфигурации приложения из файлов!!! Но никто не запрещает вам создавать эти файлы в секретной директории на сервере - просто можно добавить последним значением в списке <a href="#conf_dir">conf_dir</a> именно секретную директорию и все файлы, указанные в этой секретной директории, сохраняя ту же иерархию,что при чтении из обычной директорий, будут иметь приоритет над предыдущими, указанными в этой же переменной!</p>
<p><strong>Использование</strong>:</p>
<p>По умолчанию читается файл с именем <code>config</code> из всех директорий, заданных параметром <a href="#confdir">conf_dir</a> и с первым найденным расширением, указанным в <a href="#conf_ext">conf_ext</a>.</p>
<p>Пример:</p>
<p>Здесь мы говорим, что нужно читать файл из директории <a href="#conf_dir">conf_dir</a> с именем <code>production</code>, а расширения этого файла задаются параметром <a href="#conf_ext">conf_ext</a>.</p>
<div class="language-text highlight"><span class="filename">/var/run/secrets/MODE</span><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>production
</span></code></pre></div>
<p>Задаём секретный пароль:</p>
<div class="language-toml highlight"><span class="filename">/var/run/secrets/production.toml</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">my_secret_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;very_secret_password&quot;</span>
</span></code></pre></div>
<p>Задаём пароль по умолчанию, если не передан в секретной директории или в переменных окружения:</p>
<div class="language-toml highlight"><span class="filename">config/production.toml</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">my_secret_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;local_secret_password&quot;</span>
</span></code></pre></div>
<p>Задаём пароль, который будет иметь приоритет над паролем по умолчанию из файлов конфигурации, но не из файлов в секретной директории:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>MY_SECRET_PASSWORD=&quot;env_secret_password&quot;
</span></code></pre></div>
<p>Задаём наивысший приоритет секретной директории для чтения настроек:</p>
<blockquote>
<p><strong>Заметка</strong>: Здесь, в конкретном примере, значения, указанные в секретной директории главнее чем в файлах конфигураций и главнее чем переменные окружения, но параметры, переданные в командной строке, по прежнему имеют приоритет!</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="n">My_Secret_Password</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>    <span class="n">ordered_settings</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>        <span class="s2">&quot;cli&quot;</span><span class="p">,</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>        <span class="s2">&quot;secrets&quot;</span><span class="p">,</span>                      <span class="c1"># (1)!</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>        <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>        <span class="s2">&quot;env&quot;</span><span class="p">,</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>        <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>        <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="p">]</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>            <span class="s2">&quot;config&quot;</span><span class="p">,</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>            <span class="s2">&quot;/var/run/secrets&quot;</span><span class="p">,</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>        <span class="p">],</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>    <span class="p">)</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">My_Secret_Password</span><span class="p">)</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="c1">#&gt; very_secret_password</span>
</span></code></pre></div>
<ol>
<li>Подняли приоритет чтения настроек из секретной директории над всеми остальными, кроме <code>CLI</code></li>
</ol>
<p>Как задать режим чтения настроек глобально для всего проекта с помощью командной строки более подробно описано <a href="../cli/">здесь</a></p>
<h2 id="base_dir">BASE_DIR<a class="headerlink" href="#base_dir" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает на базовую директорию проекта. Автоматически определяется один раз для всего проекта. Не наследуется в концепции обратного наследования. Есть возможность указать вручную для конкретного класса.</p>
<p><strong>Принцип автоматического определения</strong>:</p>
<p>При первой инициализации любого подкласса <code>ArFiSettings</code> происходит поиск в текущей директории файл <code>__init__.py</code>. Если этот файл найден, то поднимаемся на директорию выше и снова ищем файл <code>__init__.py</code>. Если такого файла нет, то поиск останавливается. Последняя директория, в которой был найден файл <code>__init__.py</code> - это будет базовая директория проекта.</p>
<p><strong>Использование</strong>:</p>
<p>Структура проекта
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>~/my-awesome-project
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>├── src
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>│  └── my_awesome_project
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>│     ├── settings
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>│     │  ├── __init__.py
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>│     │  └── settings.py
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>│     ├── __init__.py
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>│     └── main.py
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>└── pyproject.toml
</span></code></pre></div></p>
<p>Автоматическое определение</p>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/settings/settings.py</span><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="k">pass</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span> <span class="nn">settings.settings</span> <span class="kn">import</span> <span class="n">config</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">BASE_DIR</span><span class="p">)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="c1">#&gt; /home/user/my-awesome-project/src/my_awesome_project</span>
</span></code></pre></div>
<p>Ручное указание</p>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/settings/settings.py</span><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">BASE_DIR</span> <span class="o">=</span> <span class="s2">&quot;~/my-awesome-project/src/my_awesome_project&quot;</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span> <span class="nn">settings.settings</span> <span class="kn">import</span> <span class="n">config</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">BASE_DIR</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="c1">#&gt; /home/user/my-awesome-project/src/my_awesome_project</span>
</span></code></pre></div>
<h2 id="read_config">read_config<a class="headerlink" href="#read_config" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает чтение конфигурации из всех источников, кроме <code>init_kwargs</code></p>
<blockquote>
<p>При обратном наследовании этот параметр автоматически устанавливается в <code>True</code>. Для полного отключения чтения настроек используйте <code>read_config_forc=Falsee</code> в классе или в истансе класса.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<p><div class="language-py highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="n">read_config</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>
или
<div class="language-py highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="k">pass</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">_read_config</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="read_config_force">read_config_force<a class="headerlink" href="#read_config_force" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Принудительно включает или отключает чтение конфигурации из всех источников, кроме <code>init_kwargs</code>. Имеет приоритет над <a href="#read_config">read_config</a>.</p>
<p><strong>Использование</strong>:</p>
<p><div class="language-py highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="n">read_config_force</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>
или
<div class="language-py highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="k">pass</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">_read_config_force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="read_pyproject_toml">read_pyproject_toml<a class="headerlink" href="#read_pyproject_toml" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает чтение собственных настроек <code>arfi-settings</code> по умолчанию из файла <code>pyproject.toml</code>.</p>
<p><strong>Использование</strong>:</p>
<p><div class="language-py highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="n">read_pyproject_toml</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>
или
<div class="language-py highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    <span class="k">pass</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">_read_pyproject_toml</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="mode_dir">mode_dir<a class="headerlink" href="#mode_dir" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>При чтении из файлов указывает из какой поддиректории читать настройки, а точнее участвует в создании пути до этой поддиректории.</li>
<li>При чтении переменных окружения может использоваться как префикс.</li>
</ol>
<p>Если не задано в явном виде, то определяется автоматически по имени атрибута в классе-родителе в концепции обратного наследования.</p>
<blockquote>
<p><strong>Заметка</strong>: Не наследуется классическим способом, потому что участвует в обратном наследовании.</p>
</blockquote>
<p>Для более глубокого понимания назначения можно почитать описание параметров <a href="#conf_path">conf_path</a> и <a href="#env_prefix_as_source_mode_dir">env_prefix_as_source_mode_dir</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    <span class="k">pass</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="c1">#&gt; app</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="c1">#&gt; [PosixPath(&#39;config/app/config&#39;)]</span>
</span></code></pre></div>
<p>Если указать явно:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s1">&#39;my_app&#39;</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="c1">#&gt; my_app</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="c1">#&gt; [PosixPath(&#39;config/my_app/config&#39;)]</span>
</span></code></pre></div>
<p>Отключение:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>    <span class="c1"># or</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>    <span class="c1"># mode_dir = None</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="c1">#&gt; &quot;&quot; or None</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="c1">#&gt; [PosixPath(&#39;config/config&#39;)]</span>
</span></code></pre></div>
<h2 id="mode_dir_inherit_nested">mode_dir_inherit_nested<a class="headerlink" href="#mode_dir_inherit_nested" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает наследование атрибута <code>mode_dir</code> у подклассов. Настраивается именно в подклассах.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;db&quot;</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="k">class</span> <span class="nc">Postgres</span><span class="p">(</span><span class="n">Database</span><span class="p">):</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;postgres&quot;</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>    <span class="n">database</span><span class="p">:</span> <span class="n">Postgres</span> <span class="o">=</span> <span class="n">Postgres</span><span class="p">()</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-19-14"><a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="c1">#&gt; db/postgres</span>
</span><span id="__span-19-15"><a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-19-16"><a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="c1">#&gt; [PosixPath(&#39;config/db/postgres/config&#39;)]</span>
</span></code></pre></div>
<p>Отключаем наследование:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;db&quot;</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="k">class</span> <span class="nc">Postgres</span><span class="p">(</span><span class="n">Database</span><span class="p">):</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;postgres&quot;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>    <span class="n">mode_dir_inherit_nested</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>    <span class="n">database</span><span class="p">:</span> <span class="n">Postgres</span> <span class="o">=</span> <span class="n">Postgres</span><span class="p">()</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="c1">#&gt; postgres</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="c1">#&gt; [PosixPath(&#39;config/postgres/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">mode_dir_inherit_nested</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="mode_dir_inherit_parent">mode_dir_inherit_parent<a class="headerlink" href="#mode_dir_inherit_parent" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает наследование атрибута <code>mode_dir</code> от класса-родителя в концепции обратного наследования.
Настраивается в классах-детях.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>    <span class="k">pass</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="c1">#&gt; child</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="c1">#&gt; [PosixPath(&#39;config/parent/child/config&#39;)]</span>
</span></code></pre></div>
<p>Отключаем наследование:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>    <span class="n">mode_dir_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="c1">#&gt; child</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">mode_dir_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="file_config">file_config<a class="headerlink" href="#file_config" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">FileConfigDict</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">FileConfigSchema</span><span class="p">()</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">()</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Настройки, которые описывают правила чтения из файлов конфигурации.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="s2">&quot;settings/config&quot;</span><span class="p">,</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<h3 id="conf_dir">conf_dir<a class="headerlink" href="#conf_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;config&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает из какой директории или директорий читать файлы с настройками.
Если указан список директорий, то настройки, расположенные в последней директории, будут переопределять все настройки из предыдущих.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;/opt/my_app/config&quot;</span><span class="p">],</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>    <span class="p">)</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="c1">#&gt; [PosixPath(&#39;config/config&#39;), PosixPath(&#39;/opt/my_app/config/config&#39;)]</span>
</span></code></pre></div>
<p>Или</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="s2">&quot;/var/run/secrets/config&quot;</span><span class="p">,</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>    <span class="p">)</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a><span class="c1">#&gt; [PosixPath(&#39;/var/run/secrets/config/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="n">conf_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;settings/config&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Здесь устанавливается по умолчанию для всех классов, если это не переопределено в самом классе.</li>
</ol>
<h3 id="conf_file">conf_file<a class="headerlink" href="#conf_file" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;config&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Определяет название файла из которого будут читаться настройки по умолчанию в заданных директориях <code>conf_dir</code>.
При чтении настроек к этому имени файла добавляется расширение из <code>arfi_settingd.constants.CONFIG_EXT_DEFAULT</code>.
То есть, если параметр <code>conf_file</code> не имеет расширения, то происходит поиск до первого найденного файла по порядку с раширением из <code>CONFIG_EXT_DEFAULT</code> или из переданного параметра <a href="#confext">conf_ext</a> - <code>config.toml</code>, потом <code>config.yaml</code>, и т.д.
Если передано конкретное расширение, например, <code>conf_file="config.ini"</code>, то происходит поиск только по этому расширению и остальные расширения игнорируются.</p>
<blockquote>
<p><strong>Заметка</strong>: Полный путь до файла конфигурации строится следующим образом:
<a href="#BASE_DIR">BASE_DIR</a> / <a href="#conf_dir">conf_dir</a> / <a href="#mode_dir_path">mode_dir_path</a> / <a href="#conf_file">conf_file</a>[.<a href="#conf_ext">conf_ext</a>], где <code>BASE_DIR /</code> добавляется в начало пути только если <code>conf_dir</code> не является абсолютным путём.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FFileConfigDictileConfigDict</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="s2">&quot;appconfig&quot;</span><span class="p">,</span>   <span class="c1"># (1)!</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>    <span class="p">)</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="c1">#&gt; [PosixPath(&#39;config/appconfig&#39;)]</span>
</span></code></pre></div>
<ol>
<li>Будет произведён поиск по порядку до первого найденного из <code>config.toml</code>, <code>config.yaml</code>, и т.д.</li>
</ol>
<p>Указание файла с конкретным расширением:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="s2">&quot;appconfig.json&quot;</span><span class="p">,</span>   <span class="c1"># (1)!</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>    <span class="p">)</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="c1">#&gt; [PosixPath(&#39;config/appconfig.json&#39;)]</span>
</span></code></pre></div>
<ol>
<li>Поиск файла только с конкретным расширением <code>config.json</code>. Остальные файлы с именем <code>confit.toml</code>, <code>config.yaml</code> и т.д. игнорируются.</li>
</ol>
<p>Отменить чтение из файлов:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>        <span class="c1"># or</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>        <span class="c1"># conf_file = &quot;&quot;</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>    <span class="p">)</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a><span class="c1">#&gt; []</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="n">conf_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;appconfig&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Здесь устанавливается имя файла по умолчанию для всех классов из которого будут читаться настройки по умолчанию, если это не переопределено в самом классе.</li>
</ol>
<p>Отменить полностью чтение из файлов:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="n">conf_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Отменяет чтение из файлов для всех классов, но Значение, заданное в классе отменяет значение по умолчанию, заданное здесь, в <code>pyproject.toml</code></li>
</ol>
<h3 id="conf_ext">conf_ext<a class="headerlink" href="#conf_ext" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[</span><span class="s2">&quot;toml&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span> <span class="s2">&quot;json&quot;</span><span class="p">]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Добавляет указанные расширения к названию файла <a href="#conffile">conf_file</a> при поиске файла с настройками.
Можно указывать как список с расширениями, так и строку вида <code>"ini, toml, cfg"</code>
Можно указать пустую строку <code>conf_ext=""</code> или добавить в список пустую строку, например <code>["json", ""]</code>, для чтения файлов без расширения.
При добавлении чтения файлов без расширения, в обязательном порядке, должен быть указан обработчик файлов без расширения в параметре <a href="#conf_custom_ext_handler">conf_custom_ext_handler</a> !!!</p>
<p>Порядок расширения из списка от первого к последнему определяет поиск файлов конфигурации - файл <code>conf_file</code>.<code>conf_ext</code> с первым найденным расширение из списка будет прочитан, а остальные проигнорированы.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>        <span class="n">conf_ext</span> <span class="o">=</span> <span class="s2">&quot;cfg, ini&quot;</span><span class="p">,</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="n">conf_ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">]</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Будут читаться файлы только с расширением <code>*.json</code>, остальные будут проигнорированы.
Значения заданные в классе - переопределяют значения по умолчания из файла <code>pyproject.toml</code></li>
</ol>
<h3 id="conf_custom_ext_handler">conf_custom_ext_handler<a class="headerlink" href="#conf_custom_ext_handler" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Переопределяет обработчик для расширения или задаёт определённый обработчик для файлов без расширения.
Имя обработчика должно заканчиваться на <code>_ext_handler</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiHandler</span><span class="p">,</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="kn">from</span> <span class="nn">arfi_settings.types</span> <span class="kn">import</span> <span class="n">PathType</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>    <span class="k">def</span> <span class="nf">cfg_ext_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">PathType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;__case_sensitive&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">conf_case_sensitive</span>
</span><span id="__span-36-12"><a id="__codelineno-36-12" name="__codelineno-36-12" href="#__codelineno-36-12"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-36-13"><a id="__codelineno-36-13" name="__codelineno-36-13" href="#__codelineno-36-13"></a>
</span><span id="__span-36-14"><a id="__codelineno-36-14" name="__codelineno-36-14" href="#__codelineno-36-14"></a>    <span class="k">def</span> <span class="nf">my_empty_ext_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">PathType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-36-15"><a id="__codelineno-36-15" name="__codelineno-36-15" href="#__codelineno-36-15"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toml_ext_handler</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="__span-36-16"><a id="__codelineno-36-16" name="__codelineno-36-16" href="#__codelineno-36-16"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-36-17"><a id="__codelineno-36-17" name="__codelineno-36-17" href="#__codelineno-36-17"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-36-18"><a id="__codelineno-36-18" name="__codelineno-36-18" href="#__codelineno-36-18"></a>
</span><span id="__span-36-19"><a id="__codelineno-36-19" name="__codelineno-36-19" href="#__codelineno-36-19"></a>
</span><span id="__span-36-20"><a id="__codelineno-36-20" name="__codelineno-36-20" href="#__codelineno-36-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-36-21"><a id="__codelineno-36-21" name="__codelineno-36-21" href="#__codelineno-36-21"></a>    <span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span><span id="__span-36-22"><a id="__codelineno-36-22" name="__codelineno-36-22" href="#__codelineno-36-22"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-36-23"><a id="__codelineno-36-23" name="__codelineno-36-23" href="#__codelineno-36-23"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;asd&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;cfg&quot;</span><span class="p">],</span>      <span class="c1"># (1)!</span>
</span><span id="__span-36-24"><a id="__codelineno-36-24" name="__codelineno-36-24" href="#__codelineno-36-24"></a>        <span class="n">conf_custom_ext_handler</span><span class="o">=</span><span class="p">{</span>         <span class="c1"># (2)!</span>
</span><span id="__span-36-25"><a id="__codelineno-36-25" name="__codelineno-36-25" href="#__codelineno-36-25"></a>            <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="s2">&quot;my_empty_ext_handler&quot;</span><span class="p">,</span>   <span class="c1"># (3)!</span>
</span><span id="__span-36-26"><a id="__codelineno-36-26" name="__codelineno-36-26" href="#__codelineno-36-26"></a>            <span class="s2">&quot;asd&quot;</span><span class="p">:</span> <span class="s2">&quot;toml&quot;</span><span class="p">,</span>                <span class="c1"># (4)!</span>
</span><span id="__span-36-27"><a id="__codelineno-36-27" name="__codelineno-36-27" href="#__codelineno-36-27"></a>        <span class="p">},</span>
</span><span id="__span-36-28"><a id="__codelineno-36-28" name="__codelineno-36-28" href="#__codelineno-36-28"></a>    <span class="p">)</span>
</span><span id="__span-36-29"><a id="__codelineno-36-29" name="__codelineno-36-29" href="#__codelineno-36-29"></a>
</span><span id="__span-36-30"><a id="__codelineno-36-30" name="__codelineno-36-30" href="#__codelineno-36-30"></a>
</span><span id="__span-36-31"><a id="__codelineno-36-31" name="__codelineno-36-31" href="#__codelineno-36-31"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-36-32"><a id="__codelineno-36-32" name="__codelineno-36-32" href="#__codelineno-36-32"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">file_config</span><span class="p">)</span>
</span><span id="__span-36-33"><a id="__codelineno-36-33" name="__codelineno-36-33" href="#__codelineno-36-33"></a><span class="c1">#&gt; {&#39;conf_ext&#39;: [&#39;asd&#39;, &#39;&#39;, &#39;cfg&#39;], &#39;conf_custom_ext_handler&#39;: {&#39;&#39;: &#39;my_empty_ext_handler&#39;, &#39;asd&#39;: &#39;toml&#39;}}</span>
</span></code></pre></div>
<ol>
<li>Задаём порядок поиска файлов с расширениями. Если существуют все 3 файла <code>config.asd</code>, <code>config</code> и <code>config.cfg</code>, то <code>config.asd</code> будет прочитан, а остальные проигнорированы.</li>
<li>Для расширения <code>cfg</code> обработчик явно можно не указывать, так как имя обработчика заканчивается на <code>_ext_handler</code>. Но можно и явно указать, например <code>{"cfg": "cfg_ext_handler"}</code> или <code>{"cfg": "cfg"}</code></li>
<li>Здесь указываем обработчик для файлов без расширения. Вместо длинного названия <code>my_empty_ext_handler</code> можно написать коротко - <code>my_empty</code>.</li>
<li>Здесь указываем, что все файлы с расширением <code>*.asd</code> должны быть обработаны как <code>toml</code>.</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="n">conf_custom_ext_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;yaml&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Здесь говорим, что все файлы без расширения читать как <code>yaml</code>-файлы.</li>
</ol>
<h3 id="conf_file_encoding">conf_file_encoding<a class="headerlink" href="#conf_file_encoding" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span>  <span class="c1"># utf-8</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Задаёт кодировку при чтении файлов конфигурации. Применяется сразу ко всем файлам, указанным в <a href="#conf_file">conf_file</a></p>
<p><strong>Использование</strong>:
<div class="language-py highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>    <span class="p">)</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="n">conf_file_encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cp1251&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Задаём кодировку <code>cp1251</code> для всех файлов конфигурации</li>
</ol>
<h3 id="conf_case_sensitive">conf_case_sensitive<a class="headerlink" href="#conf_case_sensitive" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>По умолчанию при чтении из файлов конфигурации параметры читаются как регистронезависимые. Но сначала ищется точное совпадение. Если точное совпадение не найдено, то возвращается найденное значение в нижнем регистре, если и оно не найдено, то возвращается первое найденное значение, приведённое к нижнему регистру.</p>
<p><strong>Использование</strong>:</p>
<ul>
<li>Поведение по умолчанию</li>
</ul>
<div class="language-toml highlight"><span class="filename">config/config.toml</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="n">MY_PARAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MY_PARAM_UPPER&quot;</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="n">My_Param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;My_Param_exactly_match&quot;</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="n">my_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_param_lower&quot;</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a>    <span class="n">My_Param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>        <span class="n">conf_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a>    <span class="p">)</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">My_Param</span><span class="p">)</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="c1">#&gt; My_Param_exactly_match</span>
</span></code></pre></div>
<ol>
<li>
<p>Значение по умолчанию</p>
</li>
<li>
<p>Если отсутствует точное совпадение</p>
</li>
</ol>
<div class="language-toml highlight"><span class="filename">config/config.toml</span><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="n">MY_PARAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MY_PARAM_UPPER&quot;</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="n">my_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_param_lower&quot;</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a>    <span class="n">My_Param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>        <span class="n">conf_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>    <span class="p">)</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">My_Param</span><span class="p">)</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="c1">#&gt; my_param_lower</span>
</span></code></pre></div>
<ol>
<li>
<p>Значение по умолчанию</p>
</li>
<li>
<p>Если отсутствует точное совпадение, но поиск чувствительный к регистру</p>
</li>
</ol>
<div class="language-toml highlight"><span class="filename">config/config.toml</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="n">MY_PARAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MY_PARAM_UPPER&quot;</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="n">my_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_param_lower&quot;</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>    <span class="n">My_Param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>        <span class="n">conf_case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>    <span class="p">)</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">My_Param</span><span class="p">)</span>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="sd">  ...</span>
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a><span class="sd">pydantic_core._pydantic_core.ValidationError: 1 validation error for AppConfig</span>
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a><span class="sd">My_Param</span>
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a><span class="sd">  Field required [type=missing, input_value={}, input_type=dict]</span>
</span><span id="__span-45-17"><a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div>
<ol>
<li>Чувствительный к регистру поиск. Требуется точное совпадение</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="n">conf_case_sensitive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Читать только точное совпадение имён (чувствительное к регистру) во всех файлах конфигурации</li>
</ol>
<h3 id="conf_ignore_missing">conf_ignore_missing<a class="headerlink" href="#conf_ignore_missing" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>По умолчанию, если файлы, заданные в <a href="#conf_file">conf_file</a> не существуют, то их чтение игнорируется.  Но если требуется, чтоб файл или файлы обязательно присутствовали, то необходимо параметр <code>conf_ignore_missing</code> установить в значение <code>False</code>.
Так же можно использовать в качестве своеобразного отладчика - в сообщении об ошибке будет указано какой именно файл и по какому пути отсутствует.</p>
<p><strong>Использование</strong>:</p>
<p>Поведение по умолчанию. Отсутствие файла <code>config/appconfig.yml</code> не приводит к ошибке
<div class="language-py highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>        <span class="n">conf_ignore_missing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>    <span class="p">)</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="c1">#&gt; default_param</span>
</span></code></pre></div></p>
<ol>
<li>Значение по умолчанию. Отсутствие файлов игнорируется.</li>
</ol>
<p>При отсутствии файла <code>config/appconfig.yml</code> возбуждается ошибка
<div class="language-py highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a>        <span class="n">conf_ignore_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>    <span class="p">)</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a><span class="sd">    ...</span>
</span><span id="__span-48-17"><a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a><span class="sd">arfi_settings.errors.ArFiSettingsError: File not found: `/home/user/my_awesome_project/config/appconfig.yml`</span>
</span><span id="__span-48-18"><a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div></p>
<ol>
<li>Требуется обязательное наличие всех файлов, указанных в <code>conf_file</code>!</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="n">conf_ignore_missing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Все файлы конфигурации должны существовать</li>
</ol>
<h3 id="conf_exclude_inherit_parent">conf_exclude_inherit_parent<a class="headerlink" href="#conf_exclude_inherit_parent" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование определённых собственных настроек от класса-родителя
Применяется только при чтении файлов конфигурации.</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя все настройки, кроме <code>conf_dir</code> и <code>conf_file</code>
<div class="language-py highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>            <span class="s2">&quot;conf_dir&quot;</span><span class="p">,</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a>        <span class="p">],</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a>    <span class="p">)</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-50-17"><a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-50-18"><a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-50-19"><a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a>    <span class="p">)</span>
</span><span id="__span-50-20"><a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a>
</span><span id="__span-50-21"><a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a>
</span><span id="__span-50-22"><a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-50-23"><a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-50-24"><a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a><span class="c1">#&gt; None</span>
</span><span id="__span-50-25"><a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-50-26"><a id="__codelineno-50-26" name="__codelineno-50-26" href="#__codelineno-50-26"></a><span class="c1">#&gt; appconfig.yml</span>
</span><span id="__span-50-27"><a id="__codelineno-50-27" name="__codelineno-50-27" href="#__codelineno-50-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-50-28"><a id="__codelineno-50-28" name="__codelineno-50-28" href="#__codelineno-50-28"></a><span class="c1">#&gt; [PosixPath(&#39;appconfig.yml&#39;)]</span>
</span><span id="__span-50-29"><a id="__codelineno-50-29" name="__codelineno-50-29" href="#__codelineno-50-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-50-30"><a id="__codelineno-50-30" name="__codelineno-50-30" href="#__codelineno-50-30"></a><span class="c1">#&gt; config</span>
</span><span id="__span-50-31"><a id="__codelineno-50-31" name="__codelineno-50-31" href="#__codelineno-50-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-50-32"><a id="__codelineno-50-32" name="__codelineno-50-32" href="#__codelineno-50-32"></a><span class="c1">#&gt; config</span>
</span><span id="__span-50-33"><a id="__codelineno-50-33" name="__codelineno-50-33" href="#__codelineno-50-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-50-34"><a id="__codelineno-50-34" name="__codelineno-50-34" href="#__codelineno-50-34"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div></p>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>conf_exclude_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>conf_exclude_inherit_parent</code>!!! Для этого его тоже нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>            <span class="s2">&quot;conf_dir&quot;</span><span class="p">,</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>        <span class="p">],</span>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a>    <span class="p">)</span>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12" href="#__codelineno-51-12"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13" href="#__codelineno-51-13"></a>
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14" href="#__codelineno-51-14"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15" href="#__codelineno-51-15"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-51-16"><a id="__codelineno-51-16" name="__codelineno-51-16" href="#__codelineno-51-16"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-51-17"><a id="__codelineno-51-17" name="__codelineno-51-17" href="#__codelineno-51-17"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-51-18"><a id="__codelineno-51-18" name="__codelineno-51-18" href="#__codelineno-51-18"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-51-19"><a id="__codelineno-51-19" name="__codelineno-51-19" href="#__codelineno-51-19"></a>        <span class="p">],</span>
</span><span id="__span-51-20"><a id="__codelineno-51-20" name="__codelineno-51-20" href="#__codelineno-51-20"></a>    <span class="p">)</span>
</span><span id="__span-51-21"><a id="__codelineno-51-21" name="__codelineno-51-21" href="#__codelineno-51-21"></a>
</span><span id="__span-51-22"><a id="__codelineno-51-22" name="__codelineno-51-22" href="#__codelineno-51-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w">    </span><span class="s2">&quot;conf_file&quot;</span><span class="p">,</span><span class="w">                    </span><span class="c1"># (1)!</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="w">    </span><span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># (2)!</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="p">]</span>
</span></code></pre></div>
<ol>
<li>Не наследовать название файла, из которого происходит чтение настроек по умолчанию</li>
<li>Не наследовать исключённые параметры</li>
</ol>
<h3 id="conf_include_inherit_parent">conf_include_inherit_parent<a class="headerlink" href="#conf_include_inherit_parent" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование от класса-родителя всех собственных настроек, кроме указанных.
Применяется только при чтении файлов конфигураций.</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя только расширения при чтении файлов:
<div class="language-py highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a>        <span class="p">],</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>    <span class="p">)</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig&quot;</span><span class="p">,</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19" href="#__codelineno-53-19"></a>    <span class="p">)</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20" href="#__codelineno-53-20"></a>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21" href="#__codelineno-53-21"></a>
</span><span id="__span-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22" href="#__codelineno-53-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23" href="#__codelineno-53-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24" href="#__codelineno-53-24"></a><span class="c1">#&gt; None</span>
</span><span id="__span-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25" href="#__codelineno-53-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26" href="#__codelineno-53-26"></a><span class="c1">#&gt; appconfig</span>
</span><span id="__span-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27" href="#__codelineno-53-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28" href="#__codelineno-53-28"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29" href="#__codelineno-53-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30" href="#__codelineno-53-30"></a><span class="c1">#&gt; [PosixPath(&#39;appconfig&#39;)]</span>
</span><span id="__span-53-31"><a id="__codelineno-53-31" name="__codelineno-53-31" href="#__codelineno-53-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-53-32"><a id="__codelineno-53-32" name="__codelineno-53-32" href="#__codelineno-53-32"></a><span class="c1">#&gt; config</span>
</span><span id="__span-53-33"><a id="__codelineno-53-33" name="__codelineno-53-33" href="#__codelineno-53-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-53-34"><a id="__codelineno-53-34" name="__codelineno-53-34" href="#__codelineno-53-34"></a><span class="c1">#&gt; config</span>
</span><span id="__span-53-35"><a id="__codelineno-53-35" name="__codelineno-53-35" href="#__codelineno-53-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-53-36"><a id="__codelineno-53-36" name="__codelineno-53-36" href="#__codelineno-53-36"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-53-37"><a id="__codelineno-53-37" name="__codelineno-53-37" href="#__codelineno-53-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-53-38"><a id="__codelineno-53-38" name="__codelineno-53-38" href="#__codelineno-53-38"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div></p>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>conf_include_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>conf_include_inherit_parent</code>!!! Для этого его нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>        <span class="p">],</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-54-8"><a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a>        <span class="p">],</span>
</span><span id="__span-54-9"><a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a>    <span class="p">)</span>
</span><span id="__span-54-10"><a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a>
</span><span id="__span-54-11"><a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a>
</span><span id="__span-54-12"><a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-54-13"><a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-54-14"><a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a>
</span><span id="__span-54-15"><a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-54-16"><a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-54-17"><a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-54-18"><a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-54-19"><a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a>            <span class="s2">&quot;conf_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-54-20"><a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a>        <span class="p">],</span>
</span><span id="__span-54-21"><a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a>    <span class="p">)</span>
</span><span id="__span-54-22"><a id="__codelineno-54-22" name="__codelineno-54-22" href="#__codelineno-54-22"></a>
</span><span id="__span-54-23"><a id="__codelineno-54-23" name="__codelineno-54-23" href="#__codelineno-54-23"></a>
</span><span id="__span-54-24"><a id="__codelineno-54-24" name="__codelineno-54-24" href="#__codelineno-54-24"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-54-25"><a id="__codelineno-54-25" name="__codelineno-54-25" href="#__codelineno-54-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-54-26"><a id="__codelineno-54-26" name="__codelineno-54-26" href="#__codelineno-54-26"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-54-27"><a id="__codelineno-54-27" name="__codelineno-54-27" href="#__codelineno-54-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-54-28"><a id="__codelineno-54-28" name="__codelineno-54-28" href="#__codelineno-54-28"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-54-29"><a id="__codelineno-54-29" name="__codelineno-54-29" href="#__codelineno-54-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-54-30"><a id="__codelineno-54-30" name="__codelineno-54-30" href="#__codelineno-54-30"></a><span class="c1">#&gt; None</span>
</span><span id="__span-54-31"><a id="__codelineno-54-31" name="__codelineno-54-31" href="#__codelineno-54-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-54-32"><a id="__codelineno-54-32" name="__codelineno-54-32" href="#__codelineno-54-32"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span></code></pre></div>
<blockquote>
<p><strong>Важно</strong>: Параметр <code>conf_exclude_inherit_parent</code> имеет приоритет над <code>conf_include_inherit_parent</code> и тоже наследуется! Если какой-либо параметр указан и там и там, то этот параметр НЕ будет включен в список наследуемых:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>        <span class="p">],</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a>        <span class="p">],</span>
</span><span id="__span-55-12"><a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>    <span class="p">)</span>
</span><span id="__span-55-13"><a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a>
</span><span id="__span-55-14"><a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a>
</span><span id="__span-55-15"><a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-55-16"><a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-55-17"><a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a>
</span><span id="__span-55-18"><a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-55-19"><a id="__codelineno-55-19" name="__codelineno-55-19" href="#__codelineno-55-19"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-55-20"><a id="__codelineno-55-20" name="__codelineno-55-20" href="#__codelineno-55-20"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-55-21"><a id="__codelineno-55-21" name="__codelineno-55-21" href="#__codelineno-55-21"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-55-22"><a id="__codelineno-55-22" name="__codelineno-55-22" href="#__codelineno-55-22"></a>            <span class="s2">&quot;conf_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-55-23"><a id="__codelineno-55-23" name="__codelineno-55-23" href="#__codelineno-55-23"></a>        <span class="p">],</span>
</span><span id="__span-55-24"><a id="__codelineno-55-24" name="__codelineno-55-24" href="#__codelineno-55-24"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-55-25"><a id="__codelineno-55-25" name="__codelineno-55-25" href="#__codelineno-55-25"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-55-26"><a id="__codelineno-55-26" name="__codelineno-55-26" href="#__codelineno-55-26"></a>        <span class="p">],</span>
</span><span id="__span-55-27"><a id="__codelineno-55-27" name="__codelineno-55-27" href="#__codelineno-55-27"></a>    <span class="p">)</span>
</span><span id="__span-55-28"><a id="__codelineno-55-28" name="__codelineno-55-28" href="#__codelineno-55-28"></a>
</span><span id="__span-55-29"><a id="__codelineno-55-29" name="__codelineno-55-29" href="#__codelineno-55-29"></a>
</span><span id="__span-55-30"><a id="__codelineno-55-30" name="__codelineno-55-30" href="#__codelineno-55-30"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-55-31"><a id="__codelineno-55-31" name="__codelineno-55-31" href="#__codelineno-55-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-55-32"><a id="__codelineno-55-32" name="__codelineno-55-32" href="#__codelineno-55-32"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-55-33"><a id="__codelineno-55-33" name="__codelineno-55-33" href="#__codelineno-55-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-55-34"><a id="__codelineno-55-34" name="__codelineno-55-34" href="#__codelineno-55-34"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-55-35"><a id="__codelineno-55-35" name="__codelineno-55-35" href="#__codelineno-55-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-55-36"><a id="__codelineno-55-36" name="__codelineno-55-36" href="#__codelineno-55-36"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-55-37"><a id="__codelineno-55-37" name="__codelineno-55-37" href="#__codelineno-55-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-55-38"><a id="__codelineno-55-38" name="__codelineno-55-38" href="#__codelineno-55-38"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;yaml&#39;, &#39;yml&#39;, &#39;json&#39;]</span>
</span></code></pre></div>
<p>Чтоб отключить такое поведение и добиться того же результата, что и в примере выше, нужно сделать следующее:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>        <span class="p">],</span>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-56-12"><a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a>        <span class="p">],</span>
</span><span id="__span-56-13"><a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a>    <span class="p">)</span>
</span><span id="__span-56-14"><a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a>
</span><span id="__span-56-15"><a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a>
</span><span id="__span-56-16"><a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-56-17"><a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-56-18"><a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a>
</span><span id="__span-56-19"><a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-56-20"><a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-56-21"><a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-56-22"><a id="__codelineno-56-22" name="__codelineno-56-22" href="#__codelineno-56-22"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-56-23"><a id="__codelineno-56-23" name="__codelineno-56-23" href="#__codelineno-56-23"></a>            <span class="s2">&quot;conf_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-56-24"><a id="__codelineno-56-24" name="__codelineno-56-24" href="#__codelineno-56-24"></a>        <span class="p">],</span>
</span><span id="__span-56-25"><a id="__codelineno-56-25" name="__codelineno-56-25" href="#__codelineno-56-25"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-56-26"><a id="__codelineno-56-26" name="__codelineno-56-26" href="#__codelineno-56-26"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-56-27"><a id="__codelineno-56-27" name="__codelineno-56-27" href="#__codelineno-56-27"></a>        <span class="p">],</span>
</span><span id="__span-56-28"><a id="__codelineno-56-28" name="__codelineno-56-28" href="#__codelineno-56-28"></a>    <span class="p">)</span>
</span><span id="__span-56-29"><a id="__codelineno-56-29" name="__codelineno-56-29" href="#__codelineno-56-29"></a>
</span><span id="__span-56-30"><a id="__codelineno-56-30" name="__codelineno-56-30" href="#__codelineno-56-30"></a>
</span><span id="__span-56-31"><a id="__codelineno-56-31" name="__codelineno-56-31" href="#__codelineno-56-31"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-56-32"><a id="__codelineno-56-32" name="__codelineno-56-32" href="#__codelineno-56-32"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-56-33"><a id="__codelineno-56-33" name="__codelineno-56-33" href="#__codelineno-56-33"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-56-34"><a id="__codelineno-56-34" name="__codelineno-56-34" href="#__codelineno-56-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-56-35"><a id="__codelineno-56-35" name="__codelineno-56-35" href="#__codelineno-56-35"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-56-36"><a id="__codelineno-56-36" name="__codelineno-56-36" href="#__codelineno-56-36"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-56-37"><a id="__codelineno-56-37" name="__codelineno-56-37" href="#__codelineno-56-37"></a><span class="c1">#&gt; None</span>
</span><span id="__span-56-38"><a id="__codelineno-56-38" name="__codelineno-56-38" href="#__codelineno-56-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-56-39"><a id="__codelineno-56-39" name="__codelineno-56-39" href="#__codelineno-56-39"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span></code></pre></div>
<ol>
<li>Исключаем из наследования <code>conf_exclude_inherit_parent</code> параметр.</li>
</ol>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w">    </span><span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span><span class="w">                    </span><span class="c1"># (1)!</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="p">]</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a><span class="w">    </span><span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a><span class="p">]</span>
</span></code></pre></div>
<ol>
<li>Наследовать только расширения файлов</li>
</ol>
<h2 id="env_config">env_config<a class="headerlink" href="#env_config" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">EnvConfigDict</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">EnvConfigSchema</span><span class="p">()</span><span class="o">.</span><span class="n">env_dict</span><span class="p">()</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Настройки, которые описывают правила чтения переменных окружения.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>        <span class="n">env_nested_delimiter</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<h3 id="env_file">env_file<a class="headerlink" href="#env_file" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;.env&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Файл или список файлов из которых будут читаться переменные окружения. Если указан список файлов, то значения, указанные в последнем файле из этого списка, будут переопределять переменные, указанные в предыдущих файлах. Файлы можно указывать строкой, через запятую.</p>
<p><strong>Поиск файлов</strong>:</p>
<p>Сначала происходит поиск файла в главной директории проекта <a href="#root_dir">root_dir</a>. Если файл не найден, то поиск происходит в базовой директории проекта <a href="#BASE_DIR">BASE_DIR</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>        <span class="n">env_file</span> <span class="o">=</span> <span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<ul>
<li>Указание нескольких файлов
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="n">env_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;.env&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.env.local&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.env.production&quot;</span><span class="p">]</span>
</span></code></pre></div></li>
<li>Отключение чтения переменных окружения из файла
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="n">env_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
</span></code></pre></div></li>
</ul>
<h3 id="env_prefix">env_prefix<a class="headerlink" href="#env_prefix" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет указанное значение в начало имени переменной.</p>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a>APP_NAME=&quot;My Awesome App&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>    <span class="n">NAME</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>        <span class="n">env_prefix</span> <span class="o">=</span> <span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-63-7"><a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a>    <span class="p">)</span>
</span><span id="__span-63-8"><a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a>
</span><span id="__span-63-9"><a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-63-10"><a id="__codelineno-63-10" name="__codelineno-63-10" href="#__codelineno-63-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">NAME</span><span class="p">)</span>
</span><span id="__span-63-11"><a id="__codelineno-63-11" name="__codelineno-63-11" href="#__codelineno-63-11"></a><span class="c1">#&gt; My Awesome App</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="n">env_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MyPrefix--&quot;</span>
</span></code></pre></div>
<h3 id="env_prefix_as_mode_dir">env_prefix_as_mode_dir<a class="headerlink" href="#env_prefix_as_mode_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет <a href="#computed_mode_dir">computed_mode_dir</a> - вычисляемое значение параметра <a href="#mode_dir">mode_dir</a> в начало имени переменной.</p>
<blockquote>
<p><strong>Внимание</strong>: Переопределяет значение, указанное в <a href="#env_prefix">env_prefix</a> !!!</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a>PARENT_NESTED_APP_NAME=&quot;My Application Name&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested&quot;</span>
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>
</span><span id="__span-66-7"><a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a>
</span><span id="__span-66-8"><a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-66-9"><a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-66-10"><a id="__codelineno-66-10" name="__codelineno-66-10" href="#__codelineno-66-10"></a>
</span><span id="__span-66-11"><a id="__codelineno-66-11" name="__codelineno-66-11" href="#__codelineno-66-11"></a>
</span><span id="__span-66-12"><a id="__codelineno-66-12" name="__codelineno-66-12" href="#__codelineno-66-12"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-66-13"><a id="__codelineno-66-13" name="__codelineno-66-13" href="#__codelineno-66-13"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-66-14"><a id="__codelineno-66-14" name="__codelineno-66-14" href="#__codelineno-66-14"></a>
</span><span id="__span-66-15"><a id="__codelineno-66-15" name="__codelineno-66-15" href="#__codelineno-66-15"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-66-16"><a id="__codelineno-66-16" name="__codelineno-66-16" href="#__codelineno-66-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-66-17"><a id="__codelineno-66-17" name="__codelineno-66-17" href="#__codelineno-66-17"></a>        <span class="n">env_prefix_as_mode_dir</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-66-18"><a id="__codelineno-66-18" name="__codelineno-66-18" href="#__codelineno-66-18"></a>    <span class="p">)</span>
</span><span id="__span-66-19"><a id="__codelineno-66-19" name="__codelineno-66-19" href="#__codelineno-66-19"></a>
</span><span id="__span-66-20"><a id="__codelineno-66-20" name="__codelineno-66-20" href="#__codelineno-66-20"></a>
</span><span id="__span-66-21"><a id="__codelineno-66-21" name="__codelineno-66-21" href="#__codelineno-66-21"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-66-22"><a id="__codelineno-66-22" name="__codelineno-66-22" href="#__codelineno-66-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-66-23"><a id="__codelineno-66-23" name="__codelineno-66-23" href="#__codelineno-66-23"></a><span class="c1">#&gt; nested/app</span>
</span><span id="__span-66-24"><a id="__codelineno-66-24" name="__codelineno-66-24" href="#__codelineno-66-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-66-25"><a id="__codelineno-66-25" name="__codelineno-66-25" href="#__codelineno-66-25"></a><span class="c1">#&gt; parent/nested/app</span>
</span><span id="__span-66-26"><a id="__codelineno-66-26" name="__codelineno-66-26" href="#__codelineno-66-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-66-27"><a id="__codelineno-66-27" name="__codelineno-66-27" href="#__codelineno-66-27"></a><span class="c1">#&gt; parent_nested_app_</span>
</span><span id="__span-66-28"><a id="__codelineno-66-28" name="__codelineno-66-28" href="#__codelineno-66-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-66-29"><a id="__codelineno-66-29" name="__codelineno-66-29" href="#__codelineno-66-29"></a><span class="c1">#&gt; My Application Name</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="n">env_prefix_as_mode_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_prefix_as_nested_mode_dir">env_prefix_as_nested_mode_dir<a class="headerlink" href="#env_prefix_as_nested_mode_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет <a href="#mode_dir">mode_dir</a> в начало имени переменной.</p>
<blockquote>
<p><strong>Внимание</strong>: Переопределяет значение, указанное в <a href="#env_prefix">env_prefix</a> и в <a href="#env_prefix_as_mode_dir">env_prefix_as_mode_dir</a> !!!</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>NESTED_APP_NAME=&quot;My Application Name&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-69-5"><a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested&quot;</span>
</span><span id="__span-69-6"><a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>
</span><span id="__span-69-7"><a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a>
</span><span id="__span-69-8"><a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-69-9"><a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-69-10"><a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a>
</span><span id="__span-69-11"><a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a>
</span><span id="__span-69-12"><a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-69-13"><a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-69-14"><a id="__codelineno-69-14" name="__codelineno-69-14" href="#__codelineno-69-14"></a>
</span><span id="__span-69-15"><a id="__codelineno-69-15" name="__codelineno-69-15" href="#__codelineno-69-15"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-69-16"><a id="__codelineno-69-16" name="__codelineno-69-16" href="#__codelineno-69-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-69-17"><a id="__codelineno-69-17" name="__codelineno-69-17" href="#__codelineno-69-17"></a>        <span class="n">env_prefix_as_nested_mode_dir</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-69-18"><a id="__codelineno-69-18" name="__codelineno-69-18" href="#__codelineno-69-18"></a>    <span class="p">)</span>
</span><span id="__span-69-19"><a id="__codelineno-69-19" name="__codelineno-69-19" href="#__codelineno-69-19"></a>
</span><span id="__span-69-20"><a id="__codelineno-69-20" name="__codelineno-69-20" href="#__codelineno-69-20"></a>
</span><span id="__span-69-21"><a id="__codelineno-69-21" name="__codelineno-69-21" href="#__codelineno-69-21"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-69-22"><a id="__codelineno-69-22" name="__codelineno-69-22" href="#__codelineno-69-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-69-23"><a id="__codelineno-69-23" name="__codelineno-69-23" href="#__codelineno-69-23"></a><span class="c1">#&gt; nested/app</span>
</span><span id="__span-69-24"><a id="__codelineno-69-24" name="__codelineno-69-24" href="#__codelineno-69-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">nested_mode_dir</span><span class="p">)</span>
</span><span id="__span-69-25"><a id="__codelineno-69-25" name="__codelineno-69-25" href="#__codelineno-69-25"></a><span class="c1">#&gt; nested</span>
</span><span id="__span-69-26"><a id="__codelineno-69-26" name="__codelineno-69-26" href="#__codelineno-69-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-69-27"><a id="__codelineno-69-27" name="__codelineno-69-27" href="#__codelineno-69-27"></a><span class="c1">#&gt; nested_app_</span>
</span><span id="__span-69-28"><a id="__codelineno-69-28" name="__codelineno-69-28" href="#__codelineno-69-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-69-29"><a id="__codelineno-69-29" name="__codelineno-69-29" href="#__codelineno-69-29"></a><span class="c1">#&gt; My Application Name</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="n">env_prefix_as_nested_mode_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_prefix_as_source_mode_dir">env_prefix_as_source_mode_dir<a class="headerlink" href="#env_prefix_as_source_mode_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет <a href="#mode_dir">mode_dir</a> в начало имени переменной.</p>
<blockquote>
<p><strong>Внимание</strong>: Переопределяет значение, указанное в <a href="#env_prefix">env_prefix</a>, <a href="#env_prefix_as_mode_dir">env_prefix_as_mode_dir</a> и в <a href="#env_prefix_as_nested_mode_dir">env_prefix_as_nested_mode_dir</a>!!!</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>APP_NAME=&quot;My Application Name&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested&quot;</span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a>
</span><span id="__span-72-8"><a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-72-9"><a id="__codelineno-72-9" name="__codelineno-72-9" href="#__codelineno-72-9"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-72-10"><a id="__codelineno-72-10" name="__codelineno-72-10" href="#__codelineno-72-10"></a>
</span><span id="__span-72-11"><a id="__codelineno-72-11" name="__codelineno-72-11" href="#__codelineno-72-11"></a>
</span><span id="__span-72-12"><a id="__codelineno-72-12" name="__codelineno-72-12" href="#__codelineno-72-12"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-72-13"><a id="__codelineno-72-13" name="__codelineno-72-13" href="#__codelineno-72-13"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-72-14"><a id="__codelineno-72-14" name="__codelineno-72-14" href="#__codelineno-72-14"></a>
</span><span id="__span-72-15"><a id="__codelineno-72-15" name="__codelineno-72-15" href="#__codelineno-72-15"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-72-16"><a id="__codelineno-72-16" name="__codelineno-72-16" href="#__codelineno-72-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-72-17"><a id="__codelineno-72-17" name="__codelineno-72-17" href="#__codelineno-72-17"></a>        <span class="n">env_prefix_as_source_mode_dir</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-72-18"><a id="__codelineno-72-18" name="__codelineno-72-18" href="#__codelineno-72-18"></a>    <span class="p">)</span>
</span><span id="__span-72-19"><a id="__codelineno-72-19" name="__codelineno-72-19" href="#__codelineno-72-19"></a>
</span><span id="__span-72-20"><a id="__codelineno-72-20" name="__codelineno-72-20" href="#__codelineno-72-20"></a>
</span><span id="__span-72-21"><a id="__codelineno-72-21" name="__codelineno-72-21" href="#__codelineno-72-21"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-72-22"><a id="__codelineno-72-22" name="__codelineno-72-22" href="#__codelineno-72-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-72-23"><a id="__codelineno-72-23" name="__codelineno-72-23" href="#__codelineno-72-23"></a><span class="c1">#&gt; nested/app</span>
</span><span id="__span-72-24"><a id="__codelineno-72-24" name="__codelineno-72-24" href="#__codelineno-72-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">source_mode_dir</span><span class="p">)</span>
</span><span id="__span-72-25"><a id="__codelineno-72-25" name="__codelineno-72-25" href="#__codelineno-72-25"></a><span class="c1">#&gt; app</span>
</span><span id="__span-72-26"><a id="__codelineno-72-26" name="__codelineno-72-26" href="#__codelineno-72-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-72-27"><a id="__codelineno-72-27" name="__codelineno-72-27" href="#__codelineno-72-27"></a><span class="c1">#&gt; app_</span>
</span><span id="__span-72-28"><a id="__codelineno-72-28" name="__codelineno-72-28" href="#__codelineno-72-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-72-29"><a id="__codelineno-72-29" name="__codelineno-72-29" href="#__codelineno-72-29"></a><span class="c1">#&gt; My Application Name</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="n">env_prefix_as_source_mode_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_nested_delimiter">env_nested_delimiter<a class="headerlink" href="#env_nested_delimiter" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При классическом наследовании если классы наследуются от <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code> - то в названии переменной окружения при множественном вложении используется разделитель <code>__</code>, который отделяет имена атрибутов или их алиасы друг от друга.</p>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>NAME=&quot;Travel map&quot;
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>COUNTRY__NAME=&quot;Russia&quot;
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>COUNTRY__CITY__NAME=&quot;Moscow&quot;
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>COUNTRY__CITY__STREET__NAME=&quot;Arbat Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AliasChoices</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a>
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a>
</span><span id="__span-75-5"><a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a><span class="k">class</span> <span class="nc">Street</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-75-6"><a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a>    <span class="n">short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;StName&quot;</span><span class="p">,</span> <span class="s2">&quot;street_name&quot;</span><span class="p">))</span>
</span><span id="__span-75-7"><a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a>
</span><span id="__span-75-8"><a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a>
</span><span id="__span-75-9"><a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a><span class="k">class</span> <span class="nc">City</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-75-10"><a id="__codelineno-75-10" name="__codelineno-75-10" href="#__codelineno-75-10"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-75-11"><a id="__codelineno-75-11" name="__codelineno-75-11" href="#__codelineno-75-11"></a>    <span class="n">street</span><span class="p">:</span> <span class="n">Street</span>
</span><span id="__span-75-12"><a id="__codelineno-75-12" name="__codelineno-75-12" href="#__codelineno-75-12"></a>
</span><span id="__span-75-13"><a id="__codelineno-75-13" name="__codelineno-75-13" href="#__codelineno-75-13"></a>
</span><span id="__span-75-14"><a id="__codelineno-75-14" name="__codelineno-75-14" href="#__codelineno-75-14"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-75-15"><a id="__codelineno-75-15" name="__codelineno-75-15" href="#__codelineno-75-15"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-75-16"><a id="__codelineno-75-16" name="__codelineno-75-16" href="#__codelineno-75-16"></a>    <span class="n">city</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-75-17"><a id="__codelineno-75-17" name="__codelineno-75-17" href="#__codelineno-75-17"></a>
</span><span id="__span-75-18"><a id="__codelineno-75-18" name="__codelineno-75-18" href="#__codelineno-75-18"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-75-19"><a id="__codelineno-75-19" name="__codelineno-75-19" href="#__codelineno-75-19"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--*--&quot;</span><span class="p">,</span>
</span><span id="__span-75-20"><a id="__codelineno-75-20" name="__codelineno-75-20" href="#__codelineno-75-20"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-75-21"><a id="__codelineno-75-21" name="__codelineno-75-21" href="#__codelineno-75-21"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-75-22"><a id="__codelineno-75-22" name="__codelineno-75-22" href="#__codelineno-75-22"></a>        <span class="p">],</span>
</span><span id="__span-75-23"><a id="__codelineno-75-23" name="__codelineno-75-23" href="#__codelineno-75-23"></a>    <span class="p">)</span>
</span><span id="__span-75-24"><a id="__codelineno-75-24" name="__codelineno-75-24" href="#__codelineno-75-24"></a>
</span><span id="__span-75-25"><a id="__codelineno-75-25" name="__codelineno-75-25" href="#__codelineno-75-25"></a>
</span><span id="__span-75-26"><a id="__codelineno-75-26" name="__codelineno-75-26" href="#__codelineno-75-26"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-75-27"><a id="__codelineno-75-27" name="__codelineno-75-27" href="#__codelineno-75-27"></a>    <span class="n">PROJECT_NAME</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
</span><span id="__span-75-28"><a id="__codelineno-75-28" name="__codelineno-75-28" href="#__codelineno-75-28"></a>    <span class="n">country</span><span class="p">:</span> <span class="n">Country</span>
</span><span id="__span-75-29"><a id="__codelineno-75-29" name="__codelineno-75-29" href="#__codelineno-75-29"></a>
</span><span id="__span-75-30"><a id="__codelineno-75-30" name="__codelineno-75-30" href="#__codelineno-75-30"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-75-31"><a id="__codelineno-75-31" name="__codelineno-75-31" href="#__codelineno-75-31"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-75-32"><a id="__codelineno-75-32" name="__codelineno-75-32" href="#__codelineno-75-32"></a>        <span class="n">env_nested_delimiter</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-75-33"><a id="__codelineno-75-33" name="__codelineno-75-33" href="#__codelineno-75-33"></a>    <span class="p">)</span>
</span><span id="__span-75-34"><a id="__codelineno-75-34" name="__codelineno-75-34" href="#__codelineno-75-34"></a>
</span><span id="__span-75-35"><a id="__codelineno-75-35" name="__codelineno-75-35" href="#__codelineno-75-35"></a>
</span><span id="__span-75-36"><a id="__codelineno-75-36" name="__codelineno-75-36" href="#__codelineno-75-36"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-75-37"><a id="__codelineno-75-37" name="__codelineno-75-37" href="#__codelineno-75-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">)</span>
</span><span id="__span-75-38"><a id="__codelineno-75-38" name="__codelineno-75-38" href="#__codelineno-75-38"></a><span class="c1">#&gt; Travel map</span>
</span><span id="__span-75-39"><a id="__codelineno-75-39" name="__codelineno-75-39" href="#__codelineno-75-39"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-75-40"><a id="__codelineno-75-40" name="__codelineno-75-40" href="#__codelineno-75-40"></a><span class="c1">#&gt; Russia</span>
</span><span id="__span-75-41"><a id="__codelineno-75-41" name="__codelineno-75-41" href="#__codelineno-75-41"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-75-42"><a id="__codelineno-75-42" name="__codelineno-75-42" href="#__codelineno-75-42"></a><span class="c1">#&gt; Moscow</span>
</span><span id="__span-75-43"><a id="__codelineno-75-43" name="__codelineno-75-43" href="#__codelineno-75-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">street</span><span class="o">.</span><span class="n">short_name</span><span class="p">)</span>
</span><span id="__span-75-44"><a id="__codelineno-75-44" name="__codelineno-75-44" href="#__codelineno-75-44"></a><span class="c1">#&gt; Arbat Street</span>
</span></code></pre></div>
<p>Прелесть обратного наследования заключается в том, что для классов-детей можно переопределять или задавать собственные настройки и они также будут работать.
Например здесь в классах <code class="language-python highlight"><span class="n">AppConfig</span></code> и <code class="language-python highlight"><span class="n">Country</span></code> указан совершенно разный <code>env_nested_delimiter</code>. По умолчанию главнее те настройки, которые указаны в самом классе.
По этому мы можем дописать файл <code>.env</code>, как показано ниже, и получим совершенно другой результат.</p>
<p><div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>NAME=&quot;Travel map&quot;
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a>COUNTRY__NAME=&quot;Russia&quot;
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a>COUNTRY__CITY__NAME=&quot;Moscow&quot;
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a>COUNTRY__CITY__STREET__NAME=&quot;Arbat Street&quot;
</span><span id="__span-76-5"><a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a>
</span><span id="__span-76-6"><a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a>COUNTRY--*--NAME=&quot;Belarus&quot;
</span><span id="__span-76-7"><a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a>COUNTRY--*--CITY--*--NAME=&quot;Minsk&quot;
</span><span id="__span-76-8"><a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a>COUNTRY--*--CITY--*--STREET--*--NAME=&quot;Niamiha Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">)</span>
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="c1">#&gt; Travel map</span>
</span><span id="__span-77-4"><a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-77-5"><a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a><span class="c1">#&gt; Belarus</span>
</span><span id="__span-77-6"><a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-77-7"><a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a><span class="c1">#&gt; Minsk</span>
</span><span id="__span-77-8"><a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">street</span><span class="o">.</span><span class="n">short_name</span><span class="p">)</span>
</span><span id="__span-77-9"><a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a><span class="c1">#&gt; Niamiha Street</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="n">env_nested_delimiter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;__&quot;</span>
</span></code></pre></div>
<h3 id="env_file_encoding">env_file_encoding<a class="headerlink" href="#env_file_encoding" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span>  <span class="c1"># utf-8</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Задаёт кодировку при чтении переменных окружения из файлов. Применяется сразу ко всем файлам, указанным в <a href="#env_file">env_file</a></p>
<p><strong>Использование</strong>:
<div class="language-py highlight"><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>
</span><span id="__span-79-3"><a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-79-4"><a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-79-5"><a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-79-6"><a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a>    <span class="p">)</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="n">env_file_encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cp1251&quot;</span>
</span></code></pre></div>
<h3 id="env_case_sensitive">env_case_sensitive<a class="headerlink" href="#env_case_sensitive" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает нужно ли обращать внимание на регистр имени при чтении переменных окружения.
Хотя по умолчанию переменные читаются как регистронезависимые, но приоритет всегда отдаётся точному совпадению, даже при множественной вложенности моделей!</p>
<p>Никаких ошибок возбуждаться НЕ будет, даже если вы ошиблись в написании имени переменной! Все имена переменных, не соответствующие критериям поиска будут проигнорированы!</p>
<p><strong>Использование</strong>:</p>
<p>На самом деле это достаточно сложная тема, так как алгоритмы поиска немного отличаются друг от друга в зависимости от вариантов вложенности моделей. Возможно позже в документации будет создана отдельная тема, посвящённая этому. В дальнейшем, в обязательном порядке, это будет включено в режим отладки. А пока постараюсь объяснить вкратце.</p>
<p>Есть всего 3 варианта условий множественной вложенности моделей:</p>
<ol>
<li>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code>. Это самый простой классический вариант.</li>
<li>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>.</li>
<li>Комбинация первых двух вариантов.</li>
</ol>
<p>Сложность заключается в том, что если вложенные модели наследуются от <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>, то у каждой такой модели могут быть свои собственные настройки для чтения переменных окружения, которые имеют приоритет, но при этом так же будут применяться настройки, указанные в классе-родителе в парадигме обратного наследования.</p>
<p>При таком поведении значение для одного и того же атрибута класса можно указать множеством имён переменных окружения. А если у этого атрибута есть ещё и несколько алиасов, то при регисторонезависимом поиске количество вариантов имён переменных окружения возрастает в несколько раз.</p>
<p>Все эти алгоритмы поиска уже реализованы. Ниже будут рассмотрены первые 2 варианта.</p>
<ol>
<li>
<p>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code>.</p>
<ul>
<li><strong>Исходная модель</strong>:</li>
</ul>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a>
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a>
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a><span class="k">class</span> <span class="nc">Street</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a>    <span class="n">Name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a>
</span><span id="__span-81-8"><a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a>
</span><span id="__span-81-9"><a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a><span class="k">class</span> <span class="nc">City</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-81-10"><a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a>    <span class="n">Street</span><span class="p">:</span> <span class="n">Street</span>
</span><span id="__span-81-11"><a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a>
</span><span id="__span-81-12"><a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a>
</span><span id="__span-81-13"><a id="__codelineno-81-13" name="__codelineno-81-13" href="#__codelineno-81-13"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-81-14"><a id="__codelineno-81-14" name="__codelineno-81-14" href="#__codelineno-81-14"></a>    <span class="n">City</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-81-15"><a id="__codelineno-81-15" name="__codelineno-81-15" href="#__codelineno-81-15"></a>
</span><span id="__span-81-16"><a id="__codelineno-81-16" name="__codelineno-81-16" href="#__codelineno-81-16"></a>
</span><span id="__span-81-17"><a id="__codelineno-81-17" name="__codelineno-81-17" href="#__codelineno-81-17"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-81-18"><a id="__codelineno-81-18" name="__codelineno-81-18" href="#__codelineno-81-18"></a>    <span class="n">Country</span><span class="p">:</span> <span class="n">Country</span>
</span><span id="__span-81-19"><a id="__codelineno-81-19" name="__codelineno-81-19" href="#__codelineno-81-19"></a>
</span><span id="__span-81-20"><a id="__codelineno-81-20" name="__codelineno-81-20" href="#__codelineno-81-20"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-81-21"><a id="__codelineno-81-21" name="__codelineno-81-21" href="#__codelineno-81-21"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-81-22"><a id="__codelineno-81-22" name="__codelineno-81-22" href="#__codelineno-81-22"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-81-23"><a id="__codelineno-81-23" name="__codelineno-81-23" href="#__codelineno-81-23"></a>    <span class="p">)</span>
</span></code></pre></div>
<ul>
<li><strong>Задача</strong>:</li>
</ul>
<p>Нужно указать переменную окружения для <code class="language-python highlight"><span class="n">Street</span><span class="o">.</span><span class="n">Name</span></code>.</p>
<ul>
<li><strong>Решение</strong>:</li>
</ul>
<p>Самое простое решение, которое сработает только при <code class="language-text highlight">env_case_sensitive=False</code>, которое установлено по умолчанию:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a><span class="c1">#&gt; Awesome Street</span>
</span></code></pre></div></p>
<p>Вариант, который ОДИНАКОВО сработает и при <code class="language-text highlight">env_case_sensitive=True</code> и при <code class="language-text highlight">env_case_sensitive=False</code>:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span><span id="__span-84-2"><a id="__codelineno-84-2" name="__codelineno-84-2" href="#__codelineno-84-2"></a>Country__City__Street__Name=&quot;Awesome Street exactly match aliases names&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="c1">#&gt; Awesome Street exactly match aliases names</span>
</span></code></pre></div></p>
<p>При <code class="language-text highlight">env_case_sensitive=True</code> будет произведён поиск только по имени переменной <code>Country__City__Street__Name</code>, остальные переменные будут проигнорированы.</p>
<p>Ниже приведены примеры всех возможных вариантов имён переменных окружения при регистронезависимом поиске, <code class="language-text highlight">env_case_sensitive=False</code>, указанные в порядке возрастания приоритета поиска. Где 0 - имеет самый низший приоритет, а 16 - наивысший.</p>
<blockquote>
<p><strong>Заметка</strong>: В приведённом конкретном примере у каждого атрибута есть 2 алиаса, по которым производится поиск - это его имя и его имя в нижнем регистре.</p>
</blockquote>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a># Не имеют приоритета, потому что не совпадают ни с одним вариантом поиска,
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a># но будут прочитаны, если нет совпадений с вариантами поиска
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street - 0&quot;
</span><span id="__span-86-4"><a id="__codelineno-86-4" name="__codelineno-86-4" href="#__codelineno-86-4"></a>couNTry__citY__StreeT__nAMe=&quot;Awesome Street - 0&quot;
</span><span id="__span-86-5"><a id="__codelineno-86-5" name="__codelineno-86-5" href="#__codelineno-86-5"></a>country__city__street__NAME=&quot;Awesome Street - 0&quot;
</span><span id="__span-86-6"><a id="__codelineno-86-6" name="__codelineno-86-6" href="#__codelineno-86-6"></a>
</span><span id="__span-86-7"><a id="__codelineno-86-7" name="__codelineno-86-7" href="#__codelineno-86-7"></a># Ниже варианты, по которым происходит поиск, в порядке повышения приоритета
</span><span id="__span-86-8"><a id="__codelineno-86-8" name="__codelineno-86-8" href="#__codelineno-86-8"></a>country__city__street__name=&quot;Awesome Street - 1&quot;
</span><span id="__span-86-9"><a id="__codelineno-86-9" name="__codelineno-86-9" href="#__codelineno-86-9"></a>country__city__street__Name=&quot;Awesome Street - 2&quot;
</span><span id="__span-86-10"><a id="__codelineno-86-10" name="__codelineno-86-10" href="#__codelineno-86-10"></a>country__city__street__Name=&quot;Awesome Street - 3&quot;
</span><span id="__span-86-11"><a id="__codelineno-86-11" name="__codelineno-86-11" href="#__codelineno-86-11"></a>country__city__Street__Name=&quot;Awesome Street - 4&quot;
</span><span id="__span-86-12"><a id="__codelineno-86-12" name="__codelineno-86-12" href="#__codelineno-86-12"></a>country__City__street__name=&quot;Awesome Street - 5&quot;
</span><span id="__span-86-13"><a id="__codelineno-86-13" name="__codelineno-86-13" href="#__codelineno-86-13"></a>country__City__street__Name=&quot;Awesome Street - 6&quot;
</span><span id="__span-86-14"><a id="__codelineno-86-14" name="__codelineno-86-14" href="#__codelineno-86-14"></a>country__City__Street__name=&quot;Awesome Street - 7&quot;
</span><span id="__span-86-15"><a id="__codelineno-86-15" name="__codelineno-86-15" href="#__codelineno-86-15"></a>country__City__Street__Name=&quot;Awesome Street - 8&quot;
</span><span id="__span-86-16"><a id="__codelineno-86-16" name="__codelineno-86-16" href="#__codelineno-86-16"></a>Country__city__street__name=&quot;Awesome Street - 9&quot;
</span><span id="__span-86-17"><a id="__codelineno-86-17" name="__codelineno-86-17" href="#__codelineno-86-17"></a>Country__city__street__Name=&quot;Awesome Street - 10&quot;
</span><span id="__span-86-18"><a id="__codelineno-86-18" name="__codelineno-86-18" href="#__codelineno-86-18"></a>Country__city__street__Name=&quot;Awesome Street - 11&quot;
</span><span id="__span-86-19"><a id="__codelineno-86-19" name="__codelineno-86-19" href="#__codelineno-86-19"></a>Country__city__Street__Name=&quot;Awesome Street - 12&quot;
</span><span id="__span-86-20"><a id="__codelineno-86-20" name="__codelineno-86-20" href="#__codelineno-86-20"></a>Country__City__street__name=&quot;Awesome Street - 13&quot;
</span><span id="__span-86-21"><a id="__codelineno-86-21" name="__codelineno-86-21" href="#__codelineno-86-21"></a>Country__City__street__Name=&quot;Awesome Street - 14&quot;
</span><span id="__span-86-22"><a id="__codelineno-86-22" name="__codelineno-86-22" href="#__codelineno-86-22"></a>Country__City__Street__name=&quot;Awesome Street - 15&quot;
</span><span id="__span-86-23"><a id="__codelineno-86-23" name="__codelineno-86-23" href="#__codelineno-86-23"></a>Country__City__Street__Name=&quot;Awesome Street - 16&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="c1">#&gt; Awesome Street - 16</span>
</span></code></pre></div>
</li>
<li>
<p>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>.</p>
<ul>
<li><strong>Исходная модель</strong>:</li>
</ul>
<blockquote>
<p><strong>Заметка</strong>: Разделители выбраны чисто из соображения наглядности.</p>
</blockquote>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a><span class="k">class</span> <span class="nc">Street</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-88-5"><a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a>    <span class="n">Name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-88-6"><a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>
</span><span id="__span-88-7"><a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-88-8"><a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-88-9"><a id="__codelineno-88-9" name="__codelineno-88-9" href="#__codelineno-88-9"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--*--&quot;</span><span class="p">,</span>
</span><span id="__span-88-10"><a id="__codelineno-88-10" name="__codelineno-88-10" href="#__codelineno-88-10"></a>    <span class="p">)</span>
</span><span id="__span-88-11"><a id="__codelineno-88-11" name="__codelineno-88-11" href="#__codelineno-88-11"></a>
</span><span id="__span-88-12"><a id="__codelineno-88-12" name="__codelineno-88-12" href="#__codelineno-88-12"></a>
</span><span id="__span-88-13"><a id="__codelineno-88-13" name="__codelineno-88-13" href="#__codelineno-88-13"></a><span class="k">class</span> <span class="nc">City</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-88-14"><a id="__codelineno-88-14" name="__codelineno-88-14" href="#__codelineno-88-14"></a>    <span class="n">Street</span><span class="p">:</span> <span class="n">Street</span>
</span><span id="__span-88-15"><a id="__codelineno-88-15" name="__codelineno-88-15" href="#__codelineno-88-15"></a>
</span><span id="__span-88-16"><a id="__codelineno-88-16" name="__codelineno-88-16" href="#__codelineno-88-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-88-17"><a id="__codelineno-88-17" name="__codelineno-88-17" href="#__codelineno-88-17"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-88-18"><a id="__codelineno-88-18" name="__codelineno-88-18" href="#__codelineno-88-18"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--^--&quot;</span><span class="p">,</span>
</span><span id="__span-88-19"><a id="__codelineno-88-19" name="__codelineno-88-19" href="#__codelineno-88-19"></a>    <span class="p">)</span>
</span><span id="__span-88-20"><a id="__codelineno-88-20" name="__codelineno-88-20" href="#__codelineno-88-20"></a>
</span><span id="__span-88-21"><a id="__codelineno-88-21" name="__codelineno-88-21" href="#__codelineno-88-21"></a>
</span><span id="__span-88-22"><a id="__codelineno-88-22" name="__codelineno-88-22" href="#__codelineno-88-22"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-88-23"><a id="__codelineno-88-23" name="__codelineno-88-23" href="#__codelineno-88-23"></a>    <span class="n">City</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-88-24"><a id="__codelineno-88-24" name="__codelineno-88-24" href="#__codelineno-88-24"></a>
</span><span id="__span-88-25"><a id="__codelineno-88-25" name="__codelineno-88-25" href="#__codelineno-88-25"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-88-26"><a id="__codelineno-88-26" name="__codelineno-88-26" href="#__codelineno-88-26"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-88-27"><a id="__codelineno-88-27" name="__codelineno-88-27" href="#__codelineno-88-27"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--@--&quot;</span><span class="p">,</span>
</span><span id="__span-88-28"><a id="__codelineno-88-28" name="__codelineno-88-28" href="#__codelineno-88-28"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-88-29"><a id="__codelineno-88-29" name="__codelineno-88-29" href="#__codelineno-88-29"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-88-30"><a id="__codelineno-88-30" name="__codelineno-88-30" href="#__codelineno-88-30"></a>        <span class="p">],</span>
</span><span id="__span-88-31"><a id="__codelineno-88-31" name="__codelineno-88-31" href="#__codelineno-88-31"></a>    <span class="p">)</span>
</span><span id="__span-88-32"><a id="__codelineno-88-32" name="__codelineno-88-32" href="#__codelineno-88-32"></a>
</span><span id="__span-88-33"><a id="__codelineno-88-33" name="__codelineno-88-33" href="#__codelineno-88-33"></a>
</span><span id="__span-88-34"><a id="__codelineno-88-34" name="__codelineno-88-34" href="#__codelineno-88-34"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-88-35"><a id="__codelineno-88-35" name="__codelineno-88-35" href="#__codelineno-88-35"></a>    <span class="n">Country</span><span class="p">:</span> <span class="n">Country</span>
</span><span id="__span-88-36"><a id="__codelineno-88-36" name="__codelineno-88-36" href="#__codelineno-88-36"></a>
</span><span id="__span-88-37"><a id="__codelineno-88-37" name="__codelineno-88-37" href="#__codelineno-88-37"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-88-38"><a id="__codelineno-88-38" name="__codelineno-88-38" href="#__codelineno-88-38"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-88-39"><a id="__codelineno-88-39" name="__codelineno-88-39" href="#__codelineno-88-39"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-88-40"><a id="__codelineno-88-40" name="__codelineno-88-40" href="#__codelineno-88-40"></a>    <span class="p">)</span>
</span></code></pre></div>
<ul>
<li><strong>Задача</strong>:</li>
</ul>
<p>Нужно указать переменную окружения для <code class="language-python highlight"><span class="n">Street</span><span class="o">.</span><span class="n">Name</span></code>.</p>
<ul>
<li><strong>Решение</strong>:</li>
</ul>
<p>Самое простое решение, которое сработает только при <code class="language-text highlight">env_case_sensitive=False</code>, которое установлено по умолчанию:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="c1">#&gt; Awesome Street</span>
</span></code></pre></div></p>
<p>Вариант, который ОДИНАКОВО сработает и при <code class="language-text highlight">env_case_sensitive=True</code> и при <code class="language-text highlight">env_case_sensitive=False</code>:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>Country--*--City--*--Street--*--Name=&quot;Awesome Street exactly match aliases names&quot;
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a><span class="c1">#&gt; Awesome Street exactly match aliases names</span>
</span></code></pre></div>
<ul>
<li><strong>Отличия от первого варианта</strong>:</li>
</ul>
<p>Здесь для каждой вложенной модели указан свой собственный разделитель.
Порядок разрешения имён будет точно таким же как и в первом варианте при наследовании всех вложенных моделей от <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code>.
Но порядок приоритета разделителей определяется правилами обратного наследования. То есть чтоб указать имя переменной среды окружения для атрибута <code class="language-python highlight"><span class="n">Street</span><span class="o">.</span><span class="n">Name</span></code> можно использовать любой разделитель из "<code>__</code>", "<code>--@--</code>", "<code>--^--</code>", "<code>--*--</code>", но разделитель "<code>--*--</code>" будет иметь наивысший приоритет, так как он указан непосредственно в классе <code>Street</code> и атрибут <code>Name</code> принадлежит именно к этому классу, а разделитель "<code>__</code>" будет иметь самый низший приоритет, так как он принадлежит классу-родителю в иерархии обратного наследование.</p>
<p>Такое поведение реализуется в силу того, что ВСЕ вложенные модели наследуются от <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>, а значит для каждой вложенной модели происходить поиск переменных окружения и каждое найденное значение передаётся по иерархии выше от класса-родителя к классу-ребёнку в концепции обратного наследования!</p>
<p>В приведённом ниже примере в именах переменных окружения порядок алиасов имеет наивысший приоритет не зависимо от выставленного значения чувствительности к регистру. Но здесь уже вступает в силу правило обратного наследования, которое задаёт приоритет разделителю:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>Country__City__Street__Name=&quot;Awesome Street exactly match aliases names - 1&quot;
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>Country--@--City--@--Street--@--Name=&quot;Awesome Street exactly match aliases names - 2&quot;
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>Country--^--City--^--Street--^--Name=&quot;Awesome Street exactly match aliases names - 3&quot;
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a>Country--*--City--*--Street--*--Name=&quot;Awesome Street exactly match aliases names - 4&quot;
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-94-3"><a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="c1">#&gt; Awesome Street exactly match aliases names - 4</span>
</span></code></pre></div>
<p>Данное поведение можно отключить, просто запретив читать переменные окружения для класса <code>Country</code> и всех его потомков в концепции обратного наследования. То есть, чтоб переменные окружения читались только для класса <code>AppConfig</code>.</p>
<p>Это можно сделать следующим образом, при наличии тех же самых переменных окружения, что указаны выше:
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>    <span class="n">City</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>
</span><span id="__span-95-4"><a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a>    <span class="n">ordered_settings</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-95-5"><a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a>        <span class="s2">&quot;cli&quot;</span><span class="p">,</span>
</span><span id="__span-95-6"><a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a>        <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-95-7"><a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>        <span class="s2">&quot;secrets&quot;</span><span class="p">,</span>
</span><span id="__span-95-8"><a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>        <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-95-9"><a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a>    <span class="p">]</span>
</span><span id="__span-95-10"><a id="__codelineno-95-10" name="__codelineno-95-10" href="#__codelineno-95-10"></a>
</span><span id="__span-95-11"><a id="__codelineno-95-11" name="__codelineno-95-11" href="#__codelineno-95-11"></a>
</span><span id="__span-95-12"><a id="__codelineno-95-12" name="__codelineno-95-12" href="#__codelineno-95-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-95-13"><a id="__codelineno-95-13" name="__codelineno-95-13" href="#__codelineno-95-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-95-14"><a id="__codelineno-95-14" name="__codelineno-95-14" href="#__codelineno-95-14"></a><span class="c1">#&gt; Awesome Street exactly match aliases names - 1</span>
</span></code></pre></div></p>
<p>Вариантов использования настолько много, что можно запутаться. По этому и планируется дальнейшее развитие режима отладки, чтоб хотя бы можно было посмотреть, какие варианты ожидает получить программа и какой вариант будет приоритетнее.</p>
</li>
</ol>
<blockquote>
<p><strong>Важно</strong>: Не стоит забывать, что в приведённых выше примерах, переменную окружения можно задать следующего вида:
<code>Country='{"City": {"Street": {"Name": "Awesome Street"}}}'</code> и на неё будут распространятся те же правила разрешения имён в зависимости от регистра!!!</p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="n">env_case_sensitive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_ignore_missing">env_ignore_missing<a class="headerlink" href="#env_ignore_missing" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>По умолчанию, если файлы, заданные в <a href="#env_file">env_file</a> не существуют, то их чтение игнорируется.  Но если требуется, чтоб файл или файлы обязательно присутствовали, то необходимо параметр <code>env_ignore_missing</code> установить в значение <code>False</code>.
Так же можно использовать в качестве своеобразного отладчика - в сообщении об ошибке будет указано какой именно файл и по какому пути отсутствует.</p>
<p><strong>Использование</strong>:</p>
<p>Поведение по умолчанию. Отсутствие файла <code>.env</code> не приводит к ошибке
<div class="language-py highlight"><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a>
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-97-6"><a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-97-7"><a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env&quot;</span><span class="p">,</span>            <span class="c1"># by default</span>
</span><span id="__span-97-8"><a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a>        <span class="n">env_ignore_missing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>    <span class="c1"># by default</span>
</span><span id="__span-97-9"><a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a>    <span class="p">)</span>
</span><span id="__span-97-10"><a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a>
</span><span id="__span-97-11"><a id="__codelineno-97-11" name="__codelineno-97-11" href="#__codelineno-97-11"></a>
</span><span id="__span-97-12"><a id="__codelineno-97-12" name="__codelineno-97-12" href="#__codelineno-97-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-97-13"><a id="__codelineno-97-13" name="__codelineno-97-13" href="#__codelineno-97-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-97-14"><a id="__codelineno-97-14" name="__codelineno-97-14" href="#__codelineno-97-14"></a><span class="c1">#&gt; default_param</span>
</span></code></pre></div></p>
<p>При отсутствии файла <code>.env</code> возбуждается ошибка
<div class="language-py highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env&quot;</span><span class="p">,</span>            <span class="c1"># by default</span>
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a>        <span class="n">env_ignore_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a>    <span class="p">)</span>
</span><span id="__span-98-10"><a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a>
</span><span id="__span-98-11"><a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a>
</span><span id="__span-98-12"><a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-98-13"><a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-98-14"><a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-98-15"><a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="__span-98-16"><a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a><span class="sd">    ...</span>
</span><span id="__span-98-17"><a id="__codelineno-98-17" name="__codelineno-98-17" href="#__codelineno-98-17"></a><span class="sd">arfi_settings.errors.ArFiSettingsError: File not found: `/home/user/my_awesome_project/.env`</span>
</span><span id="__span-98-18"><a id="__codelineno-98-18" name="__codelineno-98-18" href="#__codelineno-98-18"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a><span class="n">env_ignore_missing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h3 id="env_exclude_inherit_parent">env_exclude_inherit_parent<a class="headerlink" href="#env_exclude_inherit_parent" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование определённых собственных настроек от класса-родителя
Применяется только при чтении переменных окружения</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя все настройки, кроме <code>env_file_encoding</code> и <code>env_nested_delimiter</code>
<div class="language-py highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>
</span><span id="__span-100-4"><a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-100-5"><a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-100-6"><a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-100-7"><a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>            <span class="s2">&quot;env_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-100-8"><a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-100-9"><a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a>        <span class="p">],</span>
</span><span id="__span-100-10"><a id="__codelineno-100-10" name="__codelineno-100-10" href="#__codelineno-100-10"></a>    <span class="p">)</span>
</span><span id="__span-100-11"><a id="__codelineno-100-11" name="__codelineno-100-11" href="#__codelineno-100-11"></a>
</span><span id="__span-100-12"><a id="__codelineno-100-12" name="__codelineno-100-12" href="#__codelineno-100-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-100-13"><a id="__codelineno-100-13" name="__codelineno-100-13" href="#__codelineno-100-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-100-14"><a id="__codelineno-100-14" name="__codelineno-100-14" href="#__codelineno-100-14"></a>
</span><span id="__span-100-15"><a id="__codelineno-100-15" name="__codelineno-100-15" href="#__codelineno-100-15"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-100-16"><a id="__codelineno-100-16" name="__codelineno-100-16" href="#__codelineno-100-16"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-100-17"><a id="__codelineno-100-17" name="__codelineno-100-17" href="#__codelineno-100-17"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-100-18"><a id="__codelineno-100-18" name="__codelineno-100-18" href="#__codelineno-100-18"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-100-19"><a id="__codelineno-100-19" name="__codelineno-100-19" href="#__codelineno-100-19"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-100-20"><a id="__codelineno-100-20" name="__codelineno-100-20" href="#__codelineno-100-20"></a>    <span class="p">)</span>
</span><span id="__span-100-21"><a id="__codelineno-100-21" name="__codelineno-100-21" href="#__codelineno-100-21"></a>
</span><span id="__span-100-22"><a id="__codelineno-100-22" name="__codelineno-100-22" href="#__codelineno-100-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-100-23"><a id="__codelineno-100-23" name="__codelineno-100-23" href="#__codelineno-100-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-100-24"><a id="__codelineno-100-24" name="__codelineno-100-24" href="#__codelineno-100-24"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-100-25"><a id="__codelineno-100-25" name="__codelineno-100-25" href="#__codelineno-100-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-100-26"><a id="__codelineno-100-26" name="__codelineno-100-26" href="#__codelineno-100-26"></a><span class="c1">#&gt; &quot;__&quot;</span>
</span><span id="__span-100-27"><a id="__codelineno-100-27" name="__codelineno-100-27" href="#__codelineno-100-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-100-28"><a id="__codelineno-100-28" name="__codelineno-100-28" href="#__codelineno-100-28"></a><span class="c1">#&gt; None</span>
</span><span id="__span-100-29"><a id="__codelineno-100-29" name="__codelineno-100-29" href="#__codelineno-100-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-100-30"><a id="__codelineno-100-30" name="__codelineno-100-30" href="#__codelineno-100-30"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div></p>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>env_exclude_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>env_exclude_inherit_parent</code>!!! Для этого его тоже нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a>            <span class="s2">&quot;env_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>            <span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-101-7"><a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a>        <span class="p">],</span>
</span><span id="__span-101-8"><a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a>    <span class="p">)</span>
</span><span id="__span-101-9"><a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a>
</span><span id="__span-101-10"><a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-101-11"><a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-101-12"><a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>
</span><span id="__span-101-13"><a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-101-14"><a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-101-15"><a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-101-16"><a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-101-17"><a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-101-18"><a id="__codelineno-101-18" name="__codelineno-101-18" href="#__codelineno-101-18"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-101-19"><a id="__codelineno-101-19" name="__codelineno-101-19" href="#__codelineno-101-19"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-101-20"><a id="__codelineno-101-20" name="__codelineno-101-20" href="#__codelineno-101-20"></a>        <span class="p">],</span>
</span><span id="__span-101-21"><a id="__codelineno-101-21" name="__codelineno-101-21" href="#__codelineno-101-21"></a>    <span class="p">)</span>
</span><span id="__span-101-22"><a id="__codelineno-101-22" name="__codelineno-101-22" href="#__codelineno-101-22"></a>
</span><span id="__span-101-23"><a id="__codelineno-101-23" name="__codelineno-101-23" href="#__codelineno-101-23"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a><span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a><span class="w">    </span><span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="w">    </span><span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a><span class="p">]</span>
</span></code></pre></div>
<h3 id="env_include_inherit_parent">env_include_inherit_parent<a class="headerlink" href="#env_include_inherit_parent" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование от класса-родителя всех собственных настроек, кроме указанных.
Применяется только при чтении переменных окружения.</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя только префикс:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-103-6"><a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-103-7"><a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-103-8"><a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>        <span class="p">],</span>
</span><span id="__span-103-9"><a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>    <span class="p">)</span>
</span><span id="__span-103-10"><a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>
</span><span id="__span-103-11"><a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a>
</span><span id="__span-103-12"><a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-103-13"><a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-103-14"><a id="__codelineno-103-14" name="__codelineno-103-14" href="#__codelineno-103-14"></a>
</span><span id="__span-103-15"><a id="__codelineno-103-15" name="__codelineno-103-15" href="#__codelineno-103-15"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-103-16"><a id="__codelineno-103-16" name="__codelineno-103-16" href="#__codelineno-103-16"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-103-17"><a id="__codelineno-103-17" name="__codelineno-103-17" href="#__codelineno-103-17"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-103-18"><a id="__codelineno-103-18" name="__codelineno-103-18" href="#__codelineno-103-18"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-103-19"><a id="__codelineno-103-19" name="__codelineno-103-19" href="#__codelineno-103-19"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-103-20"><a id="__codelineno-103-20" name="__codelineno-103-20" href="#__codelineno-103-20"></a>    <span class="p">)</span>
</span><span id="__span-103-21"><a id="__codelineno-103-21" name="__codelineno-103-21" href="#__codelineno-103-21"></a>
</span><span id="__span-103-22"><a id="__codelineno-103-22" name="__codelineno-103-22" href="#__codelineno-103-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-103-23"><a id="__codelineno-103-23" name="__codelineno-103-23" href="#__codelineno-103-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-103-24"><a id="__codelineno-103-24" name="__codelineno-103-24" href="#__codelineno-103-24"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-103-25"><a id="__codelineno-103-25" name="__codelineno-103-25" href="#__codelineno-103-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-103-26"><a id="__codelineno-103-26" name="__codelineno-103-26" href="#__codelineno-103-26"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-103-27"><a id="__codelineno-103-27" name="__codelineno-103-27" href="#__codelineno-103-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-103-28"><a id="__codelineno-103-28" name="__codelineno-103-28" href="#__codelineno-103-28"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-103-29"><a id="__codelineno-103-29" name="__codelineno-103-29" href="#__codelineno-103-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-103-30"><a id="__codelineno-103-30" name="__codelineno-103-30" href="#__codelineno-103-30"></a><span class="c1">#&gt; &quot;__&quot;</span>
</span><span id="__span-103-31"><a id="__codelineno-103-31" name="__codelineno-103-31" href="#__codelineno-103-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-103-32"><a id="__codelineno-103-32" name="__codelineno-103-32" href="#__codelineno-103-32"></a><span class="c1">#&gt; .env</span>
</span><span id="__span-103-33"><a id="__codelineno-103-33" name="__codelineno-103-33" href="#__codelineno-103-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-103-34"><a id="__codelineno-103-34" name="__codelineno-103-34" href="#__codelineno-103-34"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-103-35"><a id="__codelineno-103-35" name="__codelineno-103-35" href="#__codelineno-103-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-103-36"><a id="__codelineno-103-36" name="__codelineno-103-36" href="#__codelineno-103-36"></a><span class="c1">#&gt; None</span>
</span><span id="__span-103-37"><a id="__codelineno-103-37" name="__codelineno-103-37" href="#__codelineno-103-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-103-38"><a id="__codelineno-103-38" name="__codelineno-103-38" href="#__codelineno-103-38"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>env_include_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>env_include_inherit_parent</code>!!! Для этого его нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-104-5"><a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-104-6"><a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-104-7"><a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-104-8"><a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a>        <span class="p">],</span>
</span><span id="__span-104-9"><a id="__codelineno-104-9" name="__codelineno-104-9" href="#__codelineno-104-9"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-104-10"><a id="__codelineno-104-10" name="__codelineno-104-10" href="#__codelineno-104-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-104-11"><a id="__codelineno-104-11" name="__codelineno-104-11" href="#__codelineno-104-11"></a>        <span class="p">],</span>
</span><span id="__span-104-12"><a id="__codelineno-104-12" name="__codelineno-104-12" href="#__codelineno-104-12"></a>    <span class="p">)</span>
</span><span id="__span-104-13"><a id="__codelineno-104-13" name="__codelineno-104-13" href="#__codelineno-104-13"></a>
</span><span id="__span-104-14"><a id="__codelineno-104-14" name="__codelineno-104-14" href="#__codelineno-104-14"></a>
</span><span id="__span-104-15"><a id="__codelineno-104-15" name="__codelineno-104-15" href="#__codelineno-104-15"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-104-16"><a id="__codelineno-104-16" name="__codelineno-104-16" href="#__codelineno-104-16"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-104-17"><a id="__codelineno-104-17" name="__codelineno-104-17" href="#__codelineno-104-17"></a>
</span><span id="__span-104-18"><a id="__codelineno-104-18" name="__codelineno-104-18" href="#__codelineno-104-18"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-104-19"><a id="__codelineno-104-19" name="__codelineno-104-19" href="#__codelineno-104-19"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-104-20"><a id="__codelineno-104-20" name="__codelineno-104-20" href="#__codelineno-104-20"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-104-21"><a id="__codelineno-104-21" name="__codelineno-104-21" href="#__codelineno-104-21"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-104-22"><a id="__codelineno-104-22" name="__codelineno-104-22" href="#__codelineno-104-22"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-104-23"><a id="__codelineno-104-23" name="__codelineno-104-23" href="#__codelineno-104-23"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-104-24"><a id="__codelineno-104-24" name="__codelineno-104-24" href="#__codelineno-104-24"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-104-25"><a id="__codelineno-104-25" name="__codelineno-104-25" href="#__codelineno-104-25"></a>        <span class="p">],</span>
</span><span id="__span-104-26"><a id="__codelineno-104-26" name="__codelineno-104-26" href="#__codelineno-104-26"></a>    <span class="p">)</span>
</span><span id="__span-104-27"><a id="__codelineno-104-27" name="__codelineno-104-27" href="#__codelineno-104-27"></a>
</span><span id="__span-104-28"><a id="__codelineno-104-28" name="__codelineno-104-28" href="#__codelineno-104-28"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-104-29"><a id="__codelineno-104-29" name="__codelineno-104-29" href="#__codelineno-104-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-104-30"><a id="__codelineno-104-30" name="__codelineno-104-30" href="#__codelineno-104-30"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-104-31"><a id="__codelineno-104-31" name="__codelineno-104-31" href="#__codelineno-104-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-104-32"><a id="__codelineno-104-32" name="__codelineno-104-32" href="#__codelineno-104-32"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-104-33"><a id="__codelineno-104-33" name="__codelineno-104-33" href="#__codelineno-104-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-104-34"><a id="__codelineno-104-34" name="__codelineno-104-34" href="#__codelineno-104-34"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-104-35"><a id="__codelineno-104-35" name="__codelineno-104-35" href="#__codelineno-104-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-104-36"><a id="__codelineno-104-36" name="__codelineno-104-36" href="#__codelineno-104-36"></a><span class="c1">#&gt; &quot;__&quot;</span>
</span><span id="__span-104-37"><a id="__codelineno-104-37" name="__codelineno-104-37" href="#__codelineno-104-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-104-38"><a id="__codelineno-104-38" name="__codelineno-104-38" href="#__codelineno-104-38"></a><span class="c1">#&gt; .env</span>
</span><span id="__span-104-39"><a id="__codelineno-104-39" name="__codelineno-104-39" href="#__codelineno-104-39"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-104-40"><a id="__codelineno-104-40" name="__codelineno-104-40" href="#__codelineno-104-40"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-104-41"><a id="__codelineno-104-41" name="__codelineno-104-41" href="#__codelineno-104-41"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-104-42"><a id="__codelineno-104-42" name="__codelineno-104-42" href="#__codelineno-104-42"></a><span class="c1">#&gt; None</span>
</span><span id="__span-104-43"><a id="__codelineno-104-43" name="__codelineno-104-43" href="#__codelineno-104-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-104-44"><a id="__codelineno-104-44" name="__codelineno-104-44" href="#__codelineno-104-44"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<blockquote>
<p><strong>Важно</strong>: Параметр <code>env_exclude_inherit_parent</code> имеет приоритет над <code>env_include_inherit_parent</code> и тоже наследуется! Если какой-либо параметр указан и там и там, то этот параметр НЕ будет включен в список наследуемых:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a>
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3" href="#__codelineno-105-3"></a>
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4" href="#__codelineno-105-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5" href="#__codelineno-105-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-105-6"><a id="__codelineno-105-6" name="__codelineno-105-6" href="#__codelineno-105-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-105-7"><a id="__codelineno-105-7" name="__codelineno-105-7" href="#__codelineno-105-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-105-8"><a id="__codelineno-105-8" name="__codelineno-105-8" href="#__codelineno-105-8"></a>        <span class="p">],</span>
</span><span id="__span-105-9"><a id="__codelineno-105-9" name="__codelineno-105-9" href="#__codelineno-105-9"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-105-10"><a id="__codelineno-105-10" name="__codelineno-105-10" href="#__codelineno-105-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-105-11"><a id="__codelineno-105-11" name="__codelineno-105-11" href="#__codelineno-105-11"></a>        <span class="p">],</span>
</span><span id="__span-105-12"><a id="__codelineno-105-12" name="__codelineno-105-12" href="#__codelineno-105-12"></a>    <span class="p">)</span>
</span><span id="__span-105-13"><a id="__codelineno-105-13" name="__codelineno-105-13" href="#__codelineno-105-13"></a>
</span><span id="__span-105-14"><a id="__codelineno-105-14" name="__codelineno-105-14" href="#__codelineno-105-14"></a>
</span><span id="__span-105-15"><a id="__codelineno-105-15" name="__codelineno-105-15" href="#__codelineno-105-15"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-105-16"><a id="__codelineno-105-16" name="__codelineno-105-16" href="#__codelineno-105-16"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-105-17"><a id="__codelineno-105-17" name="__codelineno-105-17" href="#__codelineno-105-17"></a>
</span><span id="__span-105-18"><a id="__codelineno-105-18" name="__codelineno-105-18" href="#__codelineno-105-18"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-105-19"><a id="__codelineno-105-19" name="__codelineno-105-19" href="#__codelineno-105-19"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-105-20"><a id="__codelineno-105-20" name="__codelineno-105-20" href="#__codelineno-105-20"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-105-21"><a id="__codelineno-105-21" name="__codelineno-105-21" href="#__codelineno-105-21"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-105-22"><a id="__codelineno-105-22" name="__codelineno-105-22" href="#__codelineno-105-22"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-105-23"><a id="__codelineno-105-23" name="__codelineno-105-23" href="#__codelineno-105-23"></a>        <span class="p">],</span>
</span><span id="__span-105-24"><a id="__codelineno-105-24" name="__codelineno-105-24" href="#__codelineno-105-24"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-105-25"><a id="__codelineno-105-25" name="__codelineno-105-25" href="#__codelineno-105-25"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-105-26"><a id="__codelineno-105-26" name="__codelineno-105-26" href="#__codelineno-105-26"></a>        <span class="p">],</span>
</span><span id="__span-105-27"><a id="__codelineno-105-27" name="__codelineno-105-27" href="#__codelineno-105-27"></a>    <span class="p">)</span>
</span><span id="__span-105-28"><a id="__codelineno-105-28" name="__codelineno-105-28" href="#__codelineno-105-28"></a>
</span><span id="__span-105-29"><a id="__codelineno-105-29" name="__codelineno-105-29" href="#__codelineno-105-29"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-105-30"><a id="__codelineno-105-30" name="__codelineno-105-30" href="#__codelineno-105-30"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-105-31"><a id="__codelineno-105-31" name="__codelineno-105-31" href="#__codelineno-105-31"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-105-32"><a id="__codelineno-105-32" name="__codelineno-105-32" href="#__codelineno-105-32"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-105-33"><a id="__codelineno-105-33" name="__codelineno-105-33" href="#__codelineno-105-33"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-105-34"><a id="__codelineno-105-34" name="__codelineno-105-34" href="#__codelineno-105-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-105-35"><a id="__codelineno-105-35" name="__codelineno-105-35" href="#__codelineno-105-35"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-105-36"><a id="__codelineno-105-36" name="__codelineno-105-36" href="#__codelineno-105-36"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-105-37"><a id="__codelineno-105-37" name="__codelineno-105-37" href="#__codelineno-105-37"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<p>Чтоб отключить такое поведение и добиться того же результата, что и в примере выше, нужно сделать следующее:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-106-6"><a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-106-7"><a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-106-8"><a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>        <span class="p">],</span>
</span><span id="__span-106-9"><a id="__codelineno-106-9" name="__codelineno-106-9" href="#__codelineno-106-9"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-106-10"><a id="__codelineno-106-10" name="__codelineno-106-10" href="#__codelineno-106-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-106-11"><a id="__codelineno-106-11" name="__codelineno-106-11" href="#__codelineno-106-11"></a>            <span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>   <span class="c1"># (1)!</span>
</span><span id="__span-106-12"><a id="__codelineno-106-12" name="__codelineno-106-12" href="#__codelineno-106-12"></a>        <span class="p">],</span>
</span><span id="__span-106-13"><a id="__codelineno-106-13" name="__codelineno-106-13" href="#__codelineno-106-13"></a>    <span class="p">)</span>
</span><span id="__span-106-14"><a id="__codelineno-106-14" name="__codelineno-106-14" href="#__codelineno-106-14"></a>
</span><span id="__span-106-15"><a id="__codelineno-106-15" name="__codelineno-106-15" href="#__codelineno-106-15"></a>
</span><span id="__span-106-16"><a id="__codelineno-106-16" name="__codelineno-106-16" href="#__codelineno-106-16"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-106-17"><a id="__codelineno-106-17" name="__codelineno-106-17" href="#__codelineno-106-17"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-106-18"><a id="__codelineno-106-18" name="__codelineno-106-18" href="#__codelineno-106-18"></a>
</span><span id="__span-106-19"><a id="__codelineno-106-19" name="__codelineno-106-19" href="#__codelineno-106-19"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-106-20"><a id="__codelineno-106-20" name="__codelineno-106-20" href="#__codelineno-106-20"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-106-21"><a id="__codelineno-106-21" name="__codelineno-106-21" href="#__codelineno-106-21"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-106-22"><a id="__codelineno-106-22" name="__codelineno-106-22" href="#__codelineno-106-22"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-106-23"><a id="__codelineno-106-23" name="__codelineno-106-23" href="#__codelineno-106-23"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-106-24"><a id="__codelineno-106-24" name="__codelineno-106-24" href="#__codelineno-106-24"></a>        <span class="p">],</span>
</span><span id="__span-106-25"><a id="__codelineno-106-25" name="__codelineno-106-25" href="#__codelineno-106-25"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-106-26"><a id="__codelineno-106-26" name="__codelineno-106-26" href="#__codelineno-106-26"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-106-27"><a id="__codelineno-106-27" name="__codelineno-106-27" href="#__codelineno-106-27"></a>        <span class="p">],</span>
</span><span id="__span-106-28"><a id="__codelineno-106-28" name="__codelineno-106-28" href="#__codelineno-106-28"></a>    <span class="p">)</span>
</span><span id="__span-106-29"><a id="__codelineno-106-29" name="__codelineno-106-29" href="#__codelineno-106-29"></a>
</span><span id="__span-106-30"><a id="__codelineno-106-30" name="__codelineno-106-30" href="#__codelineno-106-30"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-106-31"><a id="__codelineno-106-31" name="__codelineno-106-31" href="#__codelineno-106-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-106-32"><a id="__codelineno-106-32" name="__codelineno-106-32" href="#__codelineno-106-32"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-106-33"><a id="__codelineno-106-33" name="__codelineno-106-33" href="#__codelineno-106-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-106-34"><a id="__codelineno-106-34" name="__codelineno-106-34" href="#__codelineno-106-34"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-106-35"><a id="__codelineno-106-35" name="__codelineno-106-35" href="#__codelineno-106-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-106-36"><a id="__codelineno-106-36" name="__codelineno-106-36" href="#__codelineno-106-36"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-106-37"><a id="__codelineno-106-37" name="__codelineno-106-37" href="#__codelineno-106-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-106-38"><a id="__codelineno-106-38" name="__codelineno-106-38" href="#__codelineno-106-38"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<ol>
<li>Исключаем из наследования <code>env_exclude_inherit_parent</code> параметр.</li>
</ol>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a><span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3" href="#__codelineno-107-3"></a><span class="w">    </span><span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-107-4"><a id="__codelineno-107-4" name="__codelineno-107-4" href="#__codelineno-107-4"></a><span class="p">]</span>
</span><span id="__span-107-5"><a id="__codelineno-107-5" name="__codelineno-107-5" href="#__codelineno-107-5"></a><span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-107-6"><a id="__codelineno-107-6" name="__codelineno-107-6" href="#__codelineno-107-6"></a><span class="w">    </span><span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-107-7"><a id="__codelineno-107-7" name="__codelineno-107-7" href="#__codelineno-107-7"></a><span class="p">]</span>
</span></code></pre></div>
<h2 id="model_config">model_config<a class="headerlink" href="#model_config" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">SettingsConfigDict</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">SettingsConfigSchema</span><span class="p">()</span><span class="o">.</span><span class="n">config_model_dict</span><span class="p">()</span></code></p>
<p><strong>Общая информация</strong>:</p>
<p>Содержит все стандартные настройки <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">ConfigDict</span></code>, такие как <code>extra</code>, <code>arbitrary_types_allowed</code> и т.д. Поддерживает все настройки, входящие в <code>file_config</code> и <code>env_config</code>. А так же имеет дополнительные собственные настройки, относящиеся к <code>arfi-settings</code>.</p>
<p><strong>Что делает</strong>:</p>
<p>Единое пространство для описания всех настроек модели.</p>
<blockquote>
<p><strong>Важно</strong>: Настройки, указанные в <code>file_config</code> и <code>env_config</code> будут переопределять те же настройки, указанные в <code>model_config</code>.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-108-5"><a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-108-6"><a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="s2">&quot;settings/config&quot;</span><span class="p">,</span>
</span><span id="__span-108-7"><a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a>        <span class="n">env_file</span> <span class="o">=</span> <span class="s2">&quot;.env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-108-8"><a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a>    <span class="p">)</span>
</span><span id="__span-108-9"><a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a>
</span><span id="__span-108-10"><a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a>
</span><span id="__span-108-11"><a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-108-12"><a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-108-13"><a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a><span class="c1">#&gt; [PosixPath(&#39;settings/config/config&#39;)]</span>
</span></code></pre></div>
<h3 id="case_sensitive">case_sensitive<a class="headerlink" href="#case_sensitive" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>Задает значение для <a href="#conf_case_sensitive">conf_case_sensitive</a>, если сама переменная <code>conf_case_sensitive</code> не задана ни в <a href="#file_config">file_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Задает значение для <a href="#env_case_sensitive">env_case_sensitive</a>, если сама переменная <code>env_case_sensitive</code> не задана ни в <a href="#env_config">env_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Определяет регистрозависимый или регистронезависимый режим чтения имён файлов из секретной директории <a href="#secrets_dir">secrets_dir</a>.</li>
<li>Влияет на передачу переменных обработчиком от класса-родителя к классу-ребёнку в концепции обратного наследования. Так как на данный момент классу-ребёнку не известно откуда именно класс-родитель прочитал конкретную переменную (из файлов, из переменных окружения или из секретной директории), то настройки регистронезависимости, заданные в классе-ребёнке, не могут быть применены по отдельности к именам конкретных переменных, по этому при передаче переменных от одного обработчика к другому в данный момент применяется значение, указанное в общей переменной <code>case_sensitive</code>.
После доработки режима отладки возможно такое поведение изменится, и, при множественной вложенности моделей, при передаче переменных между обработчиками будут применяться точные настройки регистронезависимости, которые указаны в конкретном классе, к каждой переменной.</li>
</ol>
<blockquote>
<p><strong>Заметка</strong>: Значение, указанное в переменных <code>conf_case_sensitive</code> и <code>env_case_sensitive</code> всегда имеет приоритет над значение, указанным в переменной <code>case_sensitive</code>.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a>
</span><span id="__span-109-3"><a id="__codelineno-109-3" name="__codelineno-109-3" href="#__codelineno-109-3"></a>
</span><span id="__span-109-4"><a id="__codelineno-109-4" name="__codelineno-109-4" href="#__codelineno-109-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-109-5"><a id="__codelineno-109-5" name="__codelineno-109-5" href="#__codelineno-109-5"></a>    <span class="k">pass</span>
</span><span id="__span-109-6"><a id="__codelineno-109-6" name="__codelineno-109-6" href="#__codelineno-109-6"></a>
</span><span id="__span-109-7"><a id="__codelineno-109-7" name="__codelineno-109-7" href="#__codelineno-109-7"></a>
</span><span id="__span-109-8"><a id="__codelineno-109-8" name="__codelineno-109-8" href="#__codelineno-109-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-109-9"><a id="__codelineno-109-9" name="__codelineno-109-9" href="#__codelineno-109-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">)</span>
</span><span id="__span-109-10"><a id="__codelineno-109-10" name="__codelineno-109-10" href="#__codelineno-109-10"></a><span class="c1">#&gt; False</span>
</span><span id="__span-109-11"><a id="__codelineno-109-11" name="__codelineno-109-11" href="#__codelineno-109-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_case_sensitive</span><span class="p">)</span>
</span><span id="__span-109-12"><a id="__codelineno-109-12" name="__codelineno-109-12" href="#__codelineno-109-12"></a><span class="c1">#&gt; False</span>
</span><span id="__span-109-13"><a id="__codelineno-109-13" name="__codelineno-109-13" href="#__codelineno-109-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_case_sensitive</span><span class="p">)</span>
</span><span id="__span-109-14"><a id="__codelineno-109-14" name="__codelineno-109-14" href="#__codelineno-109-14"></a><span class="c1">#&gt; False</span>
</span><span id="__span-109-15"><a id="__codelineno-109-15" name="__codelineno-109-15" href="#__codelineno-109-15"></a>
</span><span id="__span-109-16"><a id="__codelineno-109-16" name="__codelineno-109-16" href="#__codelineno-109-16"></a>
</span><span id="__span-109-17"><a id="__codelineno-109-17" name="__codelineno-109-17" href="#__codelineno-109-17"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-109-18"><a id="__codelineno-109-18" name="__codelineno-109-18" href="#__codelineno-109-18"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-109-19"><a id="__codelineno-109-19" name="__codelineno-109-19" href="#__codelineno-109-19"></a>        <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-109-20"><a id="__codelineno-109-20" name="__codelineno-109-20" href="#__codelineno-109-20"></a>    <span class="p">)</span>
</span><span id="__span-109-21"><a id="__codelineno-109-21" name="__codelineno-109-21" href="#__codelineno-109-21"></a>
</span><span id="__span-109-22"><a id="__codelineno-109-22" name="__codelineno-109-22" href="#__codelineno-109-22"></a>
</span><span id="__span-109-23"><a id="__codelineno-109-23" name="__codelineno-109-23" href="#__codelineno-109-23"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-109-24"><a id="__codelineno-109-24" name="__codelineno-109-24" href="#__codelineno-109-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">)</span>
</span><span id="__span-109-25"><a id="__codelineno-109-25" name="__codelineno-109-25" href="#__codelineno-109-25"></a><span class="c1">#&gt; True</span>
</span><span id="__span-109-26"><a id="__codelineno-109-26" name="__codelineno-109-26" href="#__codelineno-109-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_case_sensitive</span><span class="p">)</span>
</span><span id="__span-109-27"><a id="__codelineno-109-27" name="__codelineno-109-27" href="#__codelineno-109-27"></a><span class="c1">#&gt; True</span>
</span><span id="__span-109-28"><a id="__codelineno-109-28" name="__codelineno-109-28" href="#__codelineno-109-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_case_sensitive</span><span class="p">)</span>
</span><span id="__span-109-29"><a id="__codelineno-109-29" name="__codelineno-109-29" href="#__codelineno-109-29"></a><span class="c1">#&gt; True</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a><span class="n">case_sensitive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="ignore_missing">ignore_missing<a class="headerlink" href="#ignore_missing" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>Задает значение для <a href="#conf_ignore_missing">conf_ignore_missing</a>, если сама переменная <code>conf_ignore_missing</code> не задана ни в <a href="#file_config">file_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Задает значение для <a href="#env_ignore_missing">env_ignore_missing</a>, если сама переменная <code>env_ignore_missing</code> не задана ни в <a href="#env_config">env_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Определяет игнорировать или нет отсутствие файлов в секретной директории <a href="#secrets_dir">secrets_dir</a>.</li>
</ol>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a>
</span><span id="__span-111-3"><a id="__codelineno-111-3" name="__codelineno-111-3" href="#__codelineno-111-3"></a>
</span><span id="__span-111-4"><a id="__codelineno-111-4" name="__codelineno-111-4" href="#__codelineno-111-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-111-5"><a id="__codelineno-111-5" name="__codelineno-111-5" href="#__codelineno-111-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-111-6"><a id="__codelineno-111-6" name="__codelineno-111-6" href="#__codelineno-111-6"></a>        <span class="n">ignore_missing</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-111-7"><a id="__codelineno-111-7" name="__codelineno-111-7" href="#__codelineno-111-7"></a>    <span class="p">)</span>
</span><span id="__span-111-8"><a id="__codelineno-111-8" name="__codelineno-111-8" href="#__codelineno-111-8"></a>
</span><span id="__span-111-9"><a id="__codelineno-111-9" name="__codelineno-111-9" href="#__codelineno-111-9"></a>
</span><span id="__span-111-10"><a id="__codelineno-111-10" name="__codelineno-111-10" href="#__codelineno-111-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-111-11"><a id="__codelineno-111-11" name="__codelineno-111-11" href="#__codelineno-111-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">ignore_missing</span><span class="p">)</span>  <span class="c1"># default True</span>
</span><span id="__span-111-12"><a id="__codelineno-111-12" name="__codelineno-111-12" href="#__codelineno-111-12"></a><span class="c1">#&gt; False</span>
</span><span id="__span-111-13"><a id="__codelineno-111-13" name="__codelineno-111-13" href="#__codelineno-111-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ignore_missing</span><span class="p">)</span>  <span class="c1"># default True</span>
</span><span id="__span-111-14"><a id="__codelineno-111-14" name="__codelineno-111-14" href="#__codelineno-111-14"></a><span class="c1">#&gt; False</span>
</span><span id="__span-111-15"><a id="__codelineno-111-15" name="__codelineno-111-15" href="#__codelineno-111-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_ignore_missing</span><span class="p">)</span>  <span class="c1"># default True</span>
</span><span id="__span-111-16"><a id="__codelineno-111-16" name="__codelineno-111-16" href="#__codelineno-111-16"></a><span class="c1">#&gt; False</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-112-2"><a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a><span class="n">ignore_missing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h3 id="encoding">encoding<a class="headerlink" href="#encoding" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span>  <span class="c1"># utf-8</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>Задает значение для <a href="#conf_file_encoding">conf_file_encoding</a>, если сама переменная <code>conf_file_encoding</code> не задана ни в <a href="#file_config">file_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Задает значение для <a href="#env_file_encoding">env_file_encoding</a>, если сама переменная <code>env_file_encoding</code> не задана ни в <a href="#env_config">env_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Определяет кодировку при чтении файлов из секретной директории <a href="#secrets_dir">secrets_dir</a>.</li>
</ol>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a>
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3" href="#__codelineno-113-3"></a>
</span><span id="__span-113-4"><a id="__codelineno-113-4" name="__codelineno-113-4" href="#__codelineno-113-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-113-5"><a id="__codelineno-113-5" name="__codelineno-113-5" href="#__codelineno-113-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-113-6"><a id="__codelineno-113-6" name="__codelineno-113-6" href="#__codelineno-113-6"></a>        <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">,</span>
</span><span id="__span-113-7"><a id="__codelineno-113-7" name="__codelineno-113-7" href="#__codelineno-113-7"></a>    <span class="p">)</span>
</span><span id="__span-113-8"><a id="__codelineno-113-8" name="__codelineno-113-8" href="#__codelineno-113-8"></a>
</span><span id="__span-113-9"><a id="__codelineno-113-9" name="__codelineno-113-9" href="#__codelineno-113-9"></a>
</span><span id="__span-113-10"><a id="__codelineno-113-10" name="__codelineno-113-10" href="#__codelineno-113-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-113-11"><a id="__codelineno-113-11" name="__codelineno-113-11" href="#__codelineno-113-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>  <span class="c1"># default None</span>
</span><span id="__span-113-12"><a id="__codelineno-113-12" name="__codelineno-113-12" href="#__codelineno-113-12"></a><span class="c1">#&gt; ISO-8859-1</span>
</span><span id="__span-113-13"><a id="__codelineno-113-13" name="__codelineno-113-13" href="#__codelineno-113-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>  <span class="c1"># default None</span>
</span><span id="__span-113-14"><a id="__codelineno-113-14" name="__codelineno-113-14" href="#__codelineno-113-14"></a><span class="c1">#&gt; ISO-8859-1</span>
</span><span id="__span-113-15"><a id="__codelineno-113-15" name="__codelineno-113-15" href="#__codelineno-113-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>  <span class="c1"># default None</span>
</span><span id="__span-113-16"><a id="__codelineno-113-16" name="__codelineno-113-16" href="#__codelineno-113-16"></a><span class="c1">#&gt; ISO-8859-1</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-114-2"><a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a><span class="n">encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;utf-8&quot;</span>
</span></code></pre></div>
<h3 id="cli">cli<a class="headerlink" href="#cli" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Разрешает или запрещает чтение переменных из командной строки. Так как в большинстве случаев чтение переменных из командной строки не требуется, то по умолчание чтение отключено. При обратном наследовании НЕ наследуется, нужно включать для каждого класса отдельно, либо для всех классов сразу в файле <code>pyproject.toml</code>.</p>
<p>Более подробно о работе с переменными из командной строки написано <a href="../cli/">здесь</a>.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-115-2"><a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a>
</span><span id="__span-115-3"><a id="__codelineno-115-3" name="__codelineno-115-3" href="#__codelineno-115-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-115-4"><a id="__codelineno-115-4" name="__codelineno-115-4" href="#__codelineno-115-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-115-5"><a id="__codelineno-115-5" name="__codelineno-115-5" href="#__codelineno-115-5"></a>        <span class="n">cli</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-115-6"><a id="__codelineno-115-6" name="__codelineno-115-6" href="#__codelineno-115-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a><span class="n">cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">            </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Включаем чтение переменных их командной строки для всех классов</li>
</ol>
<h3 id="secrets_dir">secrets_dir<a class="headerlink" href="#secrets_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Задаёт секретную директорию, откуда будут читаться значения для каждого атрибута класса. При этом имена файлов в этой директории должны соответствовать алиасам полей текущей модели. Зависимость от регистра при чтении имён файлов задаётся параметром <a href="#case_sensitive">case_sensitive</a></p>
<p>При обратном наследовании НЕ наследуется, нужно указывать для каждого класса отдельно, либо для всех классов сразу в файле <code>pyproject.toml</code>.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a>
</span><span id="__span-117-3"><a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-117-4"><a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-117-5"><a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a>        <span class="n">secrets_dir</span> <span class="o">=</span> <span class="s2">&quot;/var/run/secrets&quot;</span><span class="p">,</span>
</span><span id="__span-117-6"><a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a><span class="n">secrets_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/var/run/secrets&quot;</span>
</span></code></pre></div>
<h3 id="exclude_inherit_parent">exclude_inherit_parent<a class="headerlink" href="#exclude_inherit_parent" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Общее место для указания настроек, которые нужно исключить из обратного наследования. Поддерживает все значения которые входят в <a href="#conf_exclude_inherit_parent">conf_exclude_inherit_parent</a> и <a href="#env_exclude_inherit_parent">env_exclude_inherit_parent</a>.
При добавлении параметра в <code>exclude_inherit_parent</code>, он автоматически добавляется либо в <code>env_exclude_inherit_parent</code> либо в <code>conf_exclude_inherit_parent</code> в зависимости от того, к каким настройкам этот параметр относится.</p>
<p>При обратном наследовании НЕ наследуется.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-119-2"><a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a>
</span><span id="__span-119-3"><a id="__codelineno-119-3" name="__codelineno-119-3" href="#__codelineno-119-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-119-4"><a id="__codelineno-119-4" name="__codelineno-119-4" href="#__codelineno-119-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-119-5"><a id="__codelineno-119-5" name="__codelineno-119-5" href="#__codelineno-119-5"></a>        <span class="n">exclude_inherit_parent</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-119-6"><a id="__codelineno-119-6" name="__codelineno-119-6" href="#__codelineno-119-6"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-119-7"><a id="__codelineno-119-7" name="__codelineno-119-7" href="#__codelineno-119-7"></a>            <span class="s2">&quot;conf_custom_ext_handler&quot;</span><span class="p">,</span>
</span><span id="__span-119-8"><a id="__codelineno-119-8" name="__codelineno-119-8" href="#__codelineno-119-8"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-119-9"><a id="__codelineno-119-9" name="__codelineno-119-9" href="#__codelineno-119-9"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-119-10"><a id="__codelineno-119-10" name="__codelineno-119-10" href="#__codelineno-119-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-119-11"><a id="__codelineno-119-11" name="__codelineno-119-11" href="#__codelineno-119-11"></a>        <span class="p">],</span>
</span><span id="__span-119-12"><a id="__codelineno-119-12" name="__codelineno-119-12" href="#__codelineno-119-12"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a><span class="n">exclude_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;env_prefix_as_source_mode_dir&quot;</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="include_inherit_parent">include_inherit_parent<a class="headerlink" href="#include_inherit_parent" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Общее место для указания только тех настроек, которые нужно наследовать от класса-родителя в концепции обратного наследования.
Поддерживает все значения которые входят в <a href="#conf_include_inherit_parent">conf_include_inherit_parent</a> и <a href="#env_include_inherit_parent">env_include_inherit_parent</a>.</p>
<p>При добавлении параметра в <code>include_inherit_parent</code>, он автоматически добавляется либо в <code>env_include_inherit_parent</code> либо в <code>conf_include_inherit_parent</code> в зависимости от того, к каким настройкам этот параметр относится.</p>
<p>При обратном наследовании НЕ наследуется.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a>
</span><span id="__span-121-3"><a id="__codelineno-121-3" name="__codelineno-121-3" href="#__codelineno-121-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-121-4"><a id="__codelineno-121-4" name="__codelineno-121-4" href="#__codelineno-121-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-121-5"><a id="__codelineno-121-5" name="__codelineno-121-5" href="#__codelineno-121-5"></a>        <span class="n">include_inherit_parent</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-121-6"><a id="__codelineno-121-6" name="__codelineno-121-6" href="#__codelineno-121-6"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-121-7"><a id="__codelineno-121-7" name="__codelineno-121-7" href="#__codelineno-121-7"></a>            <span class="s2">&quot;conf_custom_ext_handler&quot;</span><span class="p">,</span>
</span><span id="__span-121-8"><a id="__codelineno-121-8" name="__codelineno-121-8" href="#__codelineno-121-8"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-121-9"><a id="__codelineno-121-9" name="__codelineno-121-9" href="#__codelineno-121-9"></a>            <span class="s2">&quot;env_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-121-10"><a id="__codelineno-121-10" name="__codelineno-121-10" href="#__codelineno-121-10"></a>        <span class="p">],</span>
</span><span id="__span-121-11"><a id="__codelineno-121-11" name="__codelineno-121-11" href="#__codelineno-121-11"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-122-2"><a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a><span class="n">include_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-122-3"><a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a><span class="w">  </span><span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-122-4"><a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a><span class="w">  </span><span class="s2">&quot;conf_dir&quot;</span><span class="p">,</span>
</span><span id="__span-122-5"><a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a><span class="w">  </span><span class="s2">&quot;conf_file&quot;</span>
</span><span id="__span-122-6"><a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a><span class="p">]</span>
</span></code></pre></div>
<h2 id="file_config_inherit_parent">file_config_inherit_parent<a class="headerlink" href="#file_config_inherit_parent" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование всех параметров, относящихся к чтению из файлов конфигураций.
При отключении наследования все значения параметров устанавливаются по умолчанию, либо в значения, указанные в файле <code>pyproject.toml</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-123-2"><a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>
</span><span id="__span-123-3"><a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>
</span><span id="__span-123-4"><a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-123-5"><a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a>    <span class="n">file_config_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-123-6"><a id="__codelineno-123-6" name="__codelineno-123-6" href="#__codelineno-123-6"></a>
</span><span id="__span-123-7"><a id="__codelineno-123-7" name="__codelineno-123-7" href="#__codelineno-123-7"></a>
</span><span id="__span-123-8"><a id="__codelineno-123-8" name="__codelineno-123-8" href="#__codelineno-123-8"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-123-9"><a id="__codelineno-123-9" name="__codelineno-123-9" href="#__codelineno-123-9"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-123-10"><a id="__codelineno-123-10" name="__codelineno-123-10" href="#__codelineno-123-10"></a>
</span><span id="__span-123-11"><a id="__codelineno-123-11" name="__codelineno-123-11" href="#__codelineno-123-11"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-123-12"><a id="__codelineno-123-12" name="__codelineno-123-12" href="#__codelineno-123-12"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-123-13"><a id="__codelineno-123-13" name="__codelineno-123-13" href="#__codelineno-123-13"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="s2">&quot;myconfig.json&quot;</span><span class="p">,</span>
</span><span id="__span-123-14"><a id="__codelineno-123-14" name="__codelineno-123-14" href="#__codelineno-123-14"></a>    <span class="p">)</span>
</span><span id="__span-123-15"><a id="__codelineno-123-15" name="__codelineno-123-15" href="#__codelineno-123-15"></a>
</span><span id="__span-123-16"><a id="__codelineno-123-16" name="__codelineno-123-16" href="#__codelineno-123-16"></a>
</span><span id="__span-123-17"><a id="__codelineno-123-17" name="__codelineno-123-17" href="#__codelineno-123-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-123-18"><a id="__codelineno-123-18" name="__codelineno-123-18" href="#__codelineno-123-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-123-19"><a id="__codelineno-123-19" name="__codelineno-123-19" href="#__codelineno-123-19"></a><span class="c1">#&gt; [PosixPath(&#39;myconfig.json&#39;)]</span>
</span><span id="__span-123-20"><a id="__codelineno-123-20" name="__codelineno-123-20" href="#__codelineno-123-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-123-21"><a id="__codelineno-123-21" name="__codelineno-123-21" href="#__codelineno-123-21"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-124-2"><a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a><span class="n">file_config_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="env_config_inherit_parent">env_config_inherit_parent<a class="headerlink" href="#env_config_inherit_parent" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование всех параметров, относящихся к чтению из переменных окружения.
При отключении наследования все значения параметров устанавливаются по умолчанию, либо в значения, указанные в файле <code>pyproject.toml</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-125-2"><a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
</span><span id="__span-125-3"><a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>
</span><span id="__span-125-4"><a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-125-5"><a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a>    <span class="n">env_config_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-125-6"><a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a>
</span><span id="__span-125-7"><a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a>
</span><span id="__span-125-8"><a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-125-9"><a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-125-10"><a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a>
</span><span id="__span-125-11"><a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-125-12"><a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a>        <span class="n">env_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-125-13"><a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-125-14"><a id="__codelineno-125-14" name="__codelineno-125-14" href="#__codelineno-125-14"></a>    <span class="p">)</span>
</span><span id="__span-125-15"><a id="__codelineno-125-15" name="__codelineno-125-15" href="#__codelineno-125-15"></a>
</span><span id="__span-125-16"><a id="__codelineno-125-16" name="__codelineno-125-16" href="#__codelineno-125-16"></a>
</span><span id="__span-125-17"><a id="__codelineno-125-17" name="__codelineno-125-17" href="#__codelineno-125-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-125-18"><a id="__codelineno-125-18" name="__codelineno-125-18" href="#__codelineno-125-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">env_path</span><span class="p">)</span>
</span><span id="__span-125-19"><a id="__codelineno-125-19" name="__codelineno-125-19" href="#__codelineno-125-19"></a><span class="c1">#&gt; []</span>
</span><span id="__span-125-20"><a id="__codelineno-125-20" name="__codelineno-125-20" href="#__codelineno-125-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-125-21"><a id="__codelineno-125-21" name="__codelineno-125-21" href="#__codelineno-125-21"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-125-22"><a id="__codelineno-125-22" name="__codelineno-125-22" href="#__codelineno-125-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">env_path</span><span class="p">)</span>
</span><span id="__span-125-23"><a id="__codelineno-125-23" name="__codelineno-125-23" href="#__codelineno-125-23"></a><span class="c1">#&gt; [PosixPath(&#39;.env&#39;)]</span>
</span><span id="__span-125-24"><a id="__codelineno-125-24" name="__codelineno-125-24" href="#__codelineno-125-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-125-25"><a id="__codelineno-125-25" name="__codelineno-125-25" href="#__codelineno-125-25"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-126-2"><a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a><span class="n">env_config_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="ordered_settings">ordered_settings<a class="headerlink" href="#ordered_settings" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[</span><span class="s2">&quot;cli&quot;</span><span class="p">,</span> <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span> <span class="s2">&quot;env&quot;</span><span class="p">,</span> <span class="s2">&quot;env_file&quot;</span><span class="p">,</span> <span class="s2">&quot;secrets&quot;</span><span class="p">,</span> <span class="s2">&quot;conf_file&quot;</span><span class="p">]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает порядок источников чтения настроек. Первый источник в списке наиболее приоритетный.
На самом деле в этом списке указываются имена обработчиков. Можно указать как короткое имя, как указано в значении по умолчанию, так и полное. Например:
<div class="language-py highlight"><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="p">[</span>
</span><span id="__span-127-2"><a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>  <span class="s2">&quot;cli_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-127-3"><a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a>  <span class="s2">&quot;init_kwargs_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-127-4"><a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a>  <span class="s2">&quot;env_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-127-5"><a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a>  <span class="s2">&quot;env_file_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-127-6"><a id="__codelineno-127-6" name="__codelineno-127-6" href="#__codelineno-127-6"></a>  <span class="s2">&quot;secrets_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-127-7"><a id="__codelineno-127-7" name="__codelineno-127-7" href="#__codelineno-127-7"></a>  <span class="s2">&quot;conf_file_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-127-8"><a id="__codelineno-127-8" name="__codelineno-127-8" href="#__codelineno-127-8"></a><span class="p">]</span>
</span></code></pre></div>
Можно удалять, менять местами и добавлять собственные обработчики просто изменяя список.</p>
<p>Как создавать собственные обработчики написано <a href="../handlers/">здесь</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-128-2"><a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>
</span><span id="__span-128-3"><a id="__codelineno-128-3" name="__codelineno-128-3" href="#__codelineno-128-3"></a>
</span><span id="__span-128-4"><a id="__codelineno-128-4" name="__codelineno-128-4" href="#__codelineno-128-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-128-5"><a id="__codelineno-128-5" name="__codelineno-128-5" href="#__codelineno-128-5"></a>    <span class="n">ordered_settings</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-128-6"><a id="__codelineno-128-6" name="__codelineno-128-6" href="#__codelineno-128-6"></a>      <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-128-7"><a id="__codelineno-128-7" name="__codelineno-128-7" href="#__codelineno-128-7"></a>      <span class="s2">&quot;conf_file&quot;</span>
</span><span id="__span-128-8"><a id="__codelineno-128-8" name="__codelineno-128-8" href="#__codelineno-128-8"></a>    <span class="p">]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a><span class="n">ordered_settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a><span class="w">  </span><span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-129-4"><a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a><span class="w">  </span><span class="s2">&quot;conf_file&quot;</span>
</span><span id="__span-129-5"><a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a><span class="p">]</span>
</span></code></pre></div>
<h2 id="ordered_settings_inherit_parent">ordered_settings_inherit_parent<a class="headerlink" href="#ordered_settings_inherit_parent" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование источников чтения настроек.
При отключении наследования значение параметра устанавливается по умолчанию, либо в значения, указанные в файле <code>pyproject.toml</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-130-2"><a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a>
</span><span id="__span-130-3"><a id="__codelineno-130-3" name="__codelineno-130-3" href="#__codelineno-130-3"></a>
</span><span id="__span-130-4"><a id="__codelineno-130-4" name="__codelineno-130-4" href="#__codelineno-130-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-130-5"><a id="__codelineno-130-5" name="__codelineno-130-5" href="#__codelineno-130-5"></a>    <span class="n">ordered_settings_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-130-6"><a id="__codelineno-130-6" name="__codelineno-130-6" href="#__codelineno-130-6"></a>
</span><span id="__span-130-7"><a id="__codelineno-130-7" name="__codelineno-130-7" href="#__codelineno-130-7"></a>
</span><span id="__span-130-8"><a id="__codelineno-130-8" name="__codelineno-130-8" href="#__codelineno-130-8"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-130-9"><a id="__codelineno-130-9" name="__codelineno-130-9" href="#__codelineno-130-9"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-130-10"><a id="__codelineno-130-10" name="__codelineno-130-10" href="#__codelineno-130-10"></a>
</span><span id="__span-130-11"><a id="__codelineno-130-11" name="__codelineno-130-11" href="#__codelineno-130-11"></a>    <span class="n">ordered_settings</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-130-12"><a id="__codelineno-130-12" name="__codelineno-130-12" href="#__codelineno-130-12"></a>        <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-130-13"><a id="__codelineno-130-13" name="__codelineno-130-13" href="#__codelineno-130-13"></a>        <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-130-14"><a id="__codelineno-130-14" name="__codelineno-130-14" href="#__codelineno-130-14"></a>    <span class="p">]</span>
</span><span id="__span-130-15"><a id="__codelineno-130-15" name="__codelineno-130-15" href="#__codelineno-130-15"></a>
</span><span id="__span-130-16"><a id="__codelineno-130-16" name="__codelineno-130-16" href="#__codelineno-130-16"></a>
</span><span id="__span-130-17"><a id="__codelineno-130-17" name="__codelineno-130-17" href="#__codelineno-130-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-130-18"><a id="__codelineno-130-18" name="__codelineno-130-18" href="#__codelineno-130-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">ordered_settings</span><span class="p">)</span>
</span><span id="__span-130-19"><a id="__codelineno-130-19" name="__codelineno-130-19" href="#__codelineno-130-19"></a><span class="c1">#&gt; [&#39;init_kwargs&#39;, &#39;conf_file&#39;]</span>
</span><span id="__span-130-20"><a id="__codelineno-130-20" name="__codelineno-130-20" href="#__codelineno-130-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">ordered_settings</span><span class="p">)</span>
</span><span id="__span-130-21"><a id="__codelineno-130-21" name="__codelineno-130-21" href="#__codelineno-130-21"></a><span class="c1">#&gt; [&#39;cli&#39;, &#39;init_kwargs&#39;, &#39;env&#39;, &#39;env_file&#39;, &#39;secrets&#39;, &#39;conf_file&#39;]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-131-2"><a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a><span class="n">ordered_settings_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="handler_class">handler_class<a class="headerlink" href="#handler_class" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">type</span><span class="p">(</span><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiHandler</span><span class="p">)</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiHandler</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Класс, который реализует механизм чтения настроек.
Можно создавать собственные классы наследуясь от <code>arfi_settings.ArFiHandler</code>.</p>
<p>Более подробно про обработчики написано <a href="../handlers/">здесь</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">ArFiHandler</span>
</span><span id="__span-132-2"><a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a>
</span><span id="__span-132-3"><a id="__codelineno-132-3" name="__codelineno-132-3" href="#__codelineno-132-3"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-132-4"><a id="__codelineno-132-4" name="__codelineno-132-4" href="#__codelineno-132-4"></a>    <span class="k">def</span> <span class="nf">default_main_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-132-5"><a id="__codelineno-132-5" name="__codelineno-132-5" href="#__codelineno-132-5"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-132-6"><a id="__codelineno-132-6" name="__codelineno-132-6" href="#__codelineno-132-6"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-132-7"><a id="__codelineno-132-7" name="__codelineno-132-7" href="#__codelineno-132-7"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-132-8"><a id="__codelineno-132-8" name="__codelineno-132-8" href="#__codelineno-132-8"></a>
</span><span id="__span-132-9"><a id="__codelineno-132-9" name="__codelineno-132-9" href="#__codelineno-132-9"></a>
</span><span id="__span-132-10"><a id="__codelineno-132-10" name="__codelineno-132-10" href="#__codelineno-132-10"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-132-11"><a id="__codelineno-132-11" name="__codelineno-132-11" href="#__codelineno-132-11"></a>    <span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span></code></pre></div>
<h2 id="handler">handler<a class="headerlink" href="#handler" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;default_main_handler&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Это главный обработчик настроек, который запускается при инициализации класса и читает все настройки если значение параметра <a href="#read_config">read_config</a> установлено в <code class="language-python highlight"><span class="kc">True</span></code>
По сути это название метода класса <code>arfi_settings.ArFiHandler</code>. Можно создавать собственные обработчики и назначать их каждому классу индивидуально.</p>
<p>Более подробно про обработчики написано <a href="../handlers/">здесь</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>PROJECT_NAME=&quot;Awesome project&quot;
</span><span id="__span-133-2"><a id="__codelineno-133-2" name="__codelineno-133-2" href="#__codelineno-133-2"></a>MY_PARAM=&quot;param_from_env&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
</span><span id="__span-134-2"><a id="__codelineno-134-2" name="__codelineno-134-2" href="#__codelineno-134-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">ArFiHandler</span>
</span><span id="__span-134-3"><a id="__codelineno-134-3" name="__codelineno-134-3" href="#__codelineno-134-3"></a>
</span><span id="__span-134-4"><a id="__codelineno-134-4" name="__codelineno-134-4" href="#__codelineno-134-4"></a>
</span><span id="__span-134-5"><a id="__codelineno-134-5" name="__codelineno-134-5" href="#__codelineno-134-5"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-134-6"><a id="__codelineno-134-6" name="__codelineno-134-6" href="#__codelineno-134-6"></a>    <span class="k">def</span> <span class="nf">awesome_main_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-134-7"><a id="__codelineno-134-7" name="__codelineno-134-7" href="#__codelineno-134-7"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-134-8"><a id="__codelineno-134-8" name="__codelineno-134-8" href="#__codelineno-134-8"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-134-9"><a id="__codelineno-134-9" name="__codelineno-134-9" href="#__codelineno-134-9"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;my_param&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;param_from_awesome_handler&quot;</span>
</span><span id="__span-134-10"><a id="__codelineno-134-10" name="__codelineno-134-10" href="#__codelineno-134-10"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-134-11"><a id="__codelineno-134-11" name="__codelineno-134-11" href="#__codelineno-134-11"></a>
</span><span id="__span-134-12"><a id="__codelineno-134-12" name="__codelineno-134-12" href="#__codelineno-134-12"></a>
</span><span id="__span-134-13"><a id="__codelineno-134-13" name="__codelineno-134-13" href="#__codelineno-134-13"></a><span class="n">ArFiSettings</span><span class="o">.</span><span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span><span id="__span-134-14"><a id="__codelineno-134-14" name="__codelineno-134-14" href="#__codelineno-134-14"></a>
</span><span id="__span-134-15"><a id="__codelineno-134-15" name="__codelineno-134-15" href="#__codelineno-134-15"></a>
</span><span id="__span-134-16"><a id="__codelineno-134-16" name="__codelineno-134-16" href="#__codelineno-134-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-134-17"><a id="__codelineno-134-17" name="__codelineno-134-17" href="#__codelineno-134-17"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-134-18"><a id="__codelineno-134-18" name="__codelineno-134-18" href="#__codelineno-134-18"></a>
</span><span id="__span-134-19"><a id="__codelineno-134-19" name="__codelineno-134-19" href="#__codelineno-134-19"></a>    <span class="n">handler</span> <span class="o">=</span> <span class="s2">&quot;awesome_main_handler&quot;</span>      <span class="c1"># (1)!</span>
</span><span id="__span-134-20"><a id="__codelineno-134-20" name="__codelineno-134-20" href="#__codelineno-134-20"></a>
</span><span id="__span-134-21"><a id="__codelineno-134-21" name="__codelineno-134-21" href="#__codelineno-134-21"></a>
</span><span id="__span-134-22"><a id="__codelineno-134-22" name="__codelineno-134-22" href="#__codelineno-134-22"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-134-23"><a id="__codelineno-134-23" name="__codelineno-134-23" href="#__codelineno-134-23"></a>    <span class="n">PROJECT_NAME</span><span class="p">:</span> <span class="nb">str</span>                     <span class="c1"># (2)!</span>
</span><span id="__span-134-24"><a id="__codelineno-134-24" name="__codelineno-134-24" href="#__codelineno-134-24"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-134-25"><a id="__codelineno-134-25" name="__codelineno-134-25" href="#__codelineno-134-25"></a>
</span><span id="__span-134-26"><a id="__codelineno-134-26" name="__codelineno-134-26" href="#__codelineno-134-26"></a>
</span><span id="__span-134-27"><a id="__codelineno-134-27" name="__codelineno-134-27" href="#__codelineno-134-27"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-134-28"><a id="__codelineno-134-28" name="__codelineno-134-28" href="#__codelineno-134-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">)</span>
</span><span id="__span-134-29"><a id="__codelineno-134-29" name="__codelineno-134-29" href="#__codelineno-134-29"></a><span class="c1">#&gt; Awesome project</span>
</span><span id="__span-134-30"><a id="__codelineno-134-30" name="__codelineno-134-30" href="#__codelineno-134-30"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-134-31"><a id="__codelineno-134-31" name="__codelineno-134-31" href="#__codelineno-134-31"></a><span class="c1">#&gt; param_from_awesome_handler</span>
</span></code></pre></div>
<ol>
<li>Используется пользовательский обработчик. Нет доступа к переменным окружения</li>
<li>Используется обработчик по умолчанию</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-135-1"><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-135-2"><a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_awesome_handler&quot;</span>
</span></code></pre></div>
<h2 id="handler_inherit_parent">handler_inherit_parent<a class="headerlink" href="#handler_inherit_parent" title="Permanent link">&para;</a></h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование главного обработчика <a href="#handler">handler</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-136-1"><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
</span><span id="__span-136-2"><a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">ArFiHandler</span>
</span><span id="__span-136-3"><a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a>
</span><span id="__span-136-4"><a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a>
</span><span id="__span-136-5"><a id="__codelineno-136-5" name="__codelineno-136-5" href="#__codelineno-136-5"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-136-6"><a id="__codelineno-136-6" name="__codelineno-136-6" href="#__codelineno-136-6"></a>    <span class="k">def</span> <span class="nf">awesome_main_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-136-7"><a id="__codelineno-136-7" name="__codelineno-136-7" href="#__codelineno-136-7"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-136-8"><a id="__codelineno-136-8" name="__codelineno-136-8" href="#__codelineno-136-8"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-136-9"><a id="__codelineno-136-9" name="__codelineno-136-9" href="#__codelineno-136-9"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;my_param&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;param_from_awesome_handler&quot;</span>
</span><span id="__span-136-10"><a id="__codelineno-136-10" name="__codelineno-136-10" href="#__codelineno-136-10"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-136-11"><a id="__codelineno-136-11" name="__codelineno-136-11" href="#__codelineno-136-11"></a>
</span><span id="__span-136-12"><a id="__codelineno-136-12" name="__codelineno-136-12" href="#__codelineno-136-12"></a>
</span><span id="__span-136-13"><a id="__codelineno-136-13" name="__codelineno-136-13" href="#__codelineno-136-13"></a><span class="n">ArFiSettings</span><span class="o">.</span><span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span><span id="__span-136-14"><a id="__codelineno-136-14" name="__codelineno-136-14" href="#__codelineno-136-14"></a>
</span><span id="__span-136-15"><a id="__codelineno-136-15" name="__codelineno-136-15" href="#__codelineno-136-15"></a>
</span><span id="__span-136-16"><a id="__codelineno-136-16" name="__codelineno-136-16" href="#__codelineno-136-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-136-17"><a id="__codelineno-136-17" name="__codelineno-136-17" href="#__codelineno-136-17"></a>    <span class="k">pass</span>
</span><span id="__span-136-18"><a id="__codelineno-136-18" name="__codelineno-136-18" href="#__codelineno-136-18"></a>
</span><span id="__span-136-19"><a id="__codelineno-136-19" name="__codelineno-136-19" href="#__codelineno-136-19"></a>
</span><span id="__span-136-20"><a id="__codelineno-136-20" name="__codelineno-136-20" href="#__codelineno-136-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-136-21"><a id="__codelineno-136-21" name="__codelineno-136-21" href="#__codelineno-136-21"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-136-22"><a id="__codelineno-136-22" name="__codelineno-136-22" href="#__codelineno-136-22"></a>
</span><span id="__span-136-23"><a id="__codelineno-136-23" name="__codelineno-136-23" href="#__codelineno-136-23"></a>    <span class="n">handler</span> <span class="o">=</span> <span class="s2">&quot;awesome_main_handler&quot;</span>
</span><span id="__span-136-24"><a id="__codelineno-136-24" name="__codelineno-136-24" href="#__codelineno-136-24"></a>
</span><span id="__span-136-25"><a id="__codelineno-136-25" name="__codelineno-136-25" href="#__codelineno-136-25"></a>
</span><span id="__span-136-26"><a id="__codelineno-136-26" name="__codelineno-136-26" href="#__codelineno-136-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-136-27"><a id="__codelineno-136-27" name="__codelineno-136-27" href="#__codelineno-136-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">handler</span><span class="p">)</span>
</span><span id="__span-136-28"><a id="__codelineno-136-28" name="__codelineno-136-28" href="#__codelineno-136-28"></a><span class="c1">#&gt; awesome_main_handler</span>
</span><span id="__span-136-29"><a id="__codelineno-136-29" name="__codelineno-136-29" href="#__codelineno-136-29"></a>
</span><span id="__span-136-30"><a id="__codelineno-136-30" name="__codelineno-136-30" href="#__codelineno-136-30"></a>
</span><span id="__span-136-31"><a id="__codelineno-136-31" name="__codelineno-136-31" href="#__codelineno-136-31"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-136-32"><a id="__codelineno-136-32" name="__codelineno-136-32" href="#__codelineno-136-32"></a>    <span class="n">handler_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-136-33"><a id="__codelineno-136-33" name="__codelineno-136-33" href="#__codelineno-136-33"></a>
</span><span id="__span-136-34"><a id="__codelineno-136-34" name="__codelineno-136-34" href="#__codelineno-136-34"></a>
</span><span id="__span-136-35"><a id="__codelineno-136-35" name="__codelineno-136-35" href="#__codelineno-136-35"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-136-36"><a id="__codelineno-136-36" name="__codelineno-136-36" href="#__codelineno-136-36"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">handler</span><span class="p">)</span>
</span><span id="__span-136-37"><a id="__codelineno-136-37" name="__codelineno-136-37" href="#__codelineno-136-37"></a><span class="c1">#&gt; default_main_handler</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-137-1"><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-137-2"><a id="__codelineno-137-2" name="__codelineno-137-2" href="#__codelineno-137-2"></a><span class="n">handler_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="property">Свойства (property)<a class="headerlink" href="#property" title="Permanent link">&para;</a></h2>
<h3 id="root_dir">root_dir<a class="headerlink" href="#root_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает на главную директорию проекта. Автоматически определяется один раз для всего проекта. Нет возможности указать вручную.</p>
<p><strong>Принцип автоматического определения</strong>:</p>
<p>Сначала происходит поиск файла <code>pyproject.toml</code> с максимальной глубиной поиска по умолчанию на 3 директории ВВЕРХ от файла, где происходит инициализация инстанса главных настроек. Если файл <code>pyproject.toml</code> найден, главной директорией проекта считается та, в которой лежит этот файл. Если файл <code>pyproject.toml</code> не найден, то главной директорией проекта считается родительская директория для <a href="#BASE_DIR">BASE_DIR</a></p>
<p><strong>Использование</strong>:</p>
<p>Файл <code>pyproject.toml</code> существует</p>
<p>Структура проекта:
<div class="language-text highlight"><pre><span></span><code><span id="__span-138-1"><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a>~/my-awesome-project
</span><span id="__span-138-2"><a id="__codelineno-138-2" name="__codelineno-138-2" href="#__codelineno-138-2"></a>├── src
</span><span id="__span-138-3"><a id="__codelineno-138-3" name="__codelineno-138-3" href="#__codelineno-138-3"></a>│  └── my_awesome_project
</span><span id="__span-138-4"><a id="__codelineno-138-4" name="__codelineno-138-4" href="#__codelineno-138-4"></a>│     ├── __init__.py
</span><span id="__span-138-5"><a id="__codelineno-138-5" name="__codelineno-138-5" href="#__codelineno-138-5"></a>│     └── main.py
</span><span id="__span-138-6"><a id="__codelineno-138-6" name="__codelineno-138-6" href="#__codelineno-138-6"></a>└── pyproject.toml
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">~/my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-139-1"><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-139-2"><a id="__codelineno-139-2" name="__codelineno-139-2" href="#__codelineno-139-2"></a>
</span><span id="__span-139-3"><a id="__codelineno-139-3" name="__codelineno-139-3" href="#__codelineno-139-3"></a>
</span><span id="__span-139-4"><a id="__codelineno-139-4" name="__codelineno-139-4" href="#__codelineno-139-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-139-5"><a id="__codelineno-139-5" name="__codelineno-139-5" href="#__codelineno-139-5"></a>    <span class="k">pass</span>
</span><span id="__span-139-6"><a id="__codelineno-139-6" name="__codelineno-139-6" href="#__codelineno-139-6"></a>
</span><span id="__span-139-7"><a id="__codelineno-139-7" name="__codelineno-139-7" href="#__codelineno-139-7"></a>
</span><span id="__span-139-8"><a id="__codelineno-139-8" name="__codelineno-139-8" href="#__codelineno-139-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-139-9"><a id="__codelineno-139-9" name="__codelineno-139-9" href="#__codelineno-139-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">root_dir</span><span class="p">)</span>
</span><span id="__span-139-10"><a id="__codelineno-139-10" name="__codelineno-139-10" href="#__codelineno-139-10"></a><span class="c1">#&gt; /home/user/my-awesome-project</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code> отсутствует</p>
<p>Структура проекта:
<div class="language-text highlight"><pre><span></span><code><span id="__span-140-1"><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a>~/my-awesome-project
</span><span id="__span-140-2"><a id="__codelineno-140-2" name="__codelineno-140-2" href="#__codelineno-140-2"></a>└── src
</span><span id="__span-140-3"><a id="__codelineno-140-3" name="__codelineno-140-3" href="#__codelineno-140-3"></a>   └── my_awesome_project
</span><span id="__span-140-4"><a id="__codelineno-140-4" name="__codelineno-140-4" href="#__codelineno-140-4"></a>      ├── __init__.py
</span><span id="__span-140-5"><a id="__codelineno-140-5" name="__codelineno-140-5" href="#__codelineno-140-5"></a>      └── main.py
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">~/my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-141-1"><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-141-2"><a id="__codelineno-141-2" name="__codelineno-141-2" href="#__codelineno-141-2"></a>
</span><span id="__span-141-3"><a id="__codelineno-141-3" name="__codelineno-141-3" href="#__codelineno-141-3"></a>
</span><span id="__span-141-4"><a id="__codelineno-141-4" name="__codelineno-141-4" href="#__codelineno-141-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-141-5"><a id="__codelineno-141-5" name="__codelineno-141-5" href="#__codelineno-141-5"></a>    <span class="k">pass</span>
</span><span id="__span-141-6"><a id="__codelineno-141-6" name="__codelineno-141-6" href="#__codelineno-141-6"></a>
</span><span id="__span-141-7"><a id="__codelineno-141-7" name="__codelineno-141-7" href="#__codelineno-141-7"></a>
</span><span id="__span-141-8"><a id="__codelineno-141-8" name="__codelineno-141-8" href="#__codelineno-141-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-141-9"><a id="__codelineno-141-9" name="__codelineno-141-9" href="#__codelineno-141-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">root_dir</span><span class="p">)</span>
</span><span id="__span-141-10"><a id="__codelineno-141-10" name="__codelineno-141-10" href="#__codelineno-141-10"></a><span class="c1">#&gt; /home/user/my-awesome-project/src</span>
</span></code></pre></div>
<h3 id="conf_path">conf_path<a class="headerlink" href="#conf_path" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. На основе указанных параметров <a href="#conf_dir">conf_dir</a>, <a href="#mode_dir">mode_dir</a> и <a href="#conf_file">conf_file</a> вычисляет список путей к конфигурационным файлам для данного класса. При этом значения параметров, указанные в файле по последнему пути из этого списка всегда будут переопределять значения из предыдущих файлов.</p>
<p>Основной принцип построения путей:
<div class="language-text highlight"><pre><span></span><code><span id="__span-142-1"><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a>conf_dir/mode_dir/conf_file
</span></code></pre></div>
При сложной структуре в концепции обратного наследования пути строятся по следующему принципу:
<div class="language-text highlight"><pre><span></span><code><span id="__span-143-1"><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a>conf_dir/parent_mode_dir/nested_mode_dir/source_mode_dir/conf_file
</span></code></pre></div>
где:</p>
<ul>
<li>conf_dir - путь к директории конфигурации</li>
<li>parent_mode_dir - вычисляемое значение <code>mode_dir</code> класса-родителя в концепции обратного наследования</li>
<li>nested_mode_dir - точное значение <code>mode_dir</code> параметра класса, от которого наследуется текущий класс, в концепции классического наследования</li>
<li>source_mode_dir - точное значение <code>mode_dir</code> параметра исходного класса</li>
<li>conf_file - значение <code>conf_file</code>, указанное в исходном классе, т.е. имя файла конфигурации</li>
</ul>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-144-1"><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-144-2"><a id="__codelineno-144-2" name="__codelineno-144-2" href="#__codelineno-144-2"></a>
</span><span id="__span-144-3"><a id="__codelineno-144-3" name="__codelineno-144-3" href="#__codelineno-144-3"></a>
</span><span id="__span-144-4"><a id="__codelineno-144-4" name="__codelineno-144-4" href="#__codelineno-144-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-144-5"><a id="__codelineno-144-5" name="__codelineno-144-5" href="#__codelineno-144-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested_mode_dir&quot;</span>
</span><span id="__span-144-6"><a id="__codelineno-144-6" name="__codelineno-144-6" href="#__codelineno-144-6"></a>
</span><span id="__span-144-7"><a id="__codelineno-144-7" name="__codelineno-144-7" href="#__codelineno-144-7"></a>
</span><span id="__span-144-8"><a id="__codelineno-144-8" name="__codelineno-144-8" href="#__codelineno-144-8"></a><span class="k">class</span> <span class="nc">ChildConfig</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-144-9"><a id="__codelineno-144-9" name="__codelineno-144-9" href="#__codelineno-144-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;source_mode_dir&quot;</span>
</span><span id="__span-144-10"><a id="__codelineno-144-10" name="__codelineno-144-10" href="#__codelineno-144-10"></a>
</span><span id="__span-144-11"><a id="__codelineno-144-11" name="__codelineno-144-11" href="#__codelineno-144-11"></a>
</span><span id="__span-144-12"><a id="__codelineno-144-12" name="__codelineno-144-12" href="#__codelineno-144-12"></a><span class="k">class</span> <span class="nc">ParentConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-144-13"><a id="__codelineno-144-13" name="__codelineno-144-13" href="#__codelineno-144-13"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent_mode_dir&quot;</span>
</span><span id="__span-144-14"><a id="__codelineno-144-14" name="__codelineno-144-14" href="#__codelineno-144-14"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">ChildConfig</span>
</span><span id="__span-144-15"><a id="__codelineno-144-15" name="__codelineno-144-15" href="#__codelineno-144-15"></a>
</span><span id="__span-144-16"><a id="__codelineno-144-16" name="__codelineno-144-16" href="#__codelineno-144-16"></a>
</span><span id="__span-144-17"><a id="__codelineno-144-17" name="__codelineno-144-17" href="#__codelineno-144-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">ParentConfig</span><span class="p">()</span>
</span><span id="__span-144-18"><a id="__codelineno-144-18" name="__codelineno-144-18" href="#__codelineno-144-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-144-19"><a id="__codelineno-144-19" name="__codelineno-144-19" href="#__codelineno-144-19"></a><span class="c1">#&gt; [PosixPath(&#39;config/parent_mode_dir/config&#39;)]</span>
</span><span id="__span-144-20"><a id="__codelineno-144-20" name="__codelineno-144-20" href="#__codelineno-144-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-144-21"><a id="__codelineno-144-21" name="__codelineno-144-21" href="#__codelineno-144-21"></a><span class="c1">#&gt; [PosixPath(&#39;config/parent_mode_dir/nested_mode_dir/source_mode_dir/config&#39;)]</span>
</span></code></pre></div>
<h3 id="env_path">env_path<a class="headerlink" href="#env_path" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. На основе заданного параметра <a href="#env_file">env_file</a> вычисляет список путей к файлам с переменными окружения.</p>
<p>Под капотом, для каждого переданного файла, поиск происходит по следующим правилам, если передан относительный путь до файла:</p>
<ul>
<li>Сначала файл ищется в главной директории проекта <a href="#root_dir">root_dir</a>. Если файл найден, то поиск завершается.</li>
<li>Если файл не найден в главной директории, то происходит поиск файла в базовой директории проекта <a href="#BASE_DIR">BASE_DIR</a></li>
</ul>
<blockquote>
<p><strong>Заметка</strong>: При включённом режиме отладки <a href="../../about/debug_mode/">arfi_debug</a> можно увидеть абсолютные пути до файлов в результатах вывода отладочной информации..</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-145-1"><a id="__codelineno-145-1" name="__codelineno-145-1" href="#__codelineno-145-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-145-2"><a id="__codelineno-145-2" name="__codelineno-145-2" href="#__codelineno-145-2"></a>
</span><span id="__span-145-3"><a id="__codelineno-145-3" name="__codelineno-145-3" href="#__codelineno-145-3"></a>
</span><span id="__span-145-4"><a id="__codelineno-145-4" name="__codelineno-145-4" href="#__codelineno-145-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-145-5"><a id="__codelineno-145-5" name="__codelineno-145-5" href="#__codelineno-145-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-145-6"><a id="__codelineno-145-6" name="__codelineno-145-6" href="#__codelineno-145-6"></a>        <span class="n">env_file</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-145-7"><a id="__codelineno-145-7" name="__codelineno-145-7" href="#__codelineno-145-7"></a>            <span class="s2">&quot;.env&quot;</span><span class="p">,</span>
</span><span id="__span-145-8"><a id="__codelineno-145-8" name="__codelineno-145-8" href="#__codelineno-145-8"></a>            <span class="s2">&quot;.env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-145-9"><a id="__codelineno-145-9" name="__codelineno-145-9" href="#__codelineno-145-9"></a>        <span class="p">],</span>
</span><span id="__span-145-10"><a id="__codelineno-145-10" name="__codelineno-145-10" href="#__codelineno-145-10"></a>    <span class="p">)</span>
</span><span id="__span-145-11"><a id="__codelineno-145-11" name="__codelineno-145-11" href="#__codelineno-145-11"></a>
</span><span id="__span-145-12"><a id="__codelineno-145-12" name="__codelineno-145-12" href="#__codelineno-145-12"></a>
</span><span id="__span-145-13"><a id="__codelineno-145-13" name="__codelineno-145-13" href="#__codelineno-145-13"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-145-14"><a id="__codelineno-145-14" name="__codelineno-145-14" href="#__codelineno-145-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">env_path</span><span class="p">)</span>
</span><span id="__span-145-15"><a id="__codelineno-145-15" name="__codelineno-145-15" href="#__codelineno-145-15"></a><span class="c1">#&gt; [PosixPath(&#39;.env&#39;), PosixPath(&#39;.env.prod&#39;)]</span>
</span></code></pre></div>
<h3 id="mode_dir_path">mode_dir_path<a class="headerlink" href="#mode_dir_path" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="n">Path</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь до поддиректории, в которой будет производиться поиск файлов конфигурации для данного класса.</p>
<p>На основе этого пути строится полный путь до файлов конфигурации текущего класса по следующему принципу:</p>
<p><a href="#BASE_DIR">BASE_DIR</a> / <a href="#conf_dir">conf_dir</a> / <a href="#mode_dir_path">mode_dir_path</a> / <a href="#conf_file">conf_file</a>[.<a href="#conf_ext">conf_ext</a>]</p>
<blockquote>
<p><strong>Заметка</strong>: В начало пути добавляется <code>BASE_DIR /</code> только в том случае, если <code>conf_dir</code> не является абсолютным путём.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-146-1"><a id="__codelineno-146-1" name="__codelineno-146-1" href="#__codelineno-146-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-146-2"><a id="__codelineno-146-2" name="__codelineno-146-2" href="#__codelineno-146-2"></a>
</span><span id="__span-146-3"><a id="__codelineno-146-3" name="__codelineno-146-3" href="#__codelineno-146-3"></a>
</span><span id="__span-146-4"><a id="__codelineno-146-4" name="__codelineno-146-4" href="#__codelineno-146-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-146-5"><a id="__codelineno-146-5" name="__codelineno-146-5" href="#__codelineno-146-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-146-6"><a id="__codelineno-146-6" name="__codelineno-146-6" href="#__codelineno-146-6"></a>
</span><span id="__span-146-7"><a id="__codelineno-146-7" name="__codelineno-146-7" href="#__codelineno-146-7"></a>
</span><span id="__span-146-8"><a id="__codelineno-146-8" name="__codelineno-146-8" href="#__codelineno-146-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-146-9"><a id="__codelineno-146-9" name="__codelineno-146-9" href="#__codelineno-146-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-146-10"><a id="__codelineno-146-10" name="__codelineno-146-10" href="#__codelineno-146-10"></a>
</span><span id="__span-146-11"><a id="__codelineno-146-11" name="__codelineno-146-11" href="#__codelineno-146-11"></a>
</span><span id="__span-146-12"><a id="__codelineno-146-12" name="__codelineno-146-12" href="#__codelineno-146-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-146-13"><a id="__codelineno-146-13" name="__codelineno-146-13" href="#__codelineno-146-13"></a>    <span class="k">pass</span>
</span><span id="__span-146-14"><a id="__codelineno-146-14" name="__codelineno-146-14" href="#__codelineno-146-14"></a>
</span><span id="__span-146-15"><a id="__codelineno-146-15" name="__codelineno-146-15" href="#__codelineno-146-15"></a>
</span><span id="__span-146-16"><a id="__codelineno-146-16" name="__codelineno-146-16" href="#__codelineno-146-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-146-17"><a id="__codelineno-146-17" name="__codelineno-146-17" href="#__codelineno-146-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-146-18"><a id="__codelineno-146-18" name="__codelineno-146-18" href="#__codelineno-146-18"></a>
</span><span id="__span-146-19"><a id="__codelineno-146-19" name="__codelineno-146-19" href="#__codelineno-146-19"></a>
</span><span id="__span-146-20"><a id="__codelineno-146-20" name="__codelineno-146-20" href="#__codelineno-146-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-146-21"><a id="__codelineno-146-21" name="__codelineno-146-21" href="#__codelineno-146-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-146-22"><a id="__codelineno-146-22" name="__codelineno-146-22" href="#__codelineno-146-22"></a>
</span><span id="__span-146-23"><a id="__codelineno-146-23" name="__codelineno-146-23" href="#__codelineno-146-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-146-24"><a id="__codelineno-146-24" name="__codelineno-146-24" href="#__codelineno-146-24"></a>
</span><span id="__span-146-25"><a id="__codelineno-146-25" name="__codelineno-146-25" href="#__codelineno-146-25"></a>
</span><span id="__span-146-26"><a id="__codelineno-146-26" name="__codelineno-146-26" href="#__codelineno-146-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-146-27"><a id="__codelineno-146-27" name="__codelineno-146-27" href="#__codelineno-146-27"></a><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">mode_dir_path</span><span class="p">))</span>
</span><span id="__span-146-28"><a id="__codelineno-146-28" name="__codelineno-146-28" href="#__codelineno-146-28"></a><span class="c1">#&gt; PosixPath(&#39;dev/app/base/base_config/sub_app&#39;)</span>
</span><span id="__span-146-29"><a id="__codelineno-146-29" name="__codelineno-146-29" href="#__codelineno-146-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-146-30"><a id="__codelineno-146-30" name="__codelineno-146-30" href="#__codelineno-146-30"></a><span class="c1">#&gt; [PosixPath(&#39;config/dev/app/base/base_config/sub_app/config&#39;)]</span>
</span></code></pre></div>
<h3 id="computed_mode_dir">computed_mode_dir<a class="headerlink" href="#computed_mode_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает название поддиректории, в которой будет производиться поиск файлов конфигурации для данного класса.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-147-1"><a id="__codelineno-147-1" name="__codelineno-147-1" href="#__codelineno-147-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-147-2"><a id="__codelineno-147-2" name="__codelineno-147-2" href="#__codelineno-147-2"></a>
</span><span id="__span-147-3"><a id="__codelineno-147-3" name="__codelineno-147-3" href="#__codelineno-147-3"></a>
</span><span id="__span-147-4"><a id="__codelineno-147-4" name="__codelineno-147-4" href="#__codelineno-147-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-147-5"><a id="__codelineno-147-5" name="__codelineno-147-5" href="#__codelineno-147-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-147-6"><a id="__codelineno-147-6" name="__codelineno-147-6" href="#__codelineno-147-6"></a>
</span><span id="__span-147-7"><a id="__codelineno-147-7" name="__codelineno-147-7" href="#__codelineno-147-7"></a>
</span><span id="__span-147-8"><a id="__codelineno-147-8" name="__codelineno-147-8" href="#__codelineno-147-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-147-9"><a id="__codelineno-147-9" name="__codelineno-147-9" href="#__codelineno-147-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-147-10"><a id="__codelineno-147-10" name="__codelineno-147-10" href="#__codelineno-147-10"></a>
</span><span id="__span-147-11"><a id="__codelineno-147-11" name="__codelineno-147-11" href="#__codelineno-147-11"></a>
</span><span id="__span-147-12"><a id="__codelineno-147-12" name="__codelineno-147-12" href="#__codelineno-147-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-147-13"><a id="__codelineno-147-13" name="__codelineno-147-13" href="#__codelineno-147-13"></a>    <span class="k">pass</span>
</span><span id="__span-147-14"><a id="__codelineno-147-14" name="__codelineno-147-14" href="#__codelineno-147-14"></a>
</span><span id="__span-147-15"><a id="__codelineno-147-15" name="__codelineno-147-15" href="#__codelineno-147-15"></a>
</span><span id="__span-147-16"><a id="__codelineno-147-16" name="__codelineno-147-16" href="#__codelineno-147-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-147-17"><a id="__codelineno-147-17" name="__codelineno-147-17" href="#__codelineno-147-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-147-18"><a id="__codelineno-147-18" name="__codelineno-147-18" href="#__codelineno-147-18"></a>
</span><span id="__span-147-19"><a id="__codelineno-147-19" name="__codelineno-147-19" href="#__codelineno-147-19"></a>
</span><span id="__span-147-20"><a id="__codelineno-147-20" name="__codelineno-147-20" href="#__codelineno-147-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-147-21"><a id="__codelineno-147-21" name="__codelineno-147-21" href="#__codelineno-147-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-147-22"><a id="__codelineno-147-22" name="__codelineno-147-22" href="#__codelineno-147-22"></a>
</span><span id="__span-147-23"><a id="__codelineno-147-23" name="__codelineno-147-23" href="#__codelineno-147-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-147-24"><a id="__codelineno-147-24" name="__codelineno-147-24" href="#__codelineno-147-24"></a>
</span><span id="__span-147-25"><a id="__codelineno-147-25" name="__codelineno-147-25" href="#__codelineno-147-25"></a>
</span><span id="__span-147-26"><a id="__codelineno-147-26" name="__codelineno-147-26" href="#__codelineno-147-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-147-27"><a id="__codelineno-147-27" name="__codelineno-147-27" href="#__codelineno-147-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-147-28"><a id="__codelineno-147-28" name="__codelineno-147-28" href="#__codelineno-147-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-147-29"><a id="__codelineno-147-29" name="__codelineno-147-29" href="#__codelineno-147-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-147-30"><a id="__codelineno-147-30" name="__codelineno-147-30" href="#__codelineno-147-30"></a><span class="c1">#&gt; [PosixPath(&#39;config/dev/app/base/base_config/sub_app/config&#39;)]</span>
</span></code></pre></div>
<h3 id="parent_mode_dir">parent_mode_dir<a class="headerlink" href="#parent_mode_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает название поддиректории класса-родителя в концепции обратного наследования.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-148-1"><a id="__codelineno-148-1" name="__codelineno-148-1" href="#__codelineno-148-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-148-2"><a id="__codelineno-148-2" name="__codelineno-148-2" href="#__codelineno-148-2"></a>
</span><span id="__span-148-3"><a id="__codelineno-148-3" name="__codelineno-148-3" href="#__codelineno-148-3"></a>
</span><span id="__span-148-4"><a id="__codelineno-148-4" name="__codelineno-148-4" href="#__codelineno-148-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-148-5"><a id="__codelineno-148-5" name="__codelineno-148-5" href="#__codelineno-148-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-148-6"><a id="__codelineno-148-6" name="__codelineno-148-6" href="#__codelineno-148-6"></a>
</span><span id="__span-148-7"><a id="__codelineno-148-7" name="__codelineno-148-7" href="#__codelineno-148-7"></a>
</span><span id="__span-148-8"><a id="__codelineno-148-8" name="__codelineno-148-8" href="#__codelineno-148-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-148-9"><a id="__codelineno-148-9" name="__codelineno-148-9" href="#__codelineno-148-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-148-10"><a id="__codelineno-148-10" name="__codelineno-148-10" href="#__codelineno-148-10"></a>
</span><span id="__span-148-11"><a id="__codelineno-148-11" name="__codelineno-148-11" href="#__codelineno-148-11"></a>
</span><span id="__span-148-12"><a id="__codelineno-148-12" name="__codelineno-148-12" href="#__codelineno-148-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-148-13"><a id="__codelineno-148-13" name="__codelineno-148-13" href="#__codelineno-148-13"></a>    <span class="k">pass</span>
</span><span id="__span-148-14"><a id="__codelineno-148-14" name="__codelineno-148-14" href="#__codelineno-148-14"></a>
</span><span id="__span-148-15"><a id="__codelineno-148-15" name="__codelineno-148-15" href="#__codelineno-148-15"></a>
</span><span id="__span-148-16"><a id="__codelineno-148-16" name="__codelineno-148-16" href="#__codelineno-148-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-148-17"><a id="__codelineno-148-17" name="__codelineno-148-17" href="#__codelineno-148-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-148-18"><a id="__codelineno-148-18" name="__codelineno-148-18" href="#__codelineno-148-18"></a>
</span><span id="__span-148-19"><a id="__codelineno-148-19" name="__codelineno-148-19" href="#__codelineno-148-19"></a>
</span><span id="__span-148-20"><a id="__codelineno-148-20" name="__codelineno-148-20" href="#__codelineno-148-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-148-21"><a id="__codelineno-148-21" name="__codelineno-148-21" href="#__codelineno-148-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-148-22"><a id="__codelineno-148-22" name="__codelineno-148-22" href="#__codelineno-148-22"></a>
</span><span id="__span-148-23"><a id="__codelineno-148-23" name="__codelineno-148-23" href="#__codelineno-148-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-148-24"><a id="__codelineno-148-24" name="__codelineno-148-24" href="#__codelineno-148-24"></a>
</span><span id="__span-148-25"><a id="__codelineno-148-25" name="__codelineno-148-25" href="#__codelineno-148-25"></a>
</span><span id="__span-148-26"><a id="__codelineno-148-26" name="__codelineno-148-26" href="#__codelineno-148-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-148-27"><a id="__codelineno-148-27" name="__codelineno-148-27" href="#__codelineno-148-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-148-28"><a id="__codelineno-148-28" name="__codelineno-148-28" href="#__codelineno-148-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-148-29"><a id="__codelineno-148-29" name="__codelineno-148-29" href="#__codelineno-148-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">parent_mode_dir</span><span class="p">)</span>
</span><span id="__span-148-30"><a id="__codelineno-148-30" name="__codelineno-148-30" href="#__codelineno-148-30"></a><span class="c1">#&gt; dev/app</span>
</span></code></pre></div>
<h3 id="nested_mode_dir">nested_mode_dir<a class="headerlink" href="#nested_mode_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает название поддиректории класса, от которого наследуется в классической концепции наследования.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-149-1"><a id="__codelineno-149-1" name="__codelineno-149-1" href="#__codelineno-149-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-149-2"><a id="__codelineno-149-2" name="__codelineno-149-2" href="#__codelineno-149-2"></a>
</span><span id="__span-149-3"><a id="__codelineno-149-3" name="__codelineno-149-3" href="#__codelineno-149-3"></a>
</span><span id="__span-149-4"><a id="__codelineno-149-4" name="__codelineno-149-4" href="#__codelineno-149-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-149-5"><a id="__codelineno-149-5" name="__codelineno-149-5" href="#__codelineno-149-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-149-6"><a id="__codelineno-149-6" name="__codelineno-149-6" href="#__codelineno-149-6"></a>
</span><span id="__span-149-7"><a id="__codelineno-149-7" name="__codelineno-149-7" href="#__codelineno-149-7"></a>
</span><span id="__span-149-8"><a id="__codelineno-149-8" name="__codelineno-149-8" href="#__codelineno-149-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-149-9"><a id="__codelineno-149-9" name="__codelineno-149-9" href="#__codelineno-149-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-149-10"><a id="__codelineno-149-10" name="__codelineno-149-10" href="#__codelineno-149-10"></a>
</span><span id="__span-149-11"><a id="__codelineno-149-11" name="__codelineno-149-11" href="#__codelineno-149-11"></a>
</span><span id="__span-149-12"><a id="__codelineno-149-12" name="__codelineno-149-12" href="#__codelineno-149-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-149-13"><a id="__codelineno-149-13" name="__codelineno-149-13" href="#__codelineno-149-13"></a>    <span class="k">pass</span>
</span><span id="__span-149-14"><a id="__codelineno-149-14" name="__codelineno-149-14" href="#__codelineno-149-14"></a>
</span><span id="__span-149-15"><a id="__codelineno-149-15" name="__codelineno-149-15" href="#__codelineno-149-15"></a>
</span><span id="__span-149-16"><a id="__codelineno-149-16" name="__codelineno-149-16" href="#__codelineno-149-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-149-17"><a id="__codelineno-149-17" name="__codelineno-149-17" href="#__codelineno-149-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-149-18"><a id="__codelineno-149-18" name="__codelineno-149-18" href="#__codelineno-149-18"></a>
</span><span id="__span-149-19"><a id="__codelineno-149-19" name="__codelineno-149-19" href="#__codelineno-149-19"></a>
</span><span id="__span-149-20"><a id="__codelineno-149-20" name="__codelineno-149-20" href="#__codelineno-149-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-149-21"><a id="__codelineno-149-21" name="__codelineno-149-21" href="#__codelineno-149-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-149-22"><a id="__codelineno-149-22" name="__codelineno-149-22" href="#__codelineno-149-22"></a>
</span><span id="__span-149-23"><a id="__codelineno-149-23" name="__codelineno-149-23" href="#__codelineno-149-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-149-24"><a id="__codelineno-149-24" name="__codelineno-149-24" href="#__codelineno-149-24"></a>
</span><span id="__span-149-25"><a id="__codelineno-149-25" name="__codelineno-149-25" href="#__codelineno-149-25"></a>
</span><span id="__span-149-26"><a id="__codelineno-149-26" name="__codelineno-149-26" href="#__codelineno-149-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-149-27"><a id="__codelineno-149-27" name="__codelineno-149-27" href="#__codelineno-149-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-149-28"><a id="__codelineno-149-28" name="__codelineno-149-28" href="#__codelineno-149-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-149-29"><a id="__codelineno-149-29" name="__codelineno-149-29" href="#__codelineno-149-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">nested_mode_dir</span><span class="p">)</span>
</span><span id="__span-149-30"><a id="__codelineno-149-30" name="__codelineno-149-30" href="#__codelineno-149-30"></a><span class="c1">#&gt; base/base_config</span>
</span></code></pre></div>
<h3 id="source_mode_dir">source_mode_dir<a class="headerlink" href="#source_mode_dir" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает название собственной поддиректории.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-150-1"><a id="__codelineno-150-1" name="__codelineno-150-1" href="#__codelineno-150-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-150-2"><a id="__codelineno-150-2" name="__codelineno-150-2" href="#__codelineno-150-2"></a>
</span><span id="__span-150-3"><a id="__codelineno-150-3" name="__codelineno-150-3" href="#__codelineno-150-3"></a>
</span><span id="__span-150-4"><a id="__codelineno-150-4" name="__codelineno-150-4" href="#__codelineno-150-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-150-5"><a id="__codelineno-150-5" name="__codelineno-150-5" href="#__codelineno-150-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-150-6"><a id="__codelineno-150-6" name="__codelineno-150-6" href="#__codelineno-150-6"></a>
</span><span id="__span-150-7"><a id="__codelineno-150-7" name="__codelineno-150-7" href="#__codelineno-150-7"></a>
</span><span id="__span-150-8"><a id="__codelineno-150-8" name="__codelineno-150-8" href="#__codelineno-150-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-150-9"><a id="__codelineno-150-9" name="__codelineno-150-9" href="#__codelineno-150-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-150-10"><a id="__codelineno-150-10" name="__codelineno-150-10" href="#__codelineno-150-10"></a>
</span><span id="__span-150-11"><a id="__codelineno-150-11" name="__codelineno-150-11" href="#__codelineno-150-11"></a>
</span><span id="__span-150-12"><a id="__codelineno-150-12" name="__codelineno-150-12" href="#__codelineno-150-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-150-13"><a id="__codelineno-150-13" name="__codelineno-150-13" href="#__codelineno-150-13"></a>    <span class="k">pass</span>
</span><span id="__span-150-14"><a id="__codelineno-150-14" name="__codelineno-150-14" href="#__codelineno-150-14"></a>
</span><span id="__span-150-15"><a id="__codelineno-150-15" name="__codelineno-150-15" href="#__codelineno-150-15"></a>
</span><span id="__span-150-16"><a id="__codelineno-150-16" name="__codelineno-150-16" href="#__codelineno-150-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-150-17"><a id="__codelineno-150-17" name="__codelineno-150-17" href="#__codelineno-150-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-150-18"><a id="__codelineno-150-18" name="__codelineno-150-18" href="#__codelineno-150-18"></a>
</span><span id="__span-150-19"><a id="__codelineno-150-19" name="__codelineno-150-19" href="#__codelineno-150-19"></a>
</span><span id="__span-150-20"><a id="__codelineno-150-20" name="__codelineno-150-20" href="#__codelineno-150-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-150-21"><a id="__codelineno-150-21" name="__codelineno-150-21" href="#__codelineno-150-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-150-22"><a id="__codelineno-150-22" name="__codelineno-150-22" href="#__codelineno-150-22"></a>
</span><span id="__span-150-23"><a id="__codelineno-150-23" name="__codelineno-150-23" href="#__codelineno-150-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-150-24"><a id="__codelineno-150-24" name="__codelineno-150-24" href="#__codelineno-150-24"></a>
</span><span id="__span-150-25"><a id="__codelineno-150-25" name="__codelineno-150-25" href="#__codelineno-150-25"></a>
</span><span id="__span-150-26"><a id="__codelineno-150-26" name="__codelineno-150-26" href="#__codelineno-150-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-150-27"><a id="__codelineno-150-27" name="__codelineno-150-27" href="#__codelineno-150-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-150-28"><a id="__codelineno-150-28" name="__codelineno-150-28" href="#__codelineno-150-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-150-29"><a id="__codelineno-150-29" name="__codelineno-150-29" href="#__codelineno-150-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">source_mode_dir</span><span class="p">)</span>
</span><span id="__span-150-30"><a id="__codelineno-150-30" name="__codelineno-150-30" href="#__codelineno-150-30"></a><span class="c1">#&gt; sub_app</span>
</span></code></pre></div>
<h3 id="pyproject_toml_path">pyproject_toml_path<a class="headerlink" href="#pyproject_toml_path" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь файла <code>pyproject.toml</code>.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><span class="filename">~/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-151-1"><a id="__codelineno-151-1" name="__codelineno-151-1" href="#__codelineno-151-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-151-2"><a id="__codelineno-151-2" name="__codelineno-151-2" href="#__codelineno-151-2"></a>
</span><span id="__span-151-3"><a id="__codelineno-151-3" name="__codelineno-151-3" href="#__codelineno-151-3"></a>
</span><span id="__span-151-4"><a id="__codelineno-151-4" name="__codelineno-151-4" href="#__codelineno-151-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-151-5"><a id="__codelineno-151-5" name="__codelineno-151-5" href="#__codelineno-151-5"></a>    <span class="k">pass</span>
</span><span id="__span-151-6"><a id="__codelineno-151-6" name="__codelineno-151-6" href="#__codelineno-151-6"></a>
</span><span id="__span-151-7"><a id="__codelineno-151-7" name="__codelineno-151-7" href="#__codelineno-151-7"></a>
</span><span id="__span-151-8"><a id="__codelineno-151-8" name="__codelineno-151-8" href="#__codelineno-151-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-151-9"><a id="__codelineno-151-9" name="__codelineno-151-9" href="#__codelineno-151-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">pyproject_toml_path</span><span class="p">)</span>   <span class="c1"># (1)!</span>
</span><span id="__span-151-10"><a id="__codelineno-151-10" name="__codelineno-151-10" href="#__codelineno-151-10"></a><span class="c1">#&gt; /home/user/my_awesome_project/pyproject.toml</span>
</span></code></pre></div>
<ol>
<li>При условии, что файл <code>pyproject.toml</code> существует в корне проекта.</li>
</ol>
<h3 id="inherited_params">inherited_params<a class="headerlink" href="#inherited_params" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-text highlight">list[str]</code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Отображает все собственные настройки, которые наследуются от класса-родителя в концепции обратного наследования.</p>
<p><strong>Использование</strong>:</p>
<p>Все настройки, которые наследуются по умолчанию из <code>file_config</code> и <code>env_config</code> класса-родителя в концепции обратного наследования.
<div class="language-py highlight"><pre><span></span><code><span id="__span-152-1"><a id="__codelineno-152-1" name="__codelineno-152-1" href="#__codelineno-152-1"></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="__span-152-2"><a id="__codelineno-152-2" name="__codelineno-152-2" href="#__codelineno-152-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-152-3"><a id="__codelineno-152-3" name="__codelineno-152-3" href="#__codelineno-152-3"></a>
</span><span id="__span-152-4"><a id="__codelineno-152-4" name="__codelineno-152-4" href="#__codelineno-152-4"></a>
</span><span id="__span-152-5"><a id="__codelineno-152-5" name="__codelineno-152-5" href="#__codelineno-152-5"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-152-6"><a id="__codelineno-152-6" name="__codelineno-152-6" href="#__codelineno-152-6"></a>    <span class="k">pass</span>
</span><span id="__span-152-7"><a id="__codelineno-152-7" name="__codelineno-152-7" href="#__codelineno-152-7"></a>
</span><span id="__span-152-8"><a id="__codelineno-152-8" name="__codelineno-152-8" href="#__codelineno-152-8"></a>
</span><span id="__span-152-9"><a id="__codelineno-152-9" name="__codelineno-152-9" href="#__codelineno-152-9"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-152-10"><a id="__codelineno-152-10" name="__codelineno-152-10" href="#__codelineno-152-10"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-152-11"><a id="__codelineno-152-11" name="__codelineno-152-11" href="#__codelineno-152-11"></a>
</span><span id="__span-152-12"><a id="__codelineno-152-12" name="__codelineno-152-12" href="#__codelineno-152-12"></a>
</span><span id="__span-152-13"><a id="__codelineno-152-13" name="__codelineno-152-13" href="#__codelineno-152-13"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-152-14"><a id="__codelineno-152-14" name="__codelineno-152-14" href="#__codelineno-152-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</span><span id="__span-152-15"><a id="__codelineno-152-15" name="__codelineno-152-15" href="#__codelineno-152-15"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-152-16"><a id="__codelineno-152-16" name="__codelineno-152-16" href="#__codelineno-152-16"></a><span class="sd">[</span>
</span><span id="__span-152-17"><a id="__codelineno-152-17" name="__codelineno-152-17" href="#__codelineno-152-17"></a><span class="sd">    &quot;conf_include_inherit_parent&quot;,</span>
</span><span id="__span-152-18"><a id="__codelineno-152-18" name="__codelineno-152-18" href="#__codelineno-152-18"></a><span class="sd">    &quot;conf_exclude_inherit_parent&quot;,</span>
</span><span id="__span-152-19"><a id="__codelineno-152-19" name="__codelineno-152-19" href="#__codelineno-152-19"></a><span class="sd">    &quot;env_include_inherit_parent&quot;,</span>
</span><span id="__span-152-20"><a id="__codelineno-152-20" name="__codelineno-152-20" href="#__codelineno-152-20"></a><span class="sd">    &quot;env_exclude_inherit_parent&quot;,</span>
</span><span id="__span-152-21"><a id="__codelineno-152-21" name="__codelineno-152-21" href="#__codelineno-152-21"></a><span class="sd">    &quot;conf_file&quot;,</span>
</span><span id="__span-152-22"><a id="__codelineno-152-22" name="__codelineno-152-22" href="#__codelineno-152-22"></a><span class="sd">    &quot;conf_dir&quot;,</span>
</span><span id="__span-152-23"><a id="__codelineno-152-23" name="__codelineno-152-23" href="#__codelineno-152-23"></a><span class="sd">    &quot;conf_ext&quot;,</span>
</span><span id="__span-152-24"><a id="__codelineno-152-24" name="__codelineno-152-24" href="#__codelineno-152-24"></a><span class="sd">    &quot;conf_file_encoding&quot;,</span>
</span><span id="__span-152-25"><a id="__codelineno-152-25" name="__codelineno-152-25" href="#__codelineno-152-25"></a><span class="sd">    &quot;conf_case_sensitive&quot;,</span>
</span><span id="__span-152-26"><a id="__codelineno-152-26" name="__codelineno-152-26" href="#__codelineno-152-26"></a><span class="sd">    &quot;conf_ignore_missing&quot;,</span>
</span><span id="__span-152-27"><a id="__codelineno-152-27" name="__codelineno-152-27" href="#__codelineno-152-27"></a><span class="sd">    &quot;conf_custom_ext_handler&quot;,</span>
</span><span id="__span-152-28"><a id="__codelineno-152-28" name="__codelineno-152-28" href="#__codelineno-152-28"></a><span class="sd">    &quot;env_file&quot;,</span>
</span><span id="__span-152-29"><a id="__codelineno-152-29" name="__codelineno-152-29" href="#__codelineno-152-29"></a><span class="sd">    &quot;env_prefix&quot;,</span>
</span><span id="__span-152-30"><a id="__codelineno-152-30" name="__codelineno-152-30" href="#__codelineno-152-30"></a><span class="sd">    &quot;env_prefix_as_mode_dir&quot;,</span>
</span><span id="__span-152-31"><a id="__codelineno-152-31" name="__codelineno-152-31" href="#__codelineno-152-31"></a><span class="sd">    &quot;env_prefix_as_nested_mode_dir&quot;,</span>
</span><span id="__span-152-32"><a id="__codelineno-152-32" name="__codelineno-152-32" href="#__codelineno-152-32"></a><span class="sd">    &quot;env_prefix_as_source_mode_dir&quot;,</span>
</span><span id="__span-152-33"><a id="__codelineno-152-33" name="__codelineno-152-33" href="#__codelineno-152-33"></a><span class="sd">    &quot;env_file_encoding&quot;,</span>
</span><span id="__span-152-34"><a id="__codelineno-152-34" name="__codelineno-152-34" href="#__codelineno-152-34"></a><span class="sd">    &quot;env_case_sensitive&quot;,</span>
</span><span id="__span-152-35"><a id="__codelineno-152-35" name="__codelineno-152-35" href="#__codelineno-152-35"></a><span class="sd">    &quot;env_nested_delimiter&quot;,</span>
</span><span id="__span-152-36"><a id="__codelineno-152-36" name="__codelineno-152-36" href="#__codelineno-152-36"></a><span class="sd">    &quot;env_ignore_missing&quot;</span>
</span><span id="__span-152-37"><a id="__codelineno-152-37" name="__codelineno-152-37" href="#__codelineno-152-37"></a><span class="sd">]</span>
</span><span id="__span-152-38"><a id="__codelineno-152-38" name="__codelineno-152-38" href="#__codelineno-152-38"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div></p>
<p>Отключаем наследование части настроек:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-153-1"><a id="__codelineno-153-1" name="__codelineno-153-1" href="#__codelineno-153-1"></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="__span-153-2"><a id="__codelineno-153-2" name="__codelineno-153-2" href="#__codelineno-153-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-153-3"><a id="__codelineno-153-3" name="__codelineno-153-3" href="#__codelineno-153-3"></a>
</span><span id="__span-153-4"><a id="__codelineno-153-4" name="__codelineno-153-4" href="#__codelineno-153-4"></a>
</span><span id="__span-153-5"><a id="__codelineno-153-5" name="__codelineno-153-5" href="#__codelineno-153-5"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-153-6"><a id="__codelineno-153-6" name="__codelineno-153-6" href="#__codelineno-153-6"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-153-7"><a id="__codelineno-153-7" name="__codelineno-153-7" href="#__codelineno-153-7"></a>        <span class="n">include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-153-8"><a id="__codelineno-153-8" name="__codelineno-153-8" href="#__codelineno-153-8"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-153-9"><a id="__codelineno-153-9" name="__codelineno-153-9" href="#__codelineno-153-9"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-153-10"><a id="__codelineno-153-10" name="__codelineno-153-10" href="#__codelineno-153-10"></a>        <span class="p">],</span>
</span><span id="__span-153-11"><a id="__codelineno-153-11" name="__codelineno-153-11" href="#__codelineno-153-11"></a>        <span class="n">exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-153-12"><a id="__codelineno-153-12" name="__codelineno-153-12" href="#__codelineno-153-12"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-153-13"><a id="__codelineno-153-13" name="__codelineno-153-13" href="#__codelineno-153-13"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-153-14"><a id="__codelineno-153-14" name="__codelineno-153-14" href="#__codelineno-153-14"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-153-15"><a id="__codelineno-153-15" name="__codelineno-153-15" href="#__codelineno-153-15"></a>            <span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-153-16"><a id="__codelineno-153-16" name="__codelineno-153-16" href="#__codelineno-153-16"></a>        <span class="p">],</span>
</span><span id="__span-153-17"><a id="__codelineno-153-17" name="__codelineno-153-17" href="#__codelineno-153-17"></a>    <span class="p">)</span>
</span><span id="__span-153-18"><a id="__codelineno-153-18" name="__codelineno-153-18" href="#__codelineno-153-18"></a>
</span><span id="__span-153-19"><a id="__codelineno-153-19" name="__codelineno-153-19" href="#__codelineno-153-19"></a>
</span><span id="__span-153-20"><a id="__codelineno-153-20" name="__codelineno-153-20" href="#__codelineno-153-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-153-21"><a id="__codelineno-153-21" name="__codelineno-153-21" href="#__codelineno-153-21"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-153-22"><a id="__codelineno-153-22" name="__codelineno-153-22" href="#__codelineno-153-22"></a>
</span><span id="__span-153-23"><a id="__codelineno-153-23" name="__codelineno-153-23" href="#__codelineno-153-23"></a>
</span><span id="__span-153-24"><a id="__codelineno-153-24" name="__codelineno-153-24" href="#__codelineno-153-24"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-153-25"><a id="__codelineno-153-25" name="__codelineno-153-25" href="#__codelineno-153-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</span><span id="__span-153-26"><a id="__codelineno-153-26" name="__codelineno-153-26" href="#__codelineno-153-26"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-153-27"><a id="__codelineno-153-27" name="__codelineno-153-27" href="#__codelineno-153-27"></a><span class="sd">[</span>
</span><span id="__span-153-28"><a id="__codelineno-153-28" name="__codelineno-153-28" href="#__codelineno-153-28"></a><span class="sd">    &quot;conf_file&quot;,</span>
</span><span id="__span-153-29"><a id="__codelineno-153-29" name="__codelineno-153-29" href="#__codelineno-153-29"></a><span class="sd">    &quot;env_prefix&quot;,</span>
</span><span id="__span-153-30"><a id="__codelineno-153-30" name="__codelineno-153-30" href="#__codelineno-153-30"></a><span class="sd">]</span>
</span><span id="__span-153-31"><a id="__codelineno-153-31" name="__codelineno-153-31" href="#__codelineno-153-31"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div>
<h3 id="settings_config">settings_config<a class="headerlink" href="#settings_config" title="Permanent link">&para;</a></h3>
<p>Тип: <code class="language-python highlight"><span class="n">pidantic</span><span class="o">.</span><span class="n">BaseModel</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">SettingsConfigSchema</span><span class="p">()</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Агрегирует все заданные собственные настройки, которые потом использует обработчик при чтении конфигурации.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-154-1"><a id="__codelineno-154-1" name="__codelineno-154-1" href="#__codelineno-154-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-154-2"><a id="__codelineno-154-2" name="__codelineno-154-2" href="#__codelineno-154-2"></a>
</span><span id="__span-154-3"><a id="__codelineno-154-3" name="__codelineno-154-3" href="#__codelineno-154-3"></a>
</span><span id="__span-154-4"><a id="__codelineno-154-4" name="__codelineno-154-4" href="#__codelineno-154-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-154-5"><a id="__codelineno-154-5" name="__codelineno-154-5" href="#__codelineno-154-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-154-6"><a id="__codelineno-154-6" name="__codelineno-154-6" href="#__codelineno-154-6"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-154-7"><a id="__codelineno-154-7" name="__codelineno-154-7" href="#__codelineno-154-7"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-154-8"><a id="__codelineno-154-8" name="__codelineno-154-8" href="#__codelineno-154-8"></a>            <span class="s2">&quot;appconfig.toml&quot;</span><span class="p">,</span>
</span><span id="__span-154-9"><a id="__codelineno-154-9" name="__codelineno-154-9" href="#__codelineno-154-9"></a>            <span class="s2">&quot;~/.config/myapp/config.toml&quot;</span><span class="p">,</span>
</span><span id="__span-154-10"><a id="__codelineno-154-10" name="__codelineno-154-10" href="#__codelineno-154-10"></a>            <span class="s2">&quot;/var/run/secrets/config.toml&quot;</span><span class="p">,</span>
</span><span id="__span-154-11"><a id="__codelineno-154-11" name="__codelineno-154-11" href="#__codelineno-154-11"></a>        <span class="p">],</span>
</span><span id="__span-154-12"><a id="__codelineno-154-12" name="__codelineno-154-12" href="#__codelineno-154-12"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;/var/run/secrets/.my_environment&quot;</span><span class="p">,</span>
</span><span id="__span-154-13"><a id="__codelineno-154-13" name="__codelineno-154-13" href="#__codelineno-154-13"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-154-14"><a id="__codelineno-154-14" name="__codelineno-154-14" href="#__codelineno-154-14"></a>        <span class="n">secrets_dir</span><span class="o">=</span><span class="s2">&quot;/var/run/secrets&quot;</span><span class="p">,</span>
</span><span id="__span-154-15"><a id="__codelineno-154-15" name="__codelineno-154-15" href="#__codelineno-154-15"></a>        <span class="n">cli</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-154-16"><a id="__codelineno-154-16" name="__codelineno-154-16" href="#__codelineno-154-16"></a>    <span class="p">)</span>
</span><span id="__span-154-17"><a id="__codelineno-154-17" name="__codelineno-154-17" href="#__codelineno-154-17"></a>
</span><span id="__span-154-18"><a id="__codelineno-154-18" name="__codelineno-154-18" href="#__codelineno-154-18"></a>
</span><span id="__span-154-19"><a id="__codelineno-154-19" name="__codelineno-154-19" href="#__codelineno-154-19"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-154-20"><a id="__codelineno-154-20" name="__codelineno-154-20" href="#__codelineno-154-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</span><span id="__span-154-21"><a id="__codelineno-154-21" name="__codelineno-154-21" href="#__codelineno-154-21"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-154-22"><a id="__codelineno-154-22" name="__codelineno-154-22" href="#__codelineno-154-22"></a><span class="sd">{</span>
</span><span id="__span-154-23"><a id="__codelineno-154-23" name="__codelineno-154-23" href="#__codelineno-154-23"></a><span class="sd">    &quot;env_file&quot;: &quot;/var/run/secrets/.my_environment&quot;,</span>
</span><span id="__span-154-24"><a id="__codelineno-154-24" name="__codelineno-154-24" href="#__codelineno-154-24"></a><span class="sd">    &quot;env_prefix&quot;: &quot;APP_&quot;,</span>
</span><span id="__span-154-25"><a id="__codelineno-154-25" name="__codelineno-154-25" href="#__codelineno-154-25"></a><span class="sd">    &quot;env_prefix_as_mode_dir&quot;: false,</span>
</span><span id="__span-154-26"><a id="__codelineno-154-26" name="__codelineno-154-26" href="#__codelineno-154-26"></a><span class="sd">    &quot;env_prefix_as_nested_mode_dir&quot;: false,</span>
</span><span id="__span-154-27"><a id="__codelineno-154-27" name="__codelineno-154-27" href="#__codelineno-154-27"></a><span class="sd">    &quot;env_prefix_as_source_mode_dir&quot;: false,</span>
</span><span id="__span-154-28"><a id="__codelineno-154-28" name="__codelineno-154-28" href="#__codelineno-154-28"></a><span class="sd">    &quot;env_file_encoding&quot;: null,</span>
</span><span id="__span-154-29"><a id="__codelineno-154-29" name="__codelineno-154-29" href="#__codelineno-154-29"></a><span class="sd">    &quot;env_case_sensitive&quot;: false,</span>
</span><span id="__span-154-30"><a id="__codelineno-154-30" name="__codelineno-154-30" href="#__codelineno-154-30"></a><span class="sd">    &quot;env_nested_delimiter&quot;: &quot;&quot;,</span>
</span><span id="__span-154-31"><a id="__codelineno-154-31" name="__codelineno-154-31" href="#__codelineno-154-31"></a><span class="sd">    &quot;env_ignore_missing&quot;: true,</span>
</span><span id="__span-154-32"><a id="__codelineno-154-32" name="__codelineno-154-32" href="#__codelineno-154-32"></a><span class="sd">    &quot;env_include_inherit_parent&quot;: [],</span>
</span><span id="__span-154-33"><a id="__codelineno-154-33" name="__codelineno-154-33" href="#__codelineno-154-33"></a><span class="sd">    &quot;env_exclude_inherit_parent&quot;: [],</span>
</span><span id="__span-154-34"><a id="__codelineno-154-34" name="__codelineno-154-34" href="#__codelineno-154-34"></a><span class="sd">    &quot;conf_file&quot;: &quot;[&#39;appconfig.toml&#39;, &#39;~/.config/myapp/config.toml&#39;, &#39;/var/run/secrets/config.toml&#39;]&quot;,</span>
</span><span id="__span-154-35"><a id="__codelineno-154-35" name="__codelineno-154-35" href="#__codelineno-154-35"></a><span class="sd">    &quot;conf_dir&quot;: null,</span>
</span><span id="__span-154-36"><a id="__codelineno-154-36" name="__codelineno-154-36" href="#__codelineno-154-36"></a><span class="sd">    &quot;conf_ext&quot;: [</span>
</span><span id="__span-154-37"><a id="__codelineno-154-37" name="__codelineno-154-37" href="#__codelineno-154-37"></a><span class="sd">        &quot;toml&quot;,</span>
</span><span id="__span-154-38"><a id="__codelineno-154-38" name="__codelineno-154-38" href="#__codelineno-154-38"></a><span class="sd">        &quot;yaml&quot;,</span>
</span><span id="__span-154-39"><a id="__codelineno-154-39" name="__codelineno-154-39" href="#__codelineno-154-39"></a><span class="sd">        &quot;yml&quot;,</span>
</span><span id="__span-154-40"><a id="__codelineno-154-40" name="__codelineno-154-40" href="#__codelineno-154-40"></a><span class="sd">        &quot;json&quot;</span>
</span><span id="__span-154-41"><a id="__codelineno-154-41" name="__codelineno-154-41" href="#__codelineno-154-41"></a><span class="sd">    ],</span>
</span><span id="__span-154-42"><a id="__codelineno-154-42" name="__codelineno-154-42" href="#__codelineno-154-42"></a><span class="sd">    &quot;conf_file_encoding&quot;: null,</span>
</span><span id="__span-154-43"><a id="__codelineno-154-43" name="__codelineno-154-43" href="#__codelineno-154-43"></a><span class="sd">    &quot;conf_case_sensitive&quot;: false,</span>
</span><span id="__span-154-44"><a id="__codelineno-154-44" name="__codelineno-154-44" href="#__codelineno-154-44"></a><span class="sd">    &quot;conf_ignore_missing&quot;: true,</span>
</span><span id="__span-154-45"><a id="__codelineno-154-45" name="__codelineno-154-45" href="#__codelineno-154-45"></a><span class="sd">    &quot;conf_custom_ext_handler&quot;: null,</span>
</span><span id="__span-154-46"><a id="__codelineno-154-46" name="__codelineno-154-46" href="#__codelineno-154-46"></a><span class="sd">    &quot;conf_include_inherit_parent&quot;: [],</span>
</span><span id="__span-154-47"><a id="__codelineno-154-47" name="__codelineno-154-47" href="#__codelineno-154-47"></a><span class="sd">    &quot;conf_exclude_inherit_parent&quot;: [],</span>
</span><span id="__span-154-48"><a id="__codelineno-154-48" name="__codelineno-154-48" href="#__codelineno-154-48"></a><span class="sd">    &quot;case_sensitive&quot;: false,</span>
</span><span id="__span-154-49"><a id="__codelineno-154-49" name="__codelineno-154-49" href="#__codelineno-154-49"></a><span class="sd">    &quot;ignore_missing&quot;: true,</span>
</span><span id="__span-154-50"><a id="__codelineno-154-50" name="__codelineno-154-50" href="#__codelineno-154-50"></a><span class="sd">    &quot;encoding&quot;: null,</span>
</span><span id="__span-154-51"><a id="__codelineno-154-51" name="__codelineno-154-51" href="#__codelineno-154-51"></a><span class="sd">    &quot;cli&quot;: true,</span>
</span><span id="__span-154-52"><a id="__codelineno-154-52" name="__codelineno-154-52" href="#__codelineno-154-52"></a><span class="sd">    &quot;secrets_dir&quot;: &quot;/var/run/secrets&quot;,</span>
</span><span id="__span-154-53"><a id="__codelineno-154-53" name="__codelineno-154-53" href="#__codelineno-154-53"></a><span class="sd">    &quot;conf_path&quot;: [</span>
</span><span id="__span-154-54"><a id="__codelineno-154-54" name="__codelineno-154-54" href="#__codelineno-154-54"></a><span class="sd">        &quot;appconfig.toml&quot;,</span>
</span><span id="__span-154-55"><a id="__codelineno-154-55" name="__codelineno-154-55" href="#__codelineno-154-55"></a><span class="sd">        &quot;/home/user/.config/myapp/config.toml&quot;,</span>
</span><span id="__span-154-56"><a id="__codelineno-154-56" name="__codelineno-154-56" href="#__codelineno-154-56"></a><span class="sd">        &quot;/var/run/secrets/config.toml&quot;</span>
</span><span id="__span-154-57"><a id="__codelineno-154-57" name="__codelineno-154-57" href="#__codelineno-154-57"></a><span class="sd">    ],</span>
</span><span id="__span-154-58"><a id="__codelineno-154-58" name="__codelineno-154-58" href="#__codelineno-154-58"></a><span class="sd">    &quot;env_path&quot;: [</span>
</span><span id="__span-154-59"><a id="__codelineno-154-59" name="__codelineno-154-59" href="#__codelineno-154-59"></a><span class="sd">        &quot;/var/run/secrets/.my_environment&quot;</span>
</span><span id="__span-154-60"><a id="__codelineno-154-60" name="__codelineno-154-60" href="#__codelineno-154-60"></a><span class="sd">    ],</span>
</span><span id="__span-154-61"><a id="__codelineno-154-61" name="__codelineno-154-61" href="#__codelineno-154-61"></a><span class="sd">    &quot;include_inherit_parent&quot;: [],</span>
</span><span id="__span-154-62"><a id="__codelineno-154-62" name="__codelineno-154-62" href="#__codelineno-154-62"></a><span class="sd">    &quot;exclude_inherit_parent&quot;: []</span>
</span><span id="__span-154-63"><a id="__codelineno-154-63" name="__codelineno-154-63" href="#__codelineno-154-63"></a><span class="sd">}</span>
</span><span id="__span-154-64"><a id="__codelineno-154-64" name="__codelineno-154-64" href="#__codelineno-154-64"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../about/debug_mode/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Debug mode">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Debug mode
              </div>
            </div>
          </a>
        
        
          
          <a href="../pyproject/" class="md-footer__link md-footer__link--next" aria-label="Next: Настройки pyproject.toml">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Настройки pyproject.toml
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">

    <div class="md-copyright__highlight">
    Copyright &copy; 2024 Artur Filin
    </div>


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
    Material for MkDocs
    </a>
    and localized using the
    <a href="https://py-art.github.io/arfi-settings/" target="_blank" rel="noopener">
    ArFiSettings
    </a>

</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "content.code.copy", "content.tabs.link", "content.tooltips", "content.code.annotate", "content.code.select", "navigation.expand", "navigation.footer", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>