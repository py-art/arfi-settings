
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://py-art.github.io/arfi-settings/usage/config/">
      
      
        <link rel="prev" href="../../about/debug_mode/">
      
      
        <link rel="next" href="../pyproject/">
      
      
      <link rel="icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>Основные настройки - ArFiSettings</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../.." title="ArFiSettings" class="md-header__button md-logo" aria-label="ArFiSettings" data-md-component="logo">
      
  <img src="../../assets/images/logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ArFiSettings
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Основные настройки
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Выберите язык">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="ru" class="md-select__link">
              Russian
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../en/usage/config/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/py-art/arfi-settings" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Вкладки" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  ArFiSettings

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  Использование

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog/" class="md-tabs__link">
        
  
    
  
  Changelog

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ArFiSettings" class="md-nav__button md-logo" aria-label="ArFiSettings" data-md-component="logo">
      
  <img src="../../assets/images/logo-white.png" alt="logo">

    </a>
    ArFiSettings
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/py-art/arfi-settings" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ArFiSettings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            ArFiSettings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Введение
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Почему, зачем и что дальше
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/library_goals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Цели библиотеки
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Установка
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/reverse_inheritance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Обратное наследование
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/debug_mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Режим отладки
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Использование
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Использование
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Основные настройки
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Основные настройки
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#base_dir" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_DIR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config" class="md-nav__link">
    <span class="md-ellipsis">
      read_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config_force" class="md-nav__link">
    <span class="md-ellipsis">
      read_config_force
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_pyproject_toml" class="md-nav__link">
    <span class="md-ellipsis">
      read_pyproject_toml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_nested" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_nested
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config" class="md-nav__link">
    <span class="md-ellipsis">
      file_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="file_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conf_dir" class="md-nav__link">
    <span class="md-ellipsis">
      conf_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ext" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_custom_ext_handler" class="md-nav__link">
    <span class="md-ellipsis">
      conf_custom_ext_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      conf_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config" class="md-nav__link">
    <span class="md-ellipsis">
      env_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="env_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#env_file" class="md-nav__link">
    <span class="md-ellipsis">
      env_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_nested_delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      env_nested_delimiter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      env_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      env_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      env_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="model_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encoding" class="md-nav__link">
    <span class="md-ellipsis">
      encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli" class="md-nav__link">
    <span class="md-ellipsis">
      cli
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      file_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_class" class="md-nav__link">
    <span class="md-ellipsis">
      handler_class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler" class="md-nav__link">
    <span class="md-ellipsis">
      handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      handler_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#property" class="md-nav__link">
    <span class="md-ellipsis">
      Свойства (property)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Свойства (property)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#root_dir" class="md-nav__link">
    <span class="md-ellipsis">
      root_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      conf_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_path" class="md-nav__link">
    <span class="md-ellipsis">
      env_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode_dir_path" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computed_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      computed_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      parent_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyproject_toml_path" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject_toml_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inherited_params" class="md-nav__link">
    <span class="md-ellipsis">
      inherited_params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#settings_config" class="md-nav__link">
    <span class="md-ellipsis">
      settings_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pyproject/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Настройки pyproject.toml
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#base_dir" class="md-nav__link">
    <span class="md-ellipsis">
      BASE_DIR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config" class="md-nav__link">
    <span class="md-ellipsis">
      read_config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_config_force" class="md-nav__link">
    <span class="md-ellipsis">
      read_config_force
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read_pyproject_toml" class="md-nav__link">
    <span class="md-ellipsis">
      read_pyproject_toml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_nested" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_nested
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mode_dir_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config" class="md-nav__link">
    <span class="md-ellipsis">
      file_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="file_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#conf_dir" class="md-nav__link">
    <span class="md-ellipsis">
      conf_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ext" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ext
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_custom_ext_handler" class="md-nav__link">
    <span class="md-ellipsis">
      conf_custom_ext_handler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      conf_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      conf_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      conf_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      conf_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config" class="md-nav__link">
    <span class="md-ellipsis">
      env_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="env_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#env_file" class="md-nav__link">
    <span class="md-ellipsis">
      env_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_prefix_as_source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      env_prefix_as_source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_nested_delimiter" class="md-nav__link">
    <span class="md-ellipsis">
      env_nested_delimiter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_file_encoding" class="md-nav__link">
    <span class="md-ellipsis">
      env_file_encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      env_case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      env_ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="model_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case_sensitive" class="md-nav__link">
    <span class="md-ellipsis">
      case_sensitive
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ignore_missing" class="md-nav__link">
    <span class="md-ellipsis">
      ignore_missing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encoding" class="md-nav__link">
    <span class="md-ellipsis">
      encoding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cli" class="md-nav__link">
    <span class="md-ellipsis">
      cli
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets_dir" class="md-nav__link">
    <span class="md-ellipsis">
      secrets_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exclude_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      exclude_inherit_parent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#include_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      include_inherit_parent
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      file_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#env_config_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      env_config_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered_settings_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      ordered_settings_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_class" class="md-nav__link">
    <span class="md-ellipsis">
      handler_class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler" class="md-nav__link">
    <span class="md-ellipsis">
      handler
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handler_inherit_parent" class="md-nav__link">
    <span class="md-ellipsis">
      handler_inherit_parent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#property" class="md-nav__link">
    <span class="md-ellipsis">
      Свойства (property)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Свойства (property)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#root_dir" class="md-nav__link">
    <span class="md-ellipsis">
      root_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      conf_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#env_path" class="md-nav__link">
    <span class="md-ellipsis">
      env_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode_dir_path" class="md-nav__link">
    <span class="md-ellipsis">
      mode_dir_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computed_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      computed_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      parent_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nested_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      nested_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#source_mode_dir" class="md-nav__link">
    <span class="md-ellipsis">
      source_mode_dir
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pyproject_toml_path" class="md-nav__link">
    <span class="md-ellipsis">
      pyproject_toml_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inherited_params" class="md-nav__link">
    <span class="md-ellipsis">
      inherited_params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#settings_config" class="md-nav__link">
    <span class="md-ellipsis">
      settings_config
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/py-art/arfi-settings/blob/main/docs/ru/usage/config.md" title="Редактировать страницу" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="_1">Основные настройки</h1>
<h2 id="base_dir">BASE_DIR</h2>
<p>Тип: <code class="language-python highlight"><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает на базовую директорию проекта. Автоматически определяется один раз для всего проекта. Не наследуется в концепции обратного наследования. Есть возможность указать вручную для конкретного класса.</p>
<p><strong>Принцип автоматического определения</strong>:</p>
<p>При первой инициализации любого подкласса <code>ArFiSettings</code> происходит поиск в текущей директории файл <code>__init__.py</code>. Если этот файл найден, то поднимаемся на директорию выше и снова ищем файл <code>__init__.py</code>. Если такого файла нет, то поиск останавливается. Последняя директория, в которой был найден файл <code>__init__.py</code> - это будет базовая директория проекта.</p>
<p><strong>Использование</strong>:</p>
<p>Структура проекта
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>~/my-awesome-project
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>├── src
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│  └── my_awesome_project
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>│     ├── settings
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>│     │  ├── __init__.py
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>│     │  └── settings.py
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│     ├── __init__.py
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>│     └── main.py
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>└── pyproject.toml
</span></code></pre></div></p>
<p>Автоматическое определение</p>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/settings/settings.py</span><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="k">pass</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">settings.settings</span> <span class="kn">import</span> <span class="n">config</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">BASE_DIR</span><span class="p">)</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1">#&gt; /home/user/my-awesome-project/src/my_awesome_project</span>
</span></code></pre></div>
<p>Ручное указание</p>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/settings/settings.py</span><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="n">BASE_DIR</span> <span class="o">=</span> <span class="s2">&quot;~/my-awesome-project/src/my_awesome_project&quot;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span> <span class="nn">settings.settings</span> <span class="kn">import</span> <span class="n">config</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">BASE_DIR</span><span class="p">)</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="c1">#&gt; /home/user/my-awesome-project/src/my_awesome_project</span>
</span></code></pre></div>
<h2 id="read_config">read_config</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает чтение конфигурации из всех источников, кроме <code>init_kwargs</code></p>
<blockquote>
<p>При обратном наследовании этот параметр автоматически устанавливается в <code>True</code>. Для полного отключения чтения настроек используйте <code>read_config_forc=Falsee</code> в классе или в истансе класса.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<p><div class="language-py highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="n">read_config</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>
или
<div class="language-py highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="k">pass</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">_read_config</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="read_config_force">read_config_force</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Принудительно включает или отключает чтение конфигурации из всех источников, кроме <code>init_kwargs</code>. Имеет приоритет над <a href="#read_config">read_config</a>.</p>
<p><strong>Использование</strong>:</p>
<p><div class="language-py highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="n">read_config_force</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>
или
<div class="language-py highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="k">pass</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">_read_config_force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="read_pyproject_toml">read_pyproject_toml</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает чтение собственных настроек <code>arfi-settings</code> по умолчанию из файла <code>pyproject.toml</code>.</p>
<p><strong>Использование</strong>:</p>
<p><div class="language-py highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>    <span class="n">read_pyproject_toml</span> <span class="o">=</span> <span class="kc">False</span>
</span></code></pre></div>
или
<div class="language-py highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="k">pass</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">(</span><span class="n">_read_pyproject_toml</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="mode_dir">mode_dir</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>При чтении из файлов указывает из какой поддиректории читать настройки, а точнее участвует в создании пути до этой поддиректории.</li>
<li>При чтении переменных окружения может использоваться как префикс.</li>
</ol>
<p>Если не задано в явном виде, то определяется автоматически по имени атрибута в классе-родителе в концепции обратного наследования.</p>
<blockquote>
<p><strong>Заметка</strong>: Не наследуется классическим способом, потому что участвует в обратном наследовании.</p>
</blockquote>
<p>Для более глубокого понимания назначения можно почитать описание параметров <a href="#conf_path">conf_path</a> и <a href="#env_prefix_as_source_mode_dir">env_prefix_as_source_mode_dir</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>    <span class="k">pass</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="c1">#&gt; app</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="c1">#&gt; [PosixPath(&#39;config/app/config&#39;)]</span>
</span></code></pre></div>
<p>Если указать явно:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s1">&#39;my_app&#39;</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="c1">#&gt; my_app</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="c1">#&gt; [PosixPath(&#39;config/my_app/config&#39;)]</span>
</span></code></pre></div>
<p>Отключение:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>    <span class="c1"># or</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>    <span class="c1"># mode_dir = None</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="c1">#&gt; &quot;&quot; or None</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="c1">#&gt; [PosixPath(&#39;config/config&#39;)]</span>
</span></code></pre></div>
<h2 id="mode_dir_inherit_nested">mode_dir_inherit_nested</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает наследование атрибута <code>mode_dir</code> у подклассов. Настраивается именно в подклассах.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;db&quot;</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="k">class</span> <span class="nc">Postgres</span><span class="p">(</span><span class="n">Database</span><span class="p">):</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;postgres&quot;</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    <span class="n">database</span><span class="p">:</span> <span class="n">Postgres</span> <span class="o">=</span> <span class="n">Postgres</span><span class="p">()</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="c1">#&gt; db/postgres</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="c1">#&gt; [PosixPath(&#39;config/db/postgres/config&#39;)]</span>
</span></code></pre></div>
<p>Отключаем наследование:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">class</span> <span class="nc">Database</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;db&quot;</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="k">class</span> <span class="nc">Postgres</span><span class="p">(</span><span class="n">Database</span><span class="p">):</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;postgres&quot;</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>    <span class="n">mode_dir_inherit_nested</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>    <span class="n">database</span><span class="p">:</span> <span class="n">Postgres</span> <span class="o">=</span> <span class="n">Postgres</span><span class="p">()</span>
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="c1">#&gt; postgres</span>
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a><span class="c1">#&gt; [PosixPath(&#39;config/postgres/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">mode_dir_inherit_nested</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="mode_dir_inherit_parent">mode_dir_inherit_parent</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает наследование атрибута <code>mode_dir</code> от класса-родителя в концепции обратного наследования.
Настраивается в классах-детях.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>    <span class="k">pass</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="c1">#&gt; child</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="c1">#&gt; [PosixPath(&#39;config/parent/child/config&#39;)]</span>
</span></code></pre></div>
<p>Отключаем наследование:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    <span class="n">mode_dir_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="c1">#&gt; child</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">mode_dir_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="file_config">file_config</h2>
<p>Тип: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">FileConfigDict</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">FileConfigSchema</span><span class="p">()</span><span class="o">.</span><span class="n">conf_dict</span><span class="p">()</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Настройки, которые описывают правила чтения из файлов конфигурации.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="s2">&quot;settings/config&quot;</span><span class="p">,</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<h3 id="conf_dir">conf_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;config&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает из какой директории или директорий читать файлы с настройками.
Если указан список директорий, то настройки, расположенные в последней директории, будут переопределять все настройки из предыдущих.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;/opt/my_app/config&quot;</span><span class="p">],</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    <span class="p">)</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="c1">#&gt; [PosixPath(&#39;config/config&#39;), PosixPath(&#39;/opt/my_app/config/config&#39;)]</span>
</span></code></pre></div>
<p>Или</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="s2">&quot;/var/run/secrets/config&quot;</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>    <span class="p">)</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="c1">#&gt; [PosixPath(&#39;/var/run/secrets/config/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">conf_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;settings/config&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Здесь устанавливается по умолчанию для всех классов, если это не переопределено в самом классе.</li>
</ol>
<h3 id="conf_file">conf_file</h3>
<p>Тип: <code class="language-python highlight"><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;config&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Определяет название файла из которого будут читаться настройки по умолчанию в заданных директориях <code>conf_dir</code>.
При чтении настроек к этому имени файла добавляется расширение из <code>arfi_settingd.constants.CONFIG_EXT_DEFAULT</code>.
То есть, если параметр <code>conf_file</code> не имеет расширения, то происходит поиск до первого найденного файла по порядку с раширением из <code>CONFIG_EXT_DEFAULT</code> или из переданного параметра <a href="#confext">conf_ext</a> - <code>config.toml</code>, потом <code>config.yaml</code>, и т.д.
Если передано конкретное расширение, например, <code>conf_file="config.ini"</code>, то происходит поиск только по этому расширению и остальные расширения игнорируются.</p>
<blockquote>
<p><strong>Заметка</strong>: Полный путь до файла конфигурации строится следующим образом:
<a href="#BASE_DIR">BASE_DIR</a> / <a href="#conf_dir">conf_dir</a> / <a href="#mode_dir_path">mode_dir_path</a> / <a href="#conf_file">conf_file</a>[.<a href="#conf_ext">conf_ext</a>], где <code>BASE_DIR /</code> добавляется в начало пути только если <code>conf_dir</code> не является абсолютным путём.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FFileConfigDictileConfigDict</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="s2">&quot;appconfig&quot;</span><span class="p">,</span>   <span class="c1"># (1)!</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>    <span class="p">)</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="c1">#&gt; [PosixPath(&#39;config/appconfig&#39;)]</span>
</span></code></pre></div>
<ol>
<li>Будет произведён поиск по порядку до первого найденного из <code>config.toml</code>, <code>config.yaml</code>, и т.д.</li>
</ol>
<p>Указание файла с конкретным расширением:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="s2">&quot;appconfig.json&quot;</span><span class="p">,</span>   <span class="c1"># (1)!</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>    <span class="p">)</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-25-9"><a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-25-10"><a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="c1">#&gt; [PosixPath(&#39;config/appconfig.json&#39;)]</span>
</span></code></pre></div>
<ol>
<li>Поиск файла только с конкретным расширением <code>config.json</code>. Остальные файлы с именем <code>confit.toml</code>, <code>config.yaml</code> и т.д. игнорируются.</li>
</ol>
<p>Отменить чтение из файлов:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>        <span class="c1"># or</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>        <span class="c1"># conf_file = &quot;&quot;</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>    <span class="p">)</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="c1">#&gt; []</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="n">conf_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;appconfig&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Здесь устанавливается имя файла по умолчанию для всех классов из которого будут читаться настройки по умолчанию, если это не переопределено в самом классе.</li>
</ol>
<p>Отменить полностью чтение из файлов:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="n">conf_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Отменяет чтение из файлов для всех классов, но Значение, заданное в классе отменяет значение по умолчанию, заданное здесь, в <code>pyproject.toml</code></li>
</ol>
<h3 id="conf_ext">conf_ext</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[</span><span class="s2">&quot;toml&quot;</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="s2">&quot;yml&quot;</span> <span class="s2">&quot;json&quot;</span><span class="p">]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Добавляет указанные расширения к названию файла <a href="#conffile">conf_file</a> при поиске файла с настройками.
Можно указывать как список с расширениями, так и строку вида <code>"ini, toml, cfg"</code>
Можно указать пустую строку <code>conf_ext=""</code> или добавить в список пустую строку, например <code>["json", ""]</code>, для чтения файлов без расширения.
При добавлении чтения файлов без расширения, в обязательном порядке, должен быть указан обработчик файлов без расширения в параметре <a href="#conf_custom_ext_handler">conf_custom_ext_handler</a> !!!</p>
<p>Порядок расширения из списка от первого к последнему определяет поиск файлов конфигурации - файл <code>conf_file</code>.<code>conf_ext</code> с первым найденным расширение из списка будет прочитан, а остальные проигнорированы.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>        <span class="n">conf_ext</span> <span class="o">=</span> <span class="s2">&quot;cfg, ini&quot;</span><span class="p">,</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="n">conf_ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;json&quot;</span><span class="p">]</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Будут читаться файлы только с расширением <code>*.json</code>, остальные будут проигнорированы.
Значения заданные в классе - переопределяют значения по умолчания из файла <code>pyproject.toml</code></li>
</ol>
<h3 id="conf_custom_ext_handler">conf_custom_ext_handler</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Переопределяет обработчик для расширения или задаёт определённый обработчик для файлов без расширения.
Имя обработчика должно заканчиваться на <code>_ext_handler</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiHandler</span><span class="p">,</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="kn">from</span> <span class="nn">arfi_settings.types</span> <span class="kn">import</span> <span class="n">PathType</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>    <span class="k">def</span> <span class="nf">cfg_ext_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">PathType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-31-10"><a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-31-11"><a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;__case_sensitive&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">conf_case_sensitive</span>
</span><span id="__span-31-12"><a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-31-13"><a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>
</span><span id="__span-31-14"><a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>    <span class="k">def</span> <span class="nf">my_empty_ext_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="n">PathType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-31-15"><a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toml_ext_handler</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</span><span id="__span-31-16"><a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-31-17"><a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-31-18"><a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a>
</span><span id="__span-31-19"><a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a>
</span><span id="__span-31-20"><a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-31-21"><a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a>    <span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span><span id="__span-31-22"><a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-31-23"><a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;asd&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;cfg&quot;</span><span class="p">],</span>      <span class="c1"># (1)!</span>
</span><span id="__span-31-24"><a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a>        <span class="n">conf_custom_ext_handler</span><span class="o">=</span><span class="p">{</span>         <span class="c1"># (2)!</span>
</span><span id="__span-31-25"><a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a>            <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="s2">&quot;my_empty_ext_handler&quot;</span><span class="p">,</span>   <span class="c1"># (3)!</span>
</span><span id="__span-31-26"><a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a>            <span class="s2">&quot;asd&quot;</span><span class="p">:</span> <span class="s2">&quot;toml&quot;</span><span class="p">,</span>                <span class="c1"># (4)!</span>
</span><span id="__span-31-27"><a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a>        <span class="p">},</span>
</span><span id="__span-31-28"><a id="__codelineno-31-28" name="__codelineno-31-28" href="#__codelineno-31-28"></a>    <span class="p">)</span>
</span><span id="__span-31-29"><a id="__codelineno-31-29" name="__codelineno-31-29" href="#__codelineno-31-29"></a>
</span><span id="__span-31-30"><a id="__codelineno-31-30" name="__codelineno-31-30" href="#__codelineno-31-30"></a>
</span><span id="__span-31-31"><a id="__codelineno-31-31" name="__codelineno-31-31" href="#__codelineno-31-31"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-31-32"><a id="__codelineno-31-32" name="__codelineno-31-32" href="#__codelineno-31-32"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">file_config</span><span class="p">)</span>
</span><span id="__span-31-33"><a id="__codelineno-31-33" name="__codelineno-31-33" href="#__codelineno-31-33"></a><span class="c1">#&gt; {&#39;conf_ext&#39;: [&#39;asd&#39;, &#39;&#39;, &#39;cfg&#39;], &#39;conf_custom_ext_handler&#39;: {&#39;&#39;: &#39;my_empty_ext_handler&#39;, &#39;asd&#39;: &#39;toml&#39;}}</span>
</span></code></pre></div>
<ol>
<li>Задаём порядок поиска файлов с расширениями. Если существуют все 3 файла <code>config.asd</code>, <code>config</code> и <code>config.cfg</code>, то <code>config.asd</code> будет прочитан, а остальные проигнорированы.</li>
<li>Для расширения <code>cfg</code> обработчик явно можно не указывать, так как имя обработчика заканчивается на <code>_ext_handler</code>. Но можно и явно указать, например <code>{"cfg": "cfg_ext_handler"}</code> или <code>{"cfg": "cfg"}</code></li>
<li>Здесь указываем обработчик для файлов без расширения. Вместо длинного названия <code>my_empty_ext_handler</code> можно написать коротко - <code>my_empty</code>.</li>
<li>Здесь указываем, что все файлы с расширением <code>*.asd</code> должны быть обработаны как <code>toml</code>.</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="n">conf_custom_ext_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;yaml&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Здесь говорим, что все файлы без расширения читать как <code>yaml</code>-файлы.</li>
</ol>
<h3 id="conf_file_encoding">conf_file_encoding</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span>  <span class="c1"># utf-8</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Задаёт кодировку при чтении файлов конфигурации. Применяется сразу ко всем файлам, указанным в <a href="#conf_file">conf_file</a></p>
<p><strong>Использование</strong>:
<div class="language-py highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>    <span class="p">)</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="n">conf_file_encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cp1251&quot;</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Задаём кодировку <code>cp1251</code> для всех файлов конфигурации</li>
</ol>
<h3 id="conf_case_sensitive">conf_case_sensitive</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>По умолчанию при чтении из файлов конфигурации параметры читаются как регистро-независимые. Но сначала ищется точное совпадение. Если точное совпадение не найдено, то возвращается найденное значение в нижнем регистре, если и оно не найдено, то возвращается первое найденное значение, приведённое к нижнему регистру.</p>
<p><strong>Использование</strong>:</p>
<ul>
<li>Поведение по умолчанию</li>
</ul>
<div class="language-toml highlight"><span class="filename">config/config.toml</span><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">MY_PARAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MY_PARAM_UPPER&quot;</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="n">My_Param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;My_Param_exactly_match&quot;</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="n">my_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_param_lower&quot;</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>    <span class="n">My_Param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>        <span class="n">conf_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>    <span class="p">)</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">My_Param</span><span class="p">)</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="c1">#&gt; My_Param_exactly_match</span>
</span></code></pre></div>
<ol>
<li>
<p>Значение по умолчанию</p>
</li>
<li>
<p>Если отсутствует точное совпадение</p>
</li>
</ol>
<div class="language-toml highlight"><span class="filename">config/config.toml</span><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="n">MY_PARAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MY_PARAM_UPPER&quot;</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="n">my_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_param_lower&quot;</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a>    <span class="n">My_Param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a>        <span class="n">conf_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a>    <span class="p">)</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">My_Param</span><span class="p">)</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="c1">#&gt; my_param_lower</span>
</span></code></pre></div>
<ol>
<li>
<p>Значение по умолчанию</p>
</li>
<li>
<p>Если отсутствует точное совпадение, но поиск чувствительный к регистру</p>
</li>
</ol>
<div class="language-toml highlight"><span class="filename">config/config.toml</span><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="n">MY_PARAM</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MY_PARAM_UPPER&quot;</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="n">my_param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_param_lower&quot;</span>
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>    <span class="n">My_Param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>        <span class="n">conf_case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>    <span class="p">)</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">My_Param</span><span class="p">)</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="sd">  ...</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="sd">pydantic_core._pydantic_core.ValidationError: 1 validation error for AppConfig</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="sd">My_Param</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="sd">  Field required [type=missing, input_value={}, input_type=dict]</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div>
<ol>
<li>Чувствительный к регистру поиск. Требуется точное совпадение</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="n">conf_case_sensitive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Читать только точное совпадение имён (чувствительное к регистру) во всех файлах конфигурации</li>
</ol>
<h3 id="conf_ignore_missing">conf_ignore_missing</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>По умолчанию, если файлы, заданные в <a href="#conf_file">conf_file</a> не существуют, то их чтение игнорируется.  Но если требуется, чтоб файл или файлы обязательно присутствовали, то необходимо параметр <code>conf_ignore_missing</code> установить в значение <code>False</code>.
Так же можно использовать в качестве своеобразного отладчика - в сообщении об ошибке будет указано какой именно файл и по какому пути отсутствует.</p>
<p><strong>Использование</strong>:</p>
<p>Поведение по умолчанию. Отсутствие файла <code>config/appconfig.yml</code> не приводит к ошибке
<div class="language-py highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a>        <span class="n">conf_ignore_missing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a>    <span class="p">)</span>
</span><span id="__span-42-10"><a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a>
</span><span id="__span-42-11"><a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a>
</span><span id="__span-42-12"><a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-42-13"><a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-42-14"><a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="c1">#&gt; default_param</span>
</span></code></pre></div></p>
<ol>
<li>Значение по умолчанию. Отсутствие файлов игнорируется.</li>
</ol>
<p>При отсутствии файла <code>config/appconfig.yml</code> возбуждается ошибка
<div class="language-py highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>        <span class="n">conf_ignore_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a>    <span class="p">)</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="sd">    ...</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="sd">arfi_settings.errors.ArFiSettingsError: File not found: `/home/user/my_awesome_project/config/appconfig.yml`</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div></p>
<ol>
<li>Требуется обязательное наличие всех файлов, указанных в <code>conf_file</code>!</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="n">conf_ignore_missing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="w">  </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Все файлы конфигурации должны существовать</li>
</ol>
<h3 id="conf_exclude_inherit_parent">conf_exclude_inherit_parent</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование определённых собственных настроек от класса-родителя
Применяется только при чтении файлов конфигурации.</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя все настройки, кроме <code>conf_dir</code> и <code>conf_file</code>
<div class="language-py highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a>            <span class="s2">&quot;conf_dir&quot;</span><span class="p">,</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a>        <span class="p">],</span>
</span><span id="__span-45-10"><a id="__codelineno-45-10" name="__codelineno-45-10" href="#__codelineno-45-10"></a>    <span class="p">)</span>
</span><span id="__span-45-11"><a id="__codelineno-45-11" name="__codelineno-45-11" href="#__codelineno-45-11"></a>
</span><span id="__span-45-12"><a id="__codelineno-45-12" name="__codelineno-45-12" href="#__codelineno-45-12"></a>
</span><span id="__span-45-13"><a id="__codelineno-45-13" name="__codelineno-45-13" href="#__codelineno-45-13"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-45-14"><a id="__codelineno-45-14" name="__codelineno-45-14" href="#__codelineno-45-14"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-45-15"><a id="__codelineno-45-15" name="__codelineno-45-15" href="#__codelineno-45-15"></a>
</span><span id="__span-45-16"><a id="__codelineno-45-16" name="__codelineno-45-16" href="#__codelineno-45-16"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-45-17"><a id="__codelineno-45-17" name="__codelineno-45-17" href="#__codelineno-45-17"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-45-18"><a id="__codelineno-45-18" name="__codelineno-45-18" href="#__codelineno-45-18"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-45-19"><a id="__codelineno-45-19" name="__codelineno-45-19" href="#__codelineno-45-19"></a>    <span class="p">)</span>
</span><span id="__span-45-20"><a id="__codelineno-45-20" name="__codelineno-45-20" href="#__codelineno-45-20"></a>
</span><span id="__span-45-21"><a id="__codelineno-45-21" name="__codelineno-45-21" href="#__codelineno-45-21"></a>
</span><span id="__span-45-22"><a id="__codelineno-45-22" name="__codelineno-45-22" href="#__codelineno-45-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-45-23"><a id="__codelineno-45-23" name="__codelineno-45-23" href="#__codelineno-45-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-45-24"><a id="__codelineno-45-24" name="__codelineno-45-24" href="#__codelineno-45-24"></a><span class="c1">#&gt; None</span>
</span><span id="__span-45-25"><a id="__codelineno-45-25" name="__codelineno-45-25" href="#__codelineno-45-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-45-26"><a id="__codelineno-45-26" name="__codelineno-45-26" href="#__codelineno-45-26"></a><span class="c1">#&gt; appconfig.yml</span>
</span><span id="__span-45-27"><a id="__codelineno-45-27" name="__codelineno-45-27" href="#__codelineno-45-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-45-28"><a id="__codelineno-45-28" name="__codelineno-45-28" href="#__codelineno-45-28"></a><span class="c1">#&gt; [PosixPath(&#39;appconfig.yml&#39;)]</span>
</span><span id="__span-45-29"><a id="__codelineno-45-29" name="__codelineno-45-29" href="#__codelineno-45-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-45-30"><a id="__codelineno-45-30" name="__codelineno-45-30" href="#__codelineno-45-30"></a><span class="c1">#&gt; config</span>
</span><span id="__span-45-31"><a id="__codelineno-45-31" name="__codelineno-45-31" href="#__codelineno-45-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-45-32"><a id="__codelineno-45-32" name="__codelineno-45-32" href="#__codelineno-45-32"></a><span class="c1">#&gt; config</span>
</span><span id="__span-45-33"><a id="__codelineno-45-33" name="__codelineno-45-33" href="#__codelineno-45-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-45-34"><a id="__codelineno-45-34" name="__codelineno-45-34" href="#__codelineno-45-34"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div></p>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>conf_exclude_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>conf_exclude_inherit_parent</code>!!! Для этого его тоже нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>            <span class="s2">&quot;conf_dir&quot;</span><span class="p">,</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>        <span class="p">],</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>    <span class="p">)</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a>
</span><span id="__span-46-10"><a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>
</span><span id="__span-46-11"><a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-46-12"><a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-46-13"><a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>
</span><span id="__span-46-14"><a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-46-15"><a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-46-16"><a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig.yml&quot;</span><span class="p">,</span>
</span><span id="__span-46-17"><a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-46-18"><a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-46-19"><a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a>        <span class="p">],</span>
</span><span id="__span-46-20"><a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a>    <span class="p">)</span>
</span><span id="__span-46-21"><a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a>
</span><span id="__span-46-22"><a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span><span class="s2">&quot;conf_file&quot;</span><span class="p">,</span><span class="w">                    </span><span class="c1"># (1)!</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span><span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span><span class="w">  </span><span class="c1"># (2)!</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="p">]</span>
</span></code></pre></div>
<ol>
<li>Не наследовать название файла, из которого происходит чтение настроек по умолчанию</li>
<li>Не наследовать исключённые параметры</li>
</ol>
<h3 id="conf_include_inherit_parent">conf_include_inherit_parent</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование от класса-родителя всех собственных настроек, кроме указанных.
Применяется только при чтении файлов конфигураций.</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя только расширения при чтении файлов:
<div class="language-py highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a>        <span class="p">],</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a>    <span class="p">)</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-48-13"><a id="__codelineno-48-13" name="__codelineno-48-13" href="#__codelineno-48-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-48-14"><a id="__codelineno-48-14" name="__codelineno-48-14" href="#__codelineno-48-14"></a>
</span><span id="__span-48-15"><a id="__codelineno-48-15" name="__codelineno-48-15" href="#__codelineno-48-15"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-48-16"><a id="__codelineno-48-16" name="__codelineno-48-16" href="#__codelineno-48-16"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-48-17"><a id="__codelineno-48-17" name="__codelineno-48-17" href="#__codelineno-48-17"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="s2">&quot;appconfig&quot;</span><span class="p">,</span>
</span><span id="__span-48-18"><a id="__codelineno-48-18" name="__codelineno-48-18" href="#__codelineno-48-18"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-48-19"><a id="__codelineno-48-19" name="__codelineno-48-19" href="#__codelineno-48-19"></a>    <span class="p">)</span>
</span><span id="__span-48-20"><a id="__codelineno-48-20" name="__codelineno-48-20" href="#__codelineno-48-20"></a>
</span><span id="__span-48-21"><a id="__codelineno-48-21" name="__codelineno-48-21" href="#__codelineno-48-21"></a>
</span><span id="__span-48-22"><a id="__codelineno-48-22" name="__codelineno-48-22" href="#__codelineno-48-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-48-23"><a id="__codelineno-48-23" name="__codelineno-48-23" href="#__codelineno-48-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-48-24"><a id="__codelineno-48-24" name="__codelineno-48-24" href="#__codelineno-48-24"></a><span class="c1">#&gt; None</span>
</span><span id="__span-48-25"><a id="__codelineno-48-25" name="__codelineno-48-25" href="#__codelineno-48-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-48-26"><a id="__codelineno-48-26" name="__codelineno-48-26" href="#__codelineno-48-26"></a><span class="c1">#&gt; appconfig</span>
</span><span id="__span-48-27"><a id="__codelineno-48-27" name="__codelineno-48-27" href="#__codelineno-48-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-48-28"><a id="__codelineno-48-28" name="__codelineno-48-28" href="#__codelineno-48-28"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-48-29"><a id="__codelineno-48-29" name="__codelineno-48-29" href="#__codelineno-48-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-48-30"><a id="__codelineno-48-30" name="__codelineno-48-30" href="#__codelineno-48-30"></a><span class="c1">#&gt; [PosixPath(&#39;appconfig&#39;)]</span>
</span><span id="__span-48-31"><a id="__codelineno-48-31" name="__codelineno-48-31" href="#__codelineno-48-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_dir</span><span class="p">)</span>
</span><span id="__span-48-32"><a id="__codelineno-48-32" name="__codelineno-48-32" href="#__codelineno-48-32"></a><span class="c1">#&gt; config</span>
</span><span id="__span-48-33"><a id="__codelineno-48-33" name="__codelineno-48-33" href="#__codelineno-48-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file</span><span class="p">)</span>
</span><span id="__span-48-34"><a id="__codelineno-48-34" name="__codelineno-48-34" href="#__codelineno-48-34"></a><span class="c1">#&gt; config</span>
</span><span id="__span-48-35"><a id="__codelineno-48-35" name="__codelineno-48-35" href="#__codelineno-48-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-48-36"><a id="__codelineno-48-36" name="__codelineno-48-36" href="#__codelineno-48-36"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-48-37"><a id="__codelineno-48-37" name="__codelineno-48-37" href="#__codelineno-48-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-48-38"><a id="__codelineno-48-38" name="__codelineno-48-38" href="#__codelineno-48-38"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div></p>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>conf_include_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>conf_include_inherit_parent</code>!!! Для этого его нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>        <span class="p">],</span>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a>        <span class="p">],</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a>    <span class="p">)</span>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>
</span><span id="__span-49-11"><a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a>
</span><span id="__span-49-12"><a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-49-13"><a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-49-14"><a id="__codelineno-49-14" name="__codelineno-49-14" href="#__codelineno-49-14"></a>
</span><span id="__span-49-15"><a id="__codelineno-49-15" name="__codelineno-49-15" href="#__codelineno-49-15"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-49-16"><a id="__codelineno-49-16" name="__codelineno-49-16" href="#__codelineno-49-16"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-49-17"><a id="__codelineno-49-17" name="__codelineno-49-17" href="#__codelineno-49-17"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-49-18"><a id="__codelineno-49-18" name="__codelineno-49-18" href="#__codelineno-49-18"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-49-19"><a id="__codelineno-49-19" name="__codelineno-49-19" href="#__codelineno-49-19"></a>            <span class="s2">&quot;conf_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-49-20"><a id="__codelineno-49-20" name="__codelineno-49-20" href="#__codelineno-49-20"></a>        <span class="p">],</span>
</span><span id="__span-49-21"><a id="__codelineno-49-21" name="__codelineno-49-21" href="#__codelineno-49-21"></a>    <span class="p">)</span>
</span><span id="__span-49-22"><a id="__codelineno-49-22" name="__codelineno-49-22" href="#__codelineno-49-22"></a>
</span><span id="__span-49-23"><a id="__codelineno-49-23" name="__codelineno-49-23" href="#__codelineno-49-23"></a>
</span><span id="__span-49-24"><a id="__codelineno-49-24" name="__codelineno-49-24" href="#__codelineno-49-24"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-49-25"><a id="__codelineno-49-25" name="__codelineno-49-25" href="#__codelineno-49-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-49-26"><a id="__codelineno-49-26" name="__codelineno-49-26" href="#__codelineno-49-26"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-49-27"><a id="__codelineno-49-27" name="__codelineno-49-27" href="#__codelineno-49-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-49-28"><a id="__codelineno-49-28" name="__codelineno-49-28" href="#__codelineno-49-28"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-49-29"><a id="__codelineno-49-29" name="__codelineno-49-29" href="#__codelineno-49-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-49-30"><a id="__codelineno-49-30" name="__codelineno-49-30" href="#__codelineno-49-30"></a><span class="c1">#&gt; None</span>
</span><span id="__span-49-31"><a id="__codelineno-49-31" name="__codelineno-49-31" href="#__codelineno-49-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-49-32"><a id="__codelineno-49-32" name="__codelineno-49-32" href="#__codelineno-49-32"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span></code></pre></div>
<blockquote>
<p><strong>Важно</strong>: Параметр <code>conf_exclude_inherit_parent</code> имеет приоритет над <code>conf_include_inherit_parent</code> и тоже наследуется! Если какой-либо параметр указан и там и там, то этот параметр НЕ будет включен в список наследуемых:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a>        <span class="p">],</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a>        <span class="p">],</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a>    <span class="p">)</span>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-50-17"><a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a>
</span><span id="__span-50-18"><a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-50-19"><a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-50-20"><a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-50-21"><a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-50-22"><a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a>            <span class="s2">&quot;conf_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-50-23"><a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a>        <span class="p">],</span>
</span><span id="__span-50-24"><a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-50-25"><a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-50-26"><a id="__codelineno-50-26" name="__codelineno-50-26" href="#__codelineno-50-26"></a>        <span class="p">],</span>
</span><span id="__span-50-27"><a id="__codelineno-50-27" name="__codelineno-50-27" href="#__codelineno-50-27"></a>    <span class="p">)</span>
</span><span id="__span-50-28"><a id="__codelineno-50-28" name="__codelineno-50-28" href="#__codelineno-50-28"></a>
</span><span id="__span-50-29"><a id="__codelineno-50-29" name="__codelineno-50-29" href="#__codelineno-50-29"></a>
</span><span id="__span-50-30"><a id="__codelineno-50-30" name="__codelineno-50-30" href="#__codelineno-50-30"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-50-31"><a id="__codelineno-50-31" name="__codelineno-50-31" href="#__codelineno-50-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-50-32"><a id="__codelineno-50-32" name="__codelineno-50-32" href="#__codelineno-50-32"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-50-33"><a id="__codelineno-50-33" name="__codelineno-50-33" href="#__codelineno-50-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-50-34"><a id="__codelineno-50-34" name="__codelineno-50-34" href="#__codelineno-50-34"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-50-35"><a id="__codelineno-50-35" name="__codelineno-50-35" href="#__codelineno-50-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-50-36"><a id="__codelineno-50-36" name="__codelineno-50-36" href="#__codelineno-50-36"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-50-37"><a id="__codelineno-50-37" name="__codelineno-50-37" href="#__codelineno-50-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-50-38"><a id="__codelineno-50-38" name="__codelineno-50-38" href="#__codelineno-50-38"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;yaml&#39;, &#39;yml&#39;, &#39;json&#39;]</span>
</span></code></pre></div>
<p>Чтоб отключить такое поведение и добиться того же результата, что и в примере выше, нужно сделать следующее:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-51-6"><a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-51-7"><a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-51-8"><a id="__codelineno-51-8" name="__codelineno-51-8" href="#__codelineno-51-8"></a>        <span class="p">],</span>
</span><span id="__span-51-9"><a id="__codelineno-51-9" name="__codelineno-51-9" href="#__codelineno-51-9"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-51-10"><a id="__codelineno-51-10" name="__codelineno-51-10" href="#__codelineno-51-10"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-51-11"><a id="__codelineno-51-11" name="__codelineno-51-11" href="#__codelineno-51-11"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>  <span class="c1"># (1)!</span>
</span><span id="__span-51-12"><a id="__codelineno-51-12" name="__codelineno-51-12" href="#__codelineno-51-12"></a>        <span class="p">],</span>
</span><span id="__span-51-13"><a id="__codelineno-51-13" name="__codelineno-51-13" href="#__codelineno-51-13"></a>    <span class="p">)</span>
</span><span id="__span-51-14"><a id="__codelineno-51-14" name="__codelineno-51-14" href="#__codelineno-51-14"></a>
</span><span id="__span-51-15"><a id="__codelineno-51-15" name="__codelineno-51-15" href="#__codelineno-51-15"></a>
</span><span id="__span-51-16"><a id="__codelineno-51-16" name="__codelineno-51-16" href="#__codelineno-51-16"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-51-17"><a id="__codelineno-51-17" name="__codelineno-51-17" href="#__codelineno-51-17"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-51-18"><a id="__codelineno-51-18" name="__codelineno-51-18" href="#__codelineno-51-18"></a>
</span><span id="__span-51-19"><a id="__codelineno-51-19" name="__codelineno-51-19" href="#__codelineno-51-19"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-51-20"><a id="__codelineno-51-20" name="__codelineno-51-20" href="#__codelineno-51-20"></a>        <span class="n">conf_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-51-21"><a id="__codelineno-51-21" name="__codelineno-51-21" href="#__codelineno-51-21"></a>        <span class="n">conf_ext</span><span class="o">=</span><span class="s2">&quot;toml, json&quot;</span><span class="p">,</span>
</span><span id="__span-51-22"><a id="__codelineno-51-22" name="__codelineno-51-22" href="#__codelineno-51-22"></a>        <span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-51-23"><a id="__codelineno-51-23" name="__codelineno-51-23" href="#__codelineno-51-23"></a>            <span class="s2">&quot;conf_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-51-24"><a id="__codelineno-51-24" name="__codelineno-51-24" href="#__codelineno-51-24"></a>        <span class="p">],</span>
</span><span id="__span-51-25"><a id="__codelineno-51-25" name="__codelineno-51-25" href="#__codelineno-51-25"></a>        <span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-51-26"><a id="__codelineno-51-26" name="__codelineno-51-26" href="#__codelineno-51-26"></a>            <span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span>
</span><span id="__span-51-27"><a id="__codelineno-51-27" name="__codelineno-51-27" href="#__codelineno-51-27"></a>        <span class="p">],</span>
</span><span id="__span-51-28"><a id="__codelineno-51-28" name="__codelineno-51-28" href="#__codelineno-51-28"></a>    <span class="p">)</span>
</span><span id="__span-51-29"><a id="__codelineno-51-29" name="__codelineno-51-29" href="#__codelineno-51-29"></a>
</span><span id="__span-51-30"><a id="__codelineno-51-30" name="__codelineno-51-30" href="#__codelineno-51-30"></a>
</span><span id="__span-51-31"><a id="__codelineno-51-31" name="__codelineno-51-31" href="#__codelineno-51-31"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-51-32"><a id="__codelineno-51-32" name="__codelineno-51-32" href="#__codelineno-51-32"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-51-33"><a id="__codelineno-51-33" name="__codelineno-51-33" href="#__codelineno-51-33"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-51-34"><a id="__codelineno-51-34" name="__codelineno-51-34" href="#__codelineno-51-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-51-35"><a id="__codelineno-51-35" name="__codelineno-51-35" href="#__codelineno-51-35"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span><span id="__span-51-36"><a id="__codelineno-51-36" name="__codelineno-51-36" href="#__codelineno-51-36"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>
</span><span id="__span-51-37"><a id="__codelineno-51-37" name="__codelineno-51-37" href="#__codelineno-51-37"></a><span class="c1">#&gt; None</span>
</span><span id="__span-51-38"><a id="__codelineno-51-38" name="__codelineno-51-38" href="#__codelineno-51-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ext</span><span class="p">)</span>
</span><span id="__span-51-39"><a id="__codelineno-51-39" name="__codelineno-51-39" href="#__codelineno-51-39"></a><span class="c1">#&gt; [&#39;toml&#39;, &#39;json&#39;]</span>
</span></code></pre></div>
<ol>
<li>Исключаем из наследования <code>conf_exclude_inherit_parent</code> параметр.</li>
</ol>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="n">conf_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="w">    </span><span class="s2">&quot;conf_ext&quot;</span><span class="p">,</span><span class="w">                    </span><span class="c1"># (1)!</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="p">]</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="n">conf_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="w">    </span><span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="p">]</span>
</span></code></pre></div>
<ol>
<li>Наследовать только расширения файлов</li>
</ol>
<h2 id="env_config">env_config</h2>
<p>Тип: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">EnvConfigDict</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">EnvConfigSchema</span><span class="p">()</span><span class="o">.</span><span class="n">env_dict</span><span class="p">()</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Настройки, которые описывают правила чтения переменных окружения.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>        <span class="n">env_nested_delimiter</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<h3 id="env_file">env_file</h3>
<p>Тип: <code class="language-python highlight"><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;.env&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Файл или список файлов из которых будут читаться переменные окружения. Если указан список файлов, то значения, указанные в последнем файле из этого списка, будут переопределять переменные, указанные в предыдущих файлах. Файлы можно указывать строкой, через запятую.</p>
<p><strong>Поиск файлов</strong>:</p>
<p>Сначала происходит поиск файла в главной директории проекта <a href="#root_dir">root_dir</a>. Если файл не найден, то поиск происходит в базовой директории проекта <a href="#BASE_DIR">BASE_DIR</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-54-6"><a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>        <span class="n">env_file</span> <span class="o">=</span> <span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-54-7"><a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<ul>
<li>Указание нескольких файлов
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="n">env_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;.env&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.env.local&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;.env.production&quot;</span><span class="p">]</span>
</span></code></pre></div></li>
<li>Отключение чтения переменных окружения из файла
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="n">env_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
</span></code></pre></div></li>
</ul>
<h3 id="env_prefix">env_prefix</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет указанное значение в начало имени переменной.</p>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>APP_NAME=&quot;My Awesome App&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>    <span class="n">NAME</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a>        <span class="n">env_prefix</span> <span class="o">=</span> <span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a>    <span class="p">)</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">NAME</span><span class="p">)</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="c1">#&gt; My Awesome App</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="n">env_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;MyPrefix--&quot;</span>
</span></code></pre></div>
<h3 id="env_prefix_as_mode_dir">env_prefix_as_mode_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет <a href="#computed_mode_dir">computed_mode_dir</a> - вычисляемое значение параметра <a href="#mode_dir">mode_dir</a> в начало имени переменной.</p>
<blockquote>
<p><strong>Внимание</strong>: Переопределяет значение, указанное в <a href="#env_prefix">env_prefix</a> !!!</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>PARENT_NESTED_APP_NAME=&quot;My Application Name&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested&quot;</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-61-14"><a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a>
</span><span id="__span-61-15"><a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-61-16"><a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-61-17"><a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a>        <span class="n">env_prefix_as_mode_dir</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-61-18"><a id="__codelineno-61-18" name="__codelineno-61-18" href="#__codelineno-61-18"></a>    <span class="p">)</span>
</span><span id="__span-61-19"><a id="__codelineno-61-19" name="__codelineno-61-19" href="#__codelineno-61-19"></a>
</span><span id="__span-61-20"><a id="__codelineno-61-20" name="__codelineno-61-20" href="#__codelineno-61-20"></a>
</span><span id="__span-61-21"><a id="__codelineno-61-21" name="__codelineno-61-21" href="#__codelineno-61-21"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-61-22"><a id="__codelineno-61-22" name="__codelineno-61-22" href="#__codelineno-61-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-61-23"><a id="__codelineno-61-23" name="__codelineno-61-23" href="#__codelineno-61-23"></a><span class="c1">#&gt; nested/app</span>
</span><span id="__span-61-24"><a id="__codelineno-61-24" name="__codelineno-61-24" href="#__codelineno-61-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-61-25"><a id="__codelineno-61-25" name="__codelineno-61-25" href="#__codelineno-61-25"></a><span class="c1">#&gt; parent/nested/app</span>
</span><span id="__span-61-26"><a id="__codelineno-61-26" name="__codelineno-61-26" href="#__codelineno-61-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-61-27"><a id="__codelineno-61-27" name="__codelineno-61-27" href="#__codelineno-61-27"></a><span class="c1">#&gt; parent_nested_app_</span>
</span><span id="__span-61-28"><a id="__codelineno-61-28" name="__codelineno-61-28" href="#__codelineno-61-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-61-29"><a id="__codelineno-61-29" name="__codelineno-61-29" href="#__codelineno-61-29"></a><span class="c1">#&gt; My Application Name</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="n">env_prefix_as_mode_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_prefix_as_nested_mode_dir">env_prefix_as_nested_mode_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет <a href="#mode_dir">mode_dir</a> в начало имени переменной.</p>
<blockquote>
<p><strong>Внимание</strong>: Переопределяет значение, указанное в <a href="#env_prefix">env_prefix</a> и в <a href="#env_prefix_as_mode_dir">env_prefix_as_mode_dir</a> !!!</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>NESTED_APP_NAME=&quot;My Application Name&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested&quot;</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a>
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a>
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a>        <span class="n">env_prefix_as_nested_mode_dir</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a>    <span class="p">)</span>
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a>
</span><span id="__span-64-20"><a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a>
</span><span id="__span-64-21"><a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-64-22"><a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-64-23"><a id="__codelineno-64-23" name="__codelineno-64-23" href="#__codelineno-64-23"></a><span class="c1">#&gt; nested/app</span>
</span><span id="__span-64-24"><a id="__codelineno-64-24" name="__codelineno-64-24" href="#__codelineno-64-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">nested_mode_dir</span><span class="p">)</span>
</span><span id="__span-64-25"><a id="__codelineno-64-25" name="__codelineno-64-25" href="#__codelineno-64-25"></a><span class="c1">#&gt; nested</span>
</span><span id="__span-64-26"><a id="__codelineno-64-26" name="__codelineno-64-26" href="#__codelineno-64-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-64-27"><a id="__codelineno-64-27" name="__codelineno-64-27" href="#__codelineno-64-27"></a><span class="c1">#&gt; nested_app_</span>
</span><span id="__span-64-28"><a id="__codelineno-64-28" name="__codelineno-64-28" href="#__codelineno-64-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-64-29"><a id="__codelineno-64-29" name="__codelineno-64-29" href="#__codelineno-64-29"></a><span class="c1">#&gt; My Application Name</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="n">env_prefix_as_nested_mode_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_prefix_as_source_mode_dir">env_prefix_as_source_mode_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При поиске переменных окружение подставляет <a href="#mode_dir">mode_dir</a> в начало имени переменной.</p>
<blockquote>
<p><strong>Внимание</strong>: Переопределяет значение, указанное в <a href="#env_prefix">env_prefix</a>, <a href="#env_prefix_as_mode_dir">env_prefix_as_mode_dir</a> и в <a href="#env_prefix_as_nested_mode_dir">env_prefix_as_nested_mode_dir</a>!!!</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>APP_NAME=&quot;My Application Name&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested&quot;</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a>
</span><span id="__span-67-11"><a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a>
</span><span id="__span-67-12"><a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-67-13"><a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-67-14"><a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a>
</span><span id="__span-67-15"><a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-67-16"><a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-67-17"><a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a>        <span class="n">env_prefix_as_source_mode_dir</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-67-18"><a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a>    <span class="p">)</span>
</span><span id="__span-67-19"><a id="__codelineno-67-19" name="__codelineno-67-19" href="#__codelineno-67-19"></a>
</span><span id="__span-67-20"><a id="__codelineno-67-20" name="__codelineno-67-20" href="#__codelineno-67-20"></a>
</span><span id="__span-67-21"><a id="__codelineno-67-21" name="__codelineno-67-21" href="#__codelineno-67-21"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-67-22"><a id="__codelineno-67-22" name="__codelineno-67-22" href="#__codelineno-67-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mode_dir</span><span class="p">)</span>
</span><span id="__span-67-23"><a id="__codelineno-67-23" name="__codelineno-67-23" href="#__codelineno-67-23"></a><span class="c1">#&gt; nested/app</span>
</span><span id="__span-67-24"><a id="__codelineno-67-24" name="__codelineno-67-24" href="#__codelineno-67-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">source_mode_dir</span><span class="p">)</span>
</span><span id="__span-67-25"><a id="__codelineno-67-25" name="__codelineno-67-25" href="#__codelineno-67-25"></a><span class="c1">#&gt; app</span>
</span><span id="__span-67-26"><a id="__codelineno-67-26" name="__codelineno-67-26" href="#__codelineno-67-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-67-27"><a id="__codelineno-67-27" name="__codelineno-67-27" href="#__codelineno-67-27"></a><span class="c1">#&gt; app_</span>
</span><span id="__span-67-28"><a id="__codelineno-67-28" name="__codelineno-67-28" href="#__codelineno-67-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-67-29"><a id="__codelineno-67-29" name="__codelineno-67-29" href="#__codelineno-67-29"></a><span class="c1">#&gt; My Application Name</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="n">env_prefix_as_source_mode_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_nested_delimiter">env_nested_delimiter</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>При классическом наследовании если классы наследуются от <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code> - то в названии переменной окружения при множественном вложении используется разделитель <code>__</code>, который отделяет имена атрибутов или их алиасы друг от друга.</p>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a>NAME=&quot;Travel map&quot;
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a>COUNTRY__NAME=&quot;Russia&quot;
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a>COUNTRY__CITY__NAME=&quot;Moscow&quot;
</span><span id="__span-69-4"><a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>COUNTRY__CITY__STREET__NAME=&quot;Arbat Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">AliasChoices</span><span class="p">,</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>
</span><span id="__span-70-4"><a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a>
</span><span id="__span-70-5"><a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a><span class="k">class</span> <span class="nc">Street</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-70-6"><a id="__codelineno-70-6" name="__codelineno-70-6" href="#__codelineno-70-6"></a>    <span class="n">short_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">validation_alias</span><span class="o">=</span><span class="n">AliasChoices</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;StName&quot;</span><span class="p">,</span> <span class="s2">&quot;street_name&quot;</span><span class="p">))</span>
</span><span id="__span-70-7"><a id="__codelineno-70-7" name="__codelineno-70-7" href="#__codelineno-70-7"></a>
</span><span id="__span-70-8"><a id="__codelineno-70-8" name="__codelineno-70-8" href="#__codelineno-70-8"></a>
</span><span id="__span-70-9"><a id="__codelineno-70-9" name="__codelineno-70-9" href="#__codelineno-70-9"></a><span class="k">class</span> <span class="nc">City</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-70-10"><a id="__codelineno-70-10" name="__codelineno-70-10" href="#__codelineno-70-10"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-70-11"><a id="__codelineno-70-11" name="__codelineno-70-11" href="#__codelineno-70-11"></a>    <span class="n">street</span><span class="p">:</span> <span class="n">Street</span>
</span><span id="__span-70-12"><a id="__codelineno-70-12" name="__codelineno-70-12" href="#__codelineno-70-12"></a>
</span><span id="__span-70-13"><a id="__codelineno-70-13" name="__codelineno-70-13" href="#__codelineno-70-13"></a>
</span><span id="__span-70-14"><a id="__codelineno-70-14" name="__codelineno-70-14" href="#__codelineno-70-14"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-70-15"><a id="__codelineno-70-15" name="__codelineno-70-15" href="#__codelineno-70-15"></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-70-16"><a id="__codelineno-70-16" name="__codelineno-70-16" href="#__codelineno-70-16"></a>    <span class="n">city</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-70-17"><a id="__codelineno-70-17" name="__codelineno-70-17" href="#__codelineno-70-17"></a>
</span><span id="__span-70-18"><a id="__codelineno-70-18" name="__codelineno-70-18" href="#__codelineno-70-18"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-70-19"><a id="__codelineno-70-19" name="__codelineno-70-19" href="#__codelineno-70-19"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--*--&quot;</span><span class="p">,</span>
</span><span id="__span-70-20"><a id="__codelineno-70-20" name="__codelineno-70-20" href="#__codelineno-70-20"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-70-21"><a id="__codelineno-70-21" name="__codelineno-70-21" href="#__codelineno-70-21"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-70-22"><a id="__codelineno-70-22" name="__codelineno-70-22" href="#__codelineno-70-22"></a>        <span class="p">],</span>
</span><span id="__span-70-23"><a id="__codelineno-70-23" name="__codelineno-70-23" href="#__codelineno-70-23"></a>    <span class="p">)</span>
</span><span id="__span-70-24"><a id="__codelineno-70-24" name="__codelineno-70-24" href="#__codelineno-70-24"></a>
</span><span id="__span-70-25"><a id="__codelineno-70-25" name="__codelineno-70-25" href="#__codelineno-70-25"></a>
</span><span id="__span-70-26"><a id="__codelineno-70-26" name="__codelineno-70-26" href="#__codelineno-70-26"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-70-27"><a id="__codelineno-70-27" name="__codelineno-70-27" href="#__codelineno-70-27"></a>    <span class="n">PROJECT_NAME</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
</span><span id="__span-70-28"><a id="__codelineno-70-28" name="__codelineno-70-28" href="#__codelineno-70-28"></a>    <span class="n">country</span><span class="p">:</span> <span class="n">Country</span>
</span><span id="__span-70-29"><a id="__codelineno-70-29" name="__codelineno-70-29" href="#__codelineno-70-29"></a>
</span><span id="__span-70-30"><a id="__codelineno-70-30" name="__codelineno-70-30" href="#__codelineno-70-30"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent&quot;</span>
</span><span id="__span-70-31"><a id="__codelineno-70-31" name="__codelineno-70-31" href="#__codelineno-70-31"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-70-32"><a id="__codelineno-70-32" name="__codelineno-70-32" href="#__codelineno-70-32"></a>        <span class="n">env_nested_delimiter</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-70-33"><a id="__codelineno-70-33" name="__codelineno-70-33" href="#__codelineno-70-33"></a>    <span class="p">)</span>
</span><span id="__span-70-34"><a id="__codelineno-70-34" name="__codelineno-70-34" href="#__codelineno-70-34"></a>
</span><span id="__span-70-35"><a id="__codelineno-70-35" name="__codelineno-70-35" href="#__codelineno-70-35"></a>
</span><span id="__span-70-36"><a id="__codelineno-70-36" name="__codelineno-70-36" href="#__codelineno-70-36"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-70-37"><a id="__codelineno-70-37" name="__codelineno-70-37" href="#__codelineno-70-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">)</span>
</span><span id="__span-70-38"><a id="__codelineno-70-38" name="__codelineno-70-38" href="#__codelineno-70-38"></a><span class="c1">#&gt; Travel map</span>
</span><span id="__span-70-39"><a id="__codelineno-70-39" name="__codelineno-70-39" href="#__codelineno-70-39"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-70-40"><a id="__codelineno-70-40" name="__codelineno-70-40" href="#__codelineno-70-40"></a><span class="c1">#&gt; Russia</span>
</span><span id="__span-70-41"><a id="__codelineno-70-41" name="__codelineno-70-41" href="#__codelineno-70-41"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-70-42"><a id="__codelineno-70-42" name="__codelineno-70-42" href="#__codelineno-70-42"></a><span class="c1">#&gt; Moscow</span>
</span><span id="__span-70-43"><a id="__codelineno-70-43" name="__codelineno-70-43" href="#__codelineno-70-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">street</span><span class="o">.</span><span class="n">short_name</span><span class="p">)</span>
</span><span id="__span-70-44"><a id="__codelineno-70-44" name="__codelineno-70-44" href="#__codelineno-70-44"></a><span class="c1">#&gt; Arbat Street</span>
</span></code></pre></div>
<p>Прелесть обратного наследования заключается в том, что для классов-детей можно переопределять или задавать собственные настройки и они также будут работать.
Например здесь в классах <code class="language-python highlight"><span class="n">AppConfig</span></code> и <code class="language-python highlight"><span class="n">Country</span></code> указан совершенно разный <code>env_nested_delimiter</code>. По умолчанию главнее те настройки, которые указаны в самом классе.
По этому мы можем дописать файл <code>.env</code>, как показано ниже, и получим совершенно другой результат.</p>
<p><div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a>NAME=&quot;Travel map&quot;
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a>COUNTRY__NAME=&quot;Russia&quot;
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>COUNTRY__CITY__NAME=&quot;Moscow&quot;
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>COUNTRY__CITY__STREET__NAME=&quot;Arbat Street&quot;
</span><span id="__span-71-5"><a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>
</span><span id="__span-71-6"><a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>COUNTRY--*--NAME=&quot;Belarus&quot;
</span><span id="__span-71-7"><a id="__codelineno-71-7" name="__codelineno-71-7" href="#__codelineno-71-7"></a>COUNTRY--*--CITY--*--NAME=&quot;Minsk&quot;
</span><span id="__span-71-8"><a id="__codelineno-71-8" name="__codelineno-71-8" href="#__codelineno-71-8"></a>COUNTRY--*--CITY--*--STREET--*--NAME=&quot;Niamiha Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">)</span>
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="c1">#&gt; Travel map</span>
</span><span id="__span-72-4"><a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-72-5"><a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a><span class="c1">#&gt; Belarus</span>
</span><span id="__span-72-6"><a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="__span-72-7"><a id="__codelineno-72-7" name="__codelineno-72-7" href="#__codelineno-72-7"></a><span class="c1">#&gt; Minsk</span>
</span><span id="__span-72-8"><a id="__codelineno-72-8" name="__codelineno-72-8" href="#__codelineno-72-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">city</span><span class="o">.</span><span class="n">street</span><span class="o">.</span><span class="n">short_name</span><span class="p">)</span>
</span><span id="__span-72-9"><a id="__codelineno-72-9" name="__codelineno-72-9" href="#__codelineno-72-9"></a><span class="c1">#&gt; Niamiha Street</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-73-2"><a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="n">env_nested_delimiter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;__&quot;</span>
</span></code></pre></div>
<h3 id="env_file_encoding">env_file_encoding</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span>  <span class="c1"># utf-8</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Задаёт кодировку при чтении переменных окружения из файлов. Применяется сразу ко всем файлам, указанным в <a href="#env_file">env_file</a></p>
<p><strong>Использование</strong>:
<div class="language-py highlight"><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a>
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-74-5"><a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-74-6"><a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a>    <span class="p">)</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="n">env_file_encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cp1251&quot;</span>
</span></code></pre></div>
<h3 id="env_case_sensitive">env_case_sensitive</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает нужно ли обращать внимание на регистр имени при чтении переменных окружения.
Хотя по умолчанию переменные читаются как регистронезависимые, но приоритет всегда отдаётся точному совпадению, даже при множественной вложенности моделей!</p>
<p>Никаких ошибок возбуждаться НЕ будет, даже если вы ошиблись в написании имени переменной! Все имена переменных, не соответствующие критериям поиска будут проигнорированы!</p>
<p><strong>Использование</strong>:</p>
<p>На самом деле это достаточно сложная тема, так как алгоритмы поиска немного отличаются друг от друга в зависимости от вариантов вложенности моделей. Возможно позже в документации будет создана отдельная тема, посвящённая этому. В дальнейшем, в обязательном порядке, это будет включено в режим отладки. А пока постараюсь объяснить вкратце.</p>
<p>Есть всего 3 варианта условий множественной вложенности моделей:</p>
<ol>
<li>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code>. Это самый простой классический вариант.</li>
<li>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>.</li>
<li>Комбинация первых двух вариантов.</li>
</ol>
<p>Сложность заключается в том, что если вложенные модели наследуются от <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>, то у каждой такой модели могут быть свои собственные настройки для чтения переменных окружения, которые имеют приоритет, но при этом так же будут применяться настройки, указанные в классе-родителе в парадигме обратного наследования.</p>
<p>При таком поведении значение для одного и того же атрибута класса можно указать множеством имён переменных окружения. А если у этого атрибута есть ещё и несколько алиасов, то при регисторонезависимом поиске количество вариантов имён переменных окружения возрастает в несколько раз.</p>
<p>Все эти алгоритмы поиска уже реализованы. Ниже будут рассмотрены первые 2 варианта.</p>
<ol>
<li>
<p>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code>.</p>
<ul>
<li><strong>Исходная модель</strong>:</li>
</ul>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a>
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a>
</span><span id="__span-76-5"><a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="k">class</span> <span class="nc">Street</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-76-6"><a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a>    <span class="n">Name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-76-7"><a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a>
</span><span id="__span-76-8"><a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a>
</span><span id="__span-76-9"><a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a><span class="k">class</span> <span class="nc">City</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-76-10"><a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a>    <span class="n">Street</span><span class="p">:</span> <span class="n">Street</span>
</span><span id="__span-76-11"><a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a>
</span><span id="__span-76-12"><a id="__codelineno-76-12" name="__codelineno-76-12" href="#__codelineno-76-12"></a>
</span><span id="__span-76-13"><a id="__codelineno-76-13" name="__codelineno-76-13" href="#__codelineno-76-13"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
</span><span id="__span-76-14"><a id="__codelineno-76-14" name="__codelineno-76-14" href="#__codelineno-76-14"></a>    <span class="n">City</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-76-15"><a id="__codelineno-76-15" name="__codelineno-76-15" href="#__codelineno-76-15"></a>
</span><span id="__span-76-16"><a id="__codelineno-76-16" name="__codelineno-76-16" href="#__codelineno-76-16"></a>
</span><span id="__span-76-17"><a id="__codelineno-76-17" name="__codelineno-76-17" href="#__codelineno-76-17"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-76-18"><a id="__codelineno-76-18" name="__codelineno-76-18" href="#__codelineno-76-18"></a>    <span class="n">Country</span><span class="p">:</span> <span class="n">Country</span>
</span><span id="__span-76-19"><a id="__codelineno-76-19" name="__codelineno-76-19" href="#__codelineno-76-19"></a>
</span><span id="__span-76-20"><a id="__codelineno-76-20" name="__codelineno-76-20" href="#__codelineno-76-20"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-76-21"><a id="__codelineno-76-21" name="__codelineno-76-21" href="#__codelineno-76-21"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-76-22"><a id="__codelineno-76-22" name="__codelineno-76-22" href="#__codelineno-76-22"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-76-23"><a id="__codelineno-76-23" name="__codelineno-76-23" href="#__codelineno-76-23"></a>    <span class="p">)</span>
</span></code></pre></div>
<ul>
<li><strong>Задача</strong>:</li>
</ul>
<p>Нужно указать переменную окружения для <code class="language-python highlight"><span class="n">Street</span><span class="o">.</span><span class="n">Name</span></code>.</p>
<ul>
<li><strong>Решение</strong>:</li>
</ul>
<p>Самое простое решение, которое сработает только при <code class="language-text highlight">env_case_sensitive=False</code>, которое установлено по умолчанию:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-78-2"><a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-78-3"><a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a><span class="c1">#&gt; Awesome Street</span>
</span></code></pre></div></p>
<p>Вариант, который ОДИНАКОВО сработает и при <code class="language-text highlight">env_case_sensitive=True</code> и при <code class="language-text highlight">env_case_sensitive=False</code>:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span><span id="__span-79-2"><a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a>Country__City__Street__Name=&quot;Awesome Street exactly match aliases names&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-80-2"><a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-80-3"><a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="c1">#&gt; Awesome Street exactly match aliases names</span>
</span></code></pre></div></p>
<p>При <code class="language-text highlight">env_case_sensitive=True</code> будет произведён поиск только по имени переменной <code>Country__City__Street__Name</code>, остальные переменные будут проигнорированы.</p>
<p>Ниже приведены примеры всех возможных вариантов имён переменных окружения при регистронезависимом поиске, <code class="language-text highlight">env_case_sensitive=False</code>, указанные в порядке возрастания приоритета поиска. Где 0 - имеет самый низший приоритет, а 16 - наивысший.</p>
<blockquote>
<p><strong>Заметка</strong>: В приведённом конкретном примере у каждого атрибута есть 2 алиаса, по которым производится поиск - это его имя и его имя в нижнем регистре.</p>
</blockquote>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a># Не имеют приоритета, потому что не совпадают ни с одним вариантом поиска,
</span><span id="__span-81-2"><a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a># но будут прочитаны, если нет совпадений с вариантами поиска
</span><span id="__span-81-3"><a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street - 0&quot;
</span><span id="__span-81-4"><a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a>couNTry__citY__StreeT__nAMe=&quot;Awesome Street - 0&quot;
</span><span id="__span-81-5"><a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a>country__city__street__NAME=&quot;Awesome Street - 0&quot;
</span><span id="__span-81-6"><a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a>
</span><span id="__span-81-7"><a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a># Ниже варианты, по которым происходит поиск, в порядке повышения приоритета
</span><span id="__span-81-8"><a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a>country__city__street__name=&quot;Awesome Street - 1&quot;
</span><span id="__span-81-9"><a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a>country__city__street__Name=&quot;Awesome Street - 2&quot;
</span><span id="__span-81-10"><a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a>country__city__street__Name=&quot;Awesome Street - 3&quot;
</span><span id="__span-81-11"><a id="__codelineno-81-11" name="__codelineno-81-11" href="#__codelineno-81-11"></a>country__city__Street__Name=&quot;Awesome Street - 4&quot;
</span><span id="__span-81-12"><a id="__codelineno-81-12" name="__codelineno-81-12" href="#__codelineno-81-12"></a>country__City__street__name=&quot;Awesome Street - 5&quot;
</span><span id="__span-81-13"><a id="__codelineno-81-13" name="__codelineno-81-13" href="#__codelineno-81-13"></a>country__City__street__Name=&quot;Awesome Street - 6&quot;
</span><span id="__span-81-14"><a id="__codelineno-81-14" name="__codelineno-81-14" href="#__codelineno-81-14"></a>country__City__Street__name=&quot;Awesome Street - 7&quot;
</span><span id="__span-81-15"><a id="__codelineno-81-15" name="__codelineno-81-15" href="#__codelineno-81-15"></a>country__City__Street__Name=&quot;Awesome Street - 8&quot;
</span><span id="__span-81-16"><a id="__codelineno-81-16" name="__codelineno-81-16" href="#__codelineno-81-16"></a>Country__city__street__name=&quot;Awesome Street - 9&quot;
</span><span id="__span-81-17"><a id="__codelineno-81-17" name="__codelineno-81-17" href="#__codelineno-81-17"></a>Country__city__street__Name=&quot;Awesome Street - 10&quot;
</span><span id="__span-81-18"><a id="__codelineno-81-18" name="__codelineno-81-18" href="#__codelineno-81-18"></a>Country__city__street__Name=&quot;Awesome Street - 11&quot;
</span><span id="__span-81-19"><a id="__codelineno-81-19" name="__codelineno-81-19" href="#__codelineno-81-19"></a>Country__city__Street__Name=&quot;Awesome Street - 12&quot;
</span><span id="__span-81-20"><a id="__codelineno-81-20" name="__codelineno-81-20" href="#__codelineno-81-20"></a>Country__City__street__name=&quot;Awesome Street - 13&quot;
</span><span id="__span-81-21"><a id="__codelineno-81-21" name="__codelineno-81-21" href="#__codelineno-81-21"></a>Country__City__street__Name=&quot;Awesome Street - 14&quot;
</span><span id="__span-81-22"><a id="__codelineno-81-22" name="__codelineno-81-22" href="#__codelineno-81-22"></a>Country__City__Street__name=&quot;Awesome Street - 15&quot;
</span><span id="__span-81-23"><a id="__codelineno-81-23" name="__codelineno-81-23" href="#__codelineno-81-23"></a>Country__City__Street__Name=&quot;Awesome Street - 16&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-82-2"><a id="__codelineno-82-2" name="__codelineno-82-2" href="#__codelineno-82-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-82-3"><a id="__codelineno-82-3" name="__codelineno-82-3" href="#__codelineno-82-3"></a><span class="c1">#&gt; Awesome Street - 16</span>
</span></code></pre></div>
</li>
<li>
<p>Все вложенные модели наследуются от класса <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>.</p>
<ul>
<li><strong>Исходная модель</strong>:</li>
</ul>
<blockquote>
<p><strong>Заметка</strong>: Разделители выбраны чисто из соображения наглядности.</p>
</blockquote>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-83-2"><a id="__codelineno-83-2" name="__codelineno-83-2" href="#__codelineno-83-2"></a>
</span><span id="__span-83-3"><a id="__codelineno-83-3" name="__codelineno-83-3" href="#__codelineno-83-3"></a>
</span><span id="__span-83-4"><a id="__codelineno-83-4" name="__codelineno-83-4" href="#__codelineno-83-4"></a><span class="k">class</span> <span class="nc">Street</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-83-5"><a id="__codelineno-83-5" name="__codelineno-83-5" href="#__codelineno-83-5"></a>    <span class="n">Name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-83-6"><a id="__codelineno-83-6" name="__codelineno-83-6" href="#__codelineno-83-6"></a>
</span><span id="__span-83-7"><a id="__codelineno-83-7" name="__codelineno-83-7" href="#__codelineno-83-7"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-83-8"><a id="__codelineno-83-8" name="__codelineno-83-8" href="#__codelineno-83-8"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-83-9"><a id="__codelineno-83-9" name="__codelineno-83-9" href="#__codelineno-83-9"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--*--&quot;</span><span class="p">,</span>
</span><span id="__span-83-10"><a id="__codelineno-83-10" name="__codelineno-83-10" href="#__codelineno-83-10"></a>    <span class="p">)</span>
</span><span id="__span-83-11"><a id="__codelineno-83-11" name="__codelineno-83-11" href="#__codelineno-83-11"></a>
</span><span id="__span-83-12"><a id="__codelineno-83-12" name="__codelineno-83-12" href="#__codelineno-83-12"></a>
</span><span id="__span-83-13"><a id="__codelineno-83-13" name="__codelineno-83-13" href="#__codelineno-83-13"></a><span class="k">class</span> <span class="nc">City</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-83-14"><a id="__codelineno-83-14" name="__codelineno-83-14" href="#__codelineno-83-14"></a>    <span class="n">Street</span><span class="p">:</span> <span class="n">Street</span>
</span><span id="__span-83-15"><a id="__codelineno-83-15" name="__codelineno-83-15" href="#__codelineno-83-15"></a>
</span><span id="__span-83-16"><a id="__codelineno-83-16" name="__codelineno-83-16" href="#__codelineno-83-16"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-83-17"><a id="__codelineno-83-17" name="__codelineno-83-17" href="#__codelineno-83-17"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-83-18"><a id="__codelineno-83-18" name="__codelineno-83-18" href="#__codelineno-83-18"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--^--&quot;</span><span class="p">,</span>
</span><span id="__span-83-19"><a id="__codelineno-83-19" name="__codelineno-83-19" href="#__codelineno-83-19"></a>    <span class="p">)</span>
</span><span id="__span-83-20"><a id="__codelineno-83-20" name="__codelineno-83-20" href="#__codelineno-83-20"></a>
</span><span id="__span-83-21"><a id="__codelineno-83-21" name="__codelineno-83-21" href="#__codelineno-83-21"></a>
</span><span id="__span-83-22"><a id="__codelineno-83-22" name="__codelineno-83-22" href="#__codelineno-83-22"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-83-23"><a id="__codelineno-83-23" name="__codelineno-83-23" href="#__codelineno-83-23"></a>    <span class="n">City</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-83-24"><a id="__codelineno-83-24" name="__codelineno-83-24" href="#__codelineno-83-24"></a>
</span><span id="__span-83-25"><a id="__codelineno-83-25" name="__codelineno-83-25" href="#__codelineno-83-25"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-83-26"><a id="__codelineno-83-26" name="__codelineno-83-26" href="#__codelineno-83-26"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-83-27"><a id="__codelineno-83-27" name="__codelineno-83-27" href="#__codelineno-83-27"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;--@--&quot;</span><span class="p">,</span>
</span><span id="__span-83-28"><a id="__codelineno-83-28" name="__codelineno-83-28" href="#__codelineno-83-28"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-83-29"><a id="__codelineno-83-29" name="__codelineno-83-29" href="#__codelineno-83-29"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-83-30"><a id="__codelineno-83-30" name="__codelineno-83-30" href="#__codelineno-83-30"></a>        <span class="p">],</span>
</span><span id="__span-83-31"><a id="__codelineno-83-31" name="__codelineno-83-31" href="#__codelineno-83-31"></a>    <span class="p">)</span>
</span><span id="__span-83-32"><a id="__codelineno-83-32" name="__codelineno-83-32" href="#__codelineno-83-32"></a>
</span><span id="__span-83-33"><a id="__codelineno-83-33" name="__codelineno-83-33" href="#__codelineno-83-33"></a>
</span><span id="__span-83-34"><a id="__codelineno-83-34" name="__codelineno-83-34" href="#__codelineno-83-34"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-83-35"><a id="__codelineno-83-35" name="__codelineno-83-35" href="#__codelineno-83-35"></a>    <span class="n">Country</span><span class="p">:</span> <span class="n">Country</span>
</span><span id="__span-83-36"><a id="__codelineno-83-36" name="__codelineno-83-36" href="#__codelineno-83-36"></a>
</span><span id="__span-83-37"><a id="__codelineno-83-37" name="__codelineno-83-37" href="#__codelineno-83-37"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-83-38"><a id="__codelineno-83-38" name="__codelineno-83-38" href="#__codelineno-83-38"></a>        <span class="n">env_case_sensitive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>   <span class="c1"># by default</span>
</span><span id="__span-83-39"><a id="__codelineno-83-39" name="__codelineno-83-39" href="#__codelineno-83-39"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-83-40"><a id="__codelineno-83-40" name="__codelineno-83-40" href="#__codelineno-83-40"></a>    <span class="p">)</span>
</span></code></pre></div>
<ul>
<li><strong>Задача</strong>:</li>
</ul>
<p>Нужно указать переменную окружения для <code class="language-python highlight"><span class="n">Street</span><span class="o">.</span><span class="n">Name</span></code>.</p>
<ul>
<li><strong>Решение</strong>:</li>
</ul>
<p>Самое простое решение, которое сработает только при <code class="language-text highlight">env_case_sensitive=False</code>, которое установлено по умолчанию:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span></code></pre></div>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="c1">#&gt; Awesome Street</span>
</span></code></pre></div></p>
<p>Вариант, который ОДИНАКОВО сработает и при <code class="language-text highlight">env_case_sensitive=True</code> и при <code class="language-text highlight">env_case_sensitive=False</code>:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>COUNTRY__CITY__STREET__NAME=&quot;Awesome Street&quot;
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>Country--*--City--*--Street--*--Name=&quot;Awesome Street exactly match aliases names&quot;
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="c1">#&gt; Awesome Street exactly match aliases names</span>
</span></code></pre></div>
<ul>
<li><strong>Отличия от первого варианта</strong>:</li>
</ul>
<p>Здесь для каждой вложенной модели указан свой собственный разделитель.
Порядок разрешения имён будет точно таким же как и в первом варианте при наследовании всех вложенных моделей от <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">BaseModel</span></code>.
Но порядок приоритета разделителей определяется правилами обратного наследования. То есть чтоб указать имя переменной среды окружения для атрибута <code class="language-python highlight"><span class="n">Street</span><span class="o">.</span><span class="n">Name</span></code> можно использовать любой разделитель из "<code>__</code>", "<code>--@--</code>", "<code>--^--</code>", "<code>--*--</code>", но разделитель "<code>--*--</code>" будет иметь наивысший приоритет, так как он указан непосредственно в классе <code>Street</code> и атрибут <code>Name</code> принадлежит именно к этому классу, а разделитель "<code>__</code>" будет иметь самый низший приоритет, так как он принадлежит классу-родителю в иерархии обратного наследование.</p>
<p>Такое поведение реализуется в силу того, что ВСЕ вложенные модели наследуются от <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiSettings</span></code>, а значит для каждой вложенной модели происходить поиск переменных окружения и каждое найденное значение передаётся по иерархии выше от класса-родителя к классу-ребёнку в концепции обратного наследования!</p>
<p>В приведённом ниже примере в именах переменных окружения порядок алиасов имеет наивысший приоритет не зависимо от выставленного значения чувствительности к регистру. Но здесь уже вступает в силу правило обратного наследования, которое задаёт приоритет разделителю:
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>Country__City__Street__Name=&quot;Awesome Street exactly match aliases names - 1&quot;
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a>Country--@--City--@--Street--@--Name=&quot;Awesome Street exactly match aliases names - 2&quot;
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>Country--^--City--^--Street--^--Name=&quot;Awesome Street exactly match aliases names - 3&quot;
</span><span id="__span-88-4"><a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>Country--*--City--*--Street--*--Name=&quot;Awesome Street exactly match aliases names - 4&quot;
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-89-2"><a id="__codelineno-89-2" name="__codelineno-89-2" href="#__codelineno-89-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-89-3"><a id="__codelineno-89-3" name="__codelineno-89-3" href="#__codelineno-89-3"></a><span class="c1">#&gt; Awesome Street exactly match aliases names - 4</span>
</span></code></pre></div>
<p>Данное поведение можно отключить, просто запретив читать переменные окружения для класса <code>Country</code> и всех его потомков в концепции обратного наследования. То есть, чтоб переменные окружения читались только для класса <code>AppConfig</code>.</p>
<p>Это можно сделать следующим образом, при наличии тех же самых переменных окружения, что указаны выше:
<div class="language-py highlight"><span class="filename">settings.py</span><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="k">class</span> <span class="nc">Country</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-90-2"><a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a>    <span class="n">City</span><span class="p">:</span> <span class="n">City</span>
</span><span id="__span-90-3"><a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a>
</span><span id="__span-90-4"><a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a>    <span class="n">ordered_settings</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-90-5"><a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a>        <span class="s2">&quot;cli&quot;</span><span class="p">,</span>
</span><span id="__span-90-6"><a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a>        <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-90-7"><a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a>        <span class="s2">&quot;secrets&quot;</span><span class="p">,</span>
</span><span id="__span-90-8"><a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a>        <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-90-9"><a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a>    <span class="p">]</span>
</span><span id="__span-90-10"><a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a>
</span><span id="__span-90-11"><a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a>
</span><span id="__span-90-12"><a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-90-13"><a id="__codelineno-90-13" name="__codelineno-90-13" href="#__codelineno-90-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">Country</span><span class="o">.</span><span class="n">City</span><span class="o">.</span><span class="n">Street</span><span class="o">.</span><span class="n">Name</span><span class="p">)</span>
</span><span id="__span-90-14"><a id="__codelineno-90-14" name="__codelineno-90-14" href="#__codelineno-90-14"></a><span class="c1">#&gt; Awesome Street exactly match aliases names - 1</span>
</span></code></pre></div></p>
<p>Вариантов использования настолько много, что можно запутаться. По этому и планируется дальнейшее развитие режима отладки, чтоб хотя бы можно было посмотреть, какие варианты ожидает получить программа и какой вариант будет приоритетнее.</p>
</li>
</ol>
<blockquote>
<p><strong>Важно</strong>: Не стоит забывать, что в приведённых выше примерах, переменную окружения можно задать следующего вида:
<code>Country='{"City": {"Street": {"Name": "Awesome Street"}}}'</code> и на неё будут распространятся те же правила разрешения имён в зависимости от регистра!!!</p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-91-2"><a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a><span class="n">env_case_sensitive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="env_ignore_missing">env_ignore_missing</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>По умолчанию, если файлы, заданные в <a href="#env_file">env_file</a> не существуют, то их чтение игнорируется.  Но если требуется, чтоб файл или файлы обязательно присутствовали, то необходимо параметр <code>env_ignore_missing</code> установить в значение <code>False</code>.
Так же можно использовать в качестве своеобразного отладчика - в сообщении об ошибке будет указано какой именно файл и по какому пути отсутствует.</p>
<p><strong>Использование</strong>:</p>
<p>Поведение по умолчанию. Отсутствие файла <code>.env</code> не приводит к ошибке
<div class="language-py highlight"><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-92-2"><a id="__codelineno-92-2" name="__codelineno-92-2" href="#__codelineno-92-2"></a>
</span><span id="__span-92-3"><a id="__codelineno-92-3" name="__codelineno-92-3" href="#__codelineno-92-3"></a>
</span><span id="__span-92-4"><a id="__codelineno-92-4" name="__codelineno-92-4" href="#__codelineno-92-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-92-5"><a id="__codelineno-92-5" name="__codelineno-92-5" href="#__codelineno-92-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-92-6"><a id="__codelineno-92-6" name="__codelineno-92-6" href="#__codelineno-92-6"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-92-7"><a id="__codelineno-92-7" name="__codelineno-92-7" href="#__codelineno-92-7"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env&quot;</span><span class="p">,</span>            <span class="c1"># by default</span>
</span><span id="__span-92-8"><a id="__codelineno-92-8" name="__codelineno-92-8" href="#__codelineno-92-8"></a>        <span class="n">env_ignore_missing</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>    <span class="c1"># by default</span>
</span><span id="__span-92-9"><a id="__codelineno-92-9" name="__codelineno-92-9" href="#__codelineno-92-9"></a>    <span class="p">)</span>
</span><span id="__span-92-10"><a id="__codelineno-92-10" name="__codelineno-92-10" href="#__codelineno-92-10"></a>
</span><span id="__span-92-11"><a id="__codelineno-92-11" name="__codelineno-92-11" href="#__codelineno-92-11"></a>
</span><span id="__span-92-12"><a id="__codelineno-92-12" name="__codelineno-92-12" href="#__codelineno-92-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-92-13"><a id="__codelineno-92-13" name="__codelineno-92-13" href="#__codelineno-92-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-92-14"><a id="__codelineno-92-14" name="__codelineno-92-14" href="#__codelineno-92-14"></a><span class="c1">#&gt; default_param</span>
</span></code></pre></div></p>
<p>При отсутствии файла <code>.env</code> возбуждается ошибка
<div class="language-py highlight"><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-93-2"><a id="__codelineno-93-2" name="__codelineno-93-2" href="#__codelineno-93-2"></a>
</span><span id="__span-93-3"><a id="__codelineno-93-3" name="__codelineno-93-3" href="#__codelineno-93-3"></a>
</span><span id="__span-93-4"><a id="__codelineno-93-4" name="__codelineno-93-4" href="#__codelineno-93-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-93-5"><a id="__codelineno-93-5" name="__codelineno-93-5" href="#__codelineno-93-5"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default_param&quot;</span>
</span><span id="__span-93-6"><a id="__codelineno-93-6" name="__codelineno-93-6" href="#__codelineno-93-6"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-93-7"><a id="__codelineno-93-7" name="__codelineno-93-7" href="#__codelineno-93-7"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env&quot;</span><span class="p">,</span>            <span class="c1"># by default</span>
</span><span id="__span-93-8"><a id="__codelineno-93-8" name="__codelineno-93-8" href="#__codelineno-93-8"></a>        <span class="n">env_ignore_missing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="__span-93-9"><a id="__codelineno-93-9" name="__codelineno-93-9" href="#__codelineno-93-9"></a>    <span class="p">)</span>
</span><span id="__span-93-10"><a id="__codelineno-93-10" name="__codelineno-93-10" href="#__codelineno-93-10"></a>
</span><span id="__span-93-11"><a id="__codelineno-93-11" name="__codelineno-93-11" href="#__codelineno-93-11"></a>
</span><span id="__span-93-12"><a id="__codelineno-93-12" name="__codelineno-93-12" href="#__codelineno-93-12"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-93-13"><a id="__codelineno-93-13" name="__codelineno-93-13" href="#__codelineno-93-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-93-14"><a id="__codelineno-93-14" name="__codelineno-93-14" href="#__codelineno-93-14"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-93-15"><a id="__codelineno-93-15" name="__codelineno-93-15" href="#__codelineno-93-15"></a><span class="sd">Traceback (most recent call last):</span>
</span><span id="__span-93-16"><a id="__codelineno-93-16" name="__codelineno-93-16" href="#__codelineno-93-16"></a><span class="sd">    ...</span>
</span><span id="__span-93-17"><a id="__codelineno-93-17" name="__codelineno-93-17" href="#__codelineno-93-17"></a><span class="sd">arfi_settings.errors.ArFiSettingsError: File not found: `/home/user/my_awesome_project/.env`</span>
</span><span id="__span-93-18"><a id="__codelineno-93-18" name="__codelineno-93-18" href="#__codelineno-93-18"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div></p>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-94-2"><a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="n">env_ignore_missing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h3 id="env_exclude_inherit_parent">env_exclude_inherit_parent</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование определённых собственных настроек от класса-родителя
Применяется только при чтении переменных окружения</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя все настройки, кроме <code>env_file_encoding</code> и <code>env_nested_delimiter</code>
<div class="language-py highlight"><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-95-2"><a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>
</span><span id="__span-95-3"><a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>
</span><span id="__span-95-4"><a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-95-5"><a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-95-6"><a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-95-7"><a id="__codelineno-95-7" name="__codelineno-95-7" href="#__codelineno-95-7"></a>            <span class="s2">&quot;env_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-95-8"><a id="__codelineno-95-8" name="__codelineno-95-8" href="#__codelineno-95-8"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-95-9"><a id="__codelineno-95-9" name="__codelineno-95-9" href="#__codelineno-95-9"></a>        <span class="p">],</span>
</span><span id="__span-95-10"><a id="__codelineno-95-10" name="__codelineno-95-10" href="#__codelineno-95-10"></a>    <span class="p">)</span>
</span><span id="__span-95-11"><a id="__codelineno-95-11" name="__codelineno-95-11" href="#__codelineno-95-11"></a>
</span><span id="__span-95-12"><a id="__codelineno-95-12" name="__codelineno-95-12" href="#__codelineno-95-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-95-13"><a id="__codelineno-95-13" name="__codelineno-95-13" href="#__codelineno-95-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-95-14"><a id="__codelineno-95-14" name="__codelineno-95-14" href="#__codelineno-95-14"></a>
</span><span id="__span-95-15"><a id="__codelineno-95-15" name="__codelineno-95-15" href="#__codelineno-95-15"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-95-16"><a id="__codelineno-95-16" name="__codelineno-95-16" href="#__codelineno-95-16"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-95-17"><a id="__codelineno-95-17" name="__codelineno-95-17" href="#__codelineno-95-17"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-95-18"><a id="__codelineno-95-18" name="__codelineno-95-18" href="#__codelineno-95-18"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-95-19"><a id="__codelineno-95-19" name="__codelineno-95-19" href="#__codelineno-95-19"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-95-20"><a id="__codelineno-95-20" name="__codelineno-95-20" href="#__codelineno-95-20"></a>    <span class="p">)</span>
</span><span id="__span-95-21"><a id="__codelineno-95-21" name="__codelineno-95-21" href="#__codelineno-95-21"></a>
</span><span id="__span-95-22"><a id="__codelineno-95-22" name="__codelineno-95-22" href="#__codelineno-95-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-95-23"><a id="__codelineno-95-23" name="__codelineno-95-23" href="#__codelineno-95-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-95-24"><a id="__codelineno-95-24" name="__codelineno-95-24" href="#__codelineno-95-24"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-95-25"><a id="__codelineno-95-25" name="__codelineno-95-25" href="#__codelineno-95-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-95-26"><a id="__codelineno-95-26" name="__codelineno-95-26" href="#__codelineno-95-26"></a><span class="c1">#&gt; &quot;__&quot;</span>
</span><span id="__span-95-27"><a id="__codelineno-95-27" name="__codelineno-95-27" href="#__codelineno-95-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-95-28"><a id="__codelineno-95-28" name="__codelineno-95-28" href="#__codelineno-95-28"></a><span class="c1">#&gt; None</span>
</span><span id="__span-95-29"><a id="__codelineno-95-29" name="__codelineno-95-29" href="#__codelineno-95-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-95-30"><a id="__codelineno-95-30" name="__codelineno-95-30" href="#__codelineno-95-30"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div></p>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>env_exclude_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>env_exclude_inherit_parent</code>!!! Для этого его тоже нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-96-2"><a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-96-3"><a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-96-4"><a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a>            <span class="s2">&quot;env_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-96-5"><a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a>            <span class="s2">&quot;env_nested_delimiter&quot;</span><span class="p">,</span>
</span><span id="__span-96-6"><a id="__codelineno-96-6" name="__codelineno-96-6" href="#__codelineno-96-6"></a>            <span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-96-7"><a id="__codelineno-96-7" name="__codelineno-96-7" href="#__codelineno-96-7"></a>        <span class="p">],</span>
</span><span id="__span-96-8"><a id="__codelineno-96-8" name="__codelineno-96-8" href="#__codelineno-96-8"></a>    <span class="p">)</span>
</span><span id="__span-96-9"><a id="__codelineno-96-9" name="__codelineno-96-9" href="#__codelineno-96-9"></a>
</span><span id="__span-96-10"><a id="__codelineno-96-10" name="__codelineno-96-10" href="#__codelineno-96-10"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-96-11"><a id="__codelineno-96-11" name="__codelineno-96-11" href="#__codelineno-96-11"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-96-12"><a id="__codelineno-96-12" name="__codelineno-96-12" href="#__codelineno-96-12"></a>
</span><span id="__span-96-13"><a id="__codelineno-96-13" name="__codelineno-96-13" href="#__codelineno-96-13"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-96-14"><a id="__codelineno-96-14" name="__codelineno-96-14" href="#__codelineno-96-14"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-96-15"><a id="__codelineno-96-15" name="__codelineno-96-15" href="#__codelineno-96-15"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-96-16"><a id="__codelineno-96-16" name="__codelineno-96-16" href="#__codelineno-96-16"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-96-17"><a id="__codelineno-96-17" name="__codelineno-96-17" href="#__codelineno-96-17"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-96-18"><a id="__codelineno-96-18" name="__codelineno-96-18" href="#__codelineno-96-18"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-96-19"><a id="__codelineno-96-19" name="__codelineno-96-19" href="#__codelineno-96-19"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-96-20"><a id="__codelineno-96-20" name="__codelineno-96-20" href="#__codelineno-96-20"></a>        <span class="p">],</span>
</span><span id="__span-96-21"><a id="__codelineno-96-21" name="__codelineno-96-21" href="#__codelineno-96-21"></a>    <span class="p">)</span>
</span><span id="__span-96-22"><a id="__codelineno-96-22" name="__codelineno-96-22" href="#__codelineno-96-22"></a>
</span><span id="__span-96-23"><a id="__codelineno-96-23" name="__codelineno-96-23" href="#__codelineno-96-23"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span></code></pre></div>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="w">    </span><span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="w">    </span><span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a><span class="p">]</span>
</span></code></pre></div>
<h3 id="env_include_inherit_parent">env_include_inherit_parent</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>В концепции обратного наследования запрещает наследование от класса-родителя всех собственных настроек, кроме указанных.
Применяется только при чтении переменных окружения.</p>
<p><strong>Использование</strong>:</p>
<p>Например мы хотим унаследовать от родителя только префикс:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3" href="#__codelineno-98-3"></a>
</span><span id="__span-98-4"><a id="__codelineno-98-4" name="__codelineno-98-4" href="#__codelineno-98-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-98-5"><a id="__codelineno-98-5" name="__codelineno-98-5" href="#__codelineno-98-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-98-6"><a id="__codelineno-98-6" name="__codelineno-98-6" href="#__codelineno-98-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-98-7"><a id="__codelineno-98-7" name="__codelineno-98-7" href="#__codelineno-98-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-98-8"><a id="__codelineno-98-8" name="__codelineno-98-8" href="#__codelineno-98-8"></a>        <span class="p">],</span>
</span><span id="__span-98-9"><a id="__codelineno-98-9" name="__codelineno-98-9" href="#__codelineno-98-9"></a>    <span class="p">)</span>
</span><span id="__span-98-10"><a id="__codelineno-98-10" name="__codelineno-98-10" href="#__codelineno-98-10"></a>
</span><span id="__span-98-11"><a id="__codelineno-98-11" name="__codelineno-98-11" href="#__codelineno-98-11"></a>
</span><span id="__span-98-12"><a id="__codelineno-98-12" name="__codelineno-98-12" href="#__codelineno-98-12"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-98-13"><a id="__codelineno-98-13" name="__codelineno-98-13" href="#__codelineno-98-13"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-98-14"><a id="__codelineno-98-14" name="__codelineno-98-14" href="#__codelineno-98-14"></a>
</span><span id="__span-98-15"><a id="__codelineno-98-15" name="__codelineno-98-15" href="#__codelineno-98-15"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-98-16"><a id="__codelineno-98-16" name="__codelineno-98-16" href="#__codelineno-98-16"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-98-17"><a id="__codelineno-98-17" name="__codelineno-98-17" href="#__codelineno-98-17"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-98-18"><a id="__codelineno-98-18" name="__codelineno-98-18" href="#__codelineno-98-18"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-98-19"><a id="__codelineno-98-19" name="__codelineno-98-19" href="#__codelineno-98-19"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-98-20"><a id="__codelineno-98-20" name="__codelineno-98-20" href="#__codelineno-98-20"></a>    <span class="p">)</span>
</span><span id="__span-98-21"><a id="__codelineno-98-21" name="__codelineno-98-21" href="#__codelineno-98-21"></a>
</span><span id="__span-98-22"><a id="__codelineno-98-22" name="__codelineno-98-22" href="#__codelineno-98-22"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-98-23"><a id="__codelineno-98-23" name="__codelineno-98-23" href="#__codelineno-98-23"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-98-24"><a id="__codelineno-98-24" name="__codelineno-98-24" href="#__codelineno-98-24"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-98-25"><a id="__codelineno-98-25" name="__codelineno-98-25" href="#__codelineno-98-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-98-26"><a id="__codelineno-98-26" name="__codelineno-98-26" href="#__codelineno-98-26"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-98-27"><a id="__codelineno-98-27" name="__codelineno-98-27" href="#__codelineno-98-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-98-28"><a id="__codelineno-98-28" name="__codelineno-98-28" href="#__codelineno-98-28"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-98-29"><a id="__codelineno-98-29" name="__codelineno-98-29" href="#__codelineno-98-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-98-30"><a id="__codelineno-98-30" name="__codelineno-98-30" href="#__codelineno-98-30"></a><span class="c1">#&gt; &quot;__&quot;</span>
</span><span id="__span-98-31"><a id="__codelineno-98-31" name="__codelineno-98-31" href="#__codelineno-98-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-98-32"><a id="__codelineno-98-32" name="__codelineno-98-32" href="#__codelineno-98-32"></a><span class="c1">#&gt; .env</span>
</span><span id="__span-98-33"><a id="__codelineno-98-33" name="__codelineno-98-33" href="#__codelineno-98-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-98-34"><a id="__codelineno-98-34" name="__codelineno-98-34" href="#__codelineno-98-34"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-98-35"><a id="__codelineno-98-35" name="__codelineno-98-35" href="#__codelineno-98-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-98-36"><a id="__codelineno-98-36" name="__codelineno-98-36" href="#__codelineno-98-36"></a><span class="c1">#&gt; None</span>
</span><span id="__span-98-37"><a id="__codelineno-98-37" name="__codelineno-98-37" href="#__codelineno-98-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-98-38"><a id="__codelineno-98-38" name="__codelineno-98-38" href="#__codelineno-98-38"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<blockquote>
<p><strong>Важно</strong>: Так как "обратно" наследуются абсолютно все параметры, то и <code>env_include_inherit_parent</code> не сработает для <code class="language-python highlight"><span class="n">Child</span></code>, если в классе <code class="language-python highlight"><span class="n">Parent</span></code> тоже указан параметр <code>env_include_inherit_parent</code>!!! Для этого его нужно исключить из наследования. Пример:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2" href="#__codelineno-99-2"></a>
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3" href="#__codelineno-99-3"></a>
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4" href="#__codelineno-99-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5" href="#__codelineno-99-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6" href="#__codelineno-99-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-99-7"><a id="__codelineno-99-7" name="__codelineno-99-7" href="#__codelineno-99-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-99-8"><a id="__codelineno-99-8" name="__codelineno-99-8" href="#__codelineno-99-8"></a>        <span class="p">],</span>
</span><span id="__span-99-9"><a id="__codelineno-99-9" name="__codelineno-99-9" href="#__codelineno-99-9"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-99-10"><a id="__codelineno-99-10" name="__codelineno-99-10" href="#__codelineno-99-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-99-11"><a id="__codelineno-99-11" name="__codelineno-99-11" href="#__codelineno-99-11"></a>        <span class="p">],</span>
</span><span id="__span-99-12"><a id="__codelineno-99-12" name="__codelineno-99-12" href="#__codelineno-99-12"></a>    <span class="p">)</span>
</span><span id="__span-99-13"><a id="__codelineno-99-13" name="__codelineno-99-13" href="#__codelineno-99-13"></a>
</span><span id="__span-99-14"><a id="__codelineno-99-14" name="__codelineno-99-14" href="#__codelineno-99-14"></a>
</span><span id="__span-99-15"><a id="__codelineno-99-15" name="__codelineno-99-15" href="#__codelineno-99-15"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-99-16"><a id="__codelineno-99-16" name="__codelineno-99-16" href="#__codelineno-99-16"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-99-17"><a id="__codelineno-99-17" name="__codelineno-99-17" href="#__codelineno-99-17"></a>
</span><span id="__span-99-18"><a id="__codelineno-99-18" name="__codelineno-99-18" href="#__codelineno-99-18"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-99-19"><a id="__codelineno-99-19" name="__codelineno-99-19" href="#__codelineno-99-19"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-99-20"><a id="__codelineno-99-20" name="__codelineno-99-20" href="#__codelineno-99-20"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-99-21"><a id="__codelineno-99-21" name="__codelineno-99-21" href="#__codelineno-99-21"></a>        <span class="n">env_file_encoding</span><span class="o">=</span><span class="s2">&quot;cp1251&quot;</span><span class="p">,</span>
</span><span id="__span-99-22"><a id="__codelineno-99-22" name="__codelineno-99-22" href="#__codelineno-99-22"></a>        <span class="n">env_nested_delimiter</span><span class="o">=</span><span class="s2">&quot;__&quot;</span><span class="p">,</span>
</span><span id="__span-99-23"><a id="__codelineno-99-23" name="__codelineno-99-23" href="#__codelineno-99-23"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-99-24"><a id="__codelineno-99-24" name="__codelineno-99-24" href="#__codelineno-99-24"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-99-25"><a id="__codelineno-99-25" name="__codelineno-99-25" href="#__codelineno-99-25"></a>        <span class="p">],</span>
</span><span id="__span-99-26"><a id="__codelineno-99-26" name="__codelineno-99-26" href="#__codelineno-99-26"></a>    <span class="p">)</span>
</span><span id="__span-99-27"><a id="__codelineno-99-27" name="__codelineno-99-27" href="#__codelineno-99-27"></a>
</span><span id="__span-99-28"><a id="__codelineno-99-28" name="__codelineno-99-28" href="#__codelineno-99-28"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-99-29"><a id="__codelineno-99-29" name="__codelineno-99-29" href="#__codelineno-99-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-99-30"><a id="__codelineno-99-30" name="__codelineno-99-30" href="#__codelineno-99-30"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-99-31"><a id="__codelineno-99-31" name="__codelineno-99-31" href="#__codelineno-99-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-99-32"><a id="__codelineno-99-32" name="__codelineno-99-32" href="#__codelineno-99-32"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-99-33"><a id="__codelineno-99-33" name="__codelineno-99-33" href="#__codelineno-99-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-99-34"><a id="__codelineno-99-34" name="__codelineno-99-34" href="#__codelineno-99-34"></a><span class="c1">#&gt; cp1251</span>
</span><span id="__span-99-35"><a id="__codelineno-99-35" name="__codelineno-99-35" href="#__codelineno-99-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-99-36"><a id="__codelineno-99-36" name="__codelineno-99-36" href="#__codelineno-99-36"></a><span class="c1">#&gt; &quot;__&quot;</span>
</span><span id="__span-99-37"><a id="__codelineno-99-37" name="__codelineno-99-37" href="#__codelineno-99-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-99-38"><a id="__codelineno-99-38" name="__codelineno-99-38" href="#__codelineno-99-38"></a><span class="c1">#&gt; .env</span>
</span><span id="__span-99-39"><a id="__codelineno-99-39" name="__codelineno-99-39" href="#__codelineno-99-39"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-99-40"><a id="__codelineno-99-40" name="__codelineno-99-40" href="#__codelineno-99-40"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-99-41"><a id="__codelineno-99-41" name="__codelineno-99-41" href="#__codelineno-99-41"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>
</span><span id="__span-99-42"><a id="__codelineno-99-42" name="__codelineno-99-42" href="#__codelineno-99-42"></a><span class="c1">#&gt; None</span>
</span><span id="__span-99-43"><a id="__codelineno-99-43" name="__codelineno-99-43" href="#__codelineno-99-43"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_nested_delimiter</span><span class="p">)</span>
</span><span id="__span-99-44"><a id="__codelineno-99-44" name="__codelineno-99-44" href="#__codelineno-99-44"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<blockquote>
<p><strong>Важно</strong>: Параметр <code>env_exclude_inherit_parent</code> имеет приоритет над <code>env_include_inherit_parent</code> и тоже наследуется! Если какой-либо параметр указан и там и там, то этот параметр НЕ будет включен в список наследуемых:</p>
</blockquote>
<div class="language-py highlight"><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1" href="#__codelineno-100-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2" href="#__codelineno-100-2"></a>
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3" href="#__codelineno-100-3"></a>
</span><span id="__span-100-4"><a id="__codelineno-100-4" name="__codelineno-100-4" href="#__codelineno-100-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-100-5"><a id="__codelineno-100-5" name="__codelineno-100-5" href="#__codelineno-100-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-100-6"><a id="__codelineno-100-6" name="__codelineno-100-6" href="#__codelineno-100-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-100-7"><a id="__codelineno-100-7" name="__codelineno-100-7" href="#__codelineno-100-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-100-8"><a id="__codelineno-100-8" name="__codelineno-100-8" href="#__codelineno-100-8"></a>        <span class="p">],</span>
</span><span id="__span-100-9"><a id="__codelineno-100-9" name="__codelineno-100-9" href="#__codelineno-100-9"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-100-10"><a id="__codelineno-100-10" name="__codelineno-100-10" href="#__codelineno-100-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-100-11"><a id="__codelineno-100-11" name="__codelineno-100-11" href="#__codelineno-100-11"></a>        <span class="p">],</span>
</span><span id="__span-100-12"><a id="__codelineno-100-12" name="__codelineno-100-12" href="#__codelineno-100-12"></a>    <span class="p">)</span>
</span><span id="__span-100-13"><a id="__codelineno-100-13" name="__codelineno-100-13" href="#__codelineno-100-13"></a>
</span><span id="__span-100-14"><a id="__codelineno-100-14" name="__codelineno-100-14" href="#__codelineno-100-14"></a>
</span><span id="__span-100-15"><a id="__codelineno-100-15" name="__codelineno-100-15" href="#__codelineno-100-15"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-100-16"><a id="__codelineno-100-16" name="__codelineno-100-16" href="#__codelineno-100-16"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-100-17"><a id="__codelineno-100-17" name="__codelineno-100-17" href="#__codelineno-100-17"></a>
</span><span id="__span-100-18"><a id="__codelineno-100-18" name="__codelineno-100-18" href="#__codelineno-100-18"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-100-19"><a id="__codelineno-100-19" name="__codelineno-100-19" href="#__codelineno-100-19"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-100-20"><a id="__codelineno-100-20" name="__codelineno-100-20" href="#__codelineno-100-20"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-100-21"><a id="__codelineno-100-21" name="__codelineno-100-21" href="#__codelineno-100-21"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-100-22"><a id="__codelineno-100-22" name="__codelineno-100-22" href="#__codelineno-100-22"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-100-23"><a id="__codelineno-100-23" name="__codelineno-100-23" href="#__codelineno-100-23"></a>        <span class="p">],</span>
</span><span id="__span-100-24"><a id="__codelineno-100-24" name="__codelineno-100-24" href="#__codelineno-100-24"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-100-25"><a id="__codelineno-100-25" name="__codelineno-100-25" href="#__codelineno-100-25"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-100-26"><a id="__codelineno-100-26" name="__codelineno-100-26" href="#__codelineno-100-26"></a>        <span class="p">],</span>
</span><span id="__span-100-27"><a id="__codelineno-100-27" name="__codelineno-100-27" href="#__codelineno-100-27"></a>    <span class="p">)</span>
</span><span id="__span-100-28"><a id="__codelineno-100-28" name="__codelineno-100-28" href="#__codelineno-100-28"></a>
</span><span id="__span-100-29"><a id="__codelineno-100-29" name="__codelineno-100-29" href="#__codelineno-100-29"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-100-30"><a id="__codelineno-100-30" name="__codelineno-100-30" href="#__codelineno-100-30"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-100-31"><a id="__codelineno-100-31" name="__codelineno-100-31" href="#__codelineno-100-31"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-100-32"><a id="__codelineno-100-32" name="__codelineno-100-32" href="#__codelineno-100-32"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-100-33"><a id="__codelineno-100-33" name="__codelineno-100-33" href="#__codelineno-100-33"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-100-34"><a id="__codelineno-100-34" name="__codelineno-100-34" href="#__codelineno-100-34"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-100-35"><a id="__codelineno-100-35" name="__codelineno-100-35" href="#__codelineno-100-35"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-100-36"><a id="__codelineno-100-36" name="__codelineno-100-36" href="#__codelineno-100-36"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-100-37"><a id="__codelineno-100-37" name="__codelineno-100-37" href="#__codelineno-100-37"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<p>Чтоб отключить такое поведение и добиться того же результата, что и в примере выше, нужно сделать следующее:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1" href="#__codelineno-101-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2" href="#__codelineno-101-2"></a>
</span><span id="__span-101-3"><a id="__codelineno-101-3" name="__codelineno-101-3" href="#__codelineno-101-3"></a>
</span><span id="__span-101-4"><a id="__codelineno-101-4" name="__codelineno-101-4" href="#__codelineno-101-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-101-5"><a id="__codelineno-101-5" name="__codelineno-101-5" href="#__codelineno-101-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-101-6"><a id="__codelineno-101-6" name="__codelineno-101-6" href="#__codelineno-101-6"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-101-7"><a id="__codelineno-101-7" name="__codelineno-101-7" href="#__codelineno-101-7"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-101-8"><a id="__codelineno-101-8" name="__codelineno-101-8" href="#__codelineno-101-8"></a>        <span class="p">],</span>
</span><span id="__span-101-9"><a id="__codelineno-101-9" name="__codelineno-101-9" href="#__codelineno-101-9"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-101-10"><a id="__codelineno-101-10" name="__codelineno-101-10" href="#__codelineno-101-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-101-11"><a id="__codelineno-101-11" name="__codelineno-101-11" href="#__codelineno-101-11"></a>            <span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>   <span class="c1"># (1)!</span>
</span><span id="__span-101-12"><a id="__codelineno-101-12" name="__codelineno-101-12" href="#__codelineno-101-12"></a>        <span class="p">],</span>
</span><span id="__span-101-13"><a id="__codelineno-101-13" name="__codelineno-101-13" href="#__codelineno-101-13"></a>    <span class="p">)</span>
</span><span id="__span-101-14"><a id="__codelineno-101-14" name="__codelineno-101-14" href="#__codelineno-101-14"></a>
</span><span id="__span-101-15"><a id="__codelineno-101-15" name="__codelineno-101-15" href="#__codelineno-101-15"></a>
</span><span id="__span-101-16"><a id="__codelineno-101-16" name="__codelineno-101-16" href="#__codelineno-101-16"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-101-17"><a id="__codelineno-101-17" name="__codelineno-101-17" href="#__codelineno-101-17"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-101-18"><a id="__codelineno-101-18" name="__codelineno-101-18" href="#__codelineno-101-18"></a>
</span><span id="__span-101-19"><a id="__codelineno-101-19" name="__codelineno-101-19" href="#__codelineno-101-19"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-101-20"><a id="__codelineno-101-20" name="__codelineno-101-20" href="#__codelineno-101-20"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;.env, .env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-101-21"><a id="__codelineno-101-21" name="__codelineno-101-21" href="#__codelineno-101-21"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-101-22"><a id="__codelineno-101-22" name="__codelineno-101-22" href="#__codelineno-101-22"></a>        <span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-101-23"><a id="__codelineno-101-23" name="__codelineno-101-23" href="#__codelineno-101-23"></a>            <span class="s2">&quot;env_file&quot;</span><span class="p">,</span>
</span><span id="__span-101-24"><a id="__codelineno-101-24" name="__codelineno-101-24" href="#__codelineno-101-24"></a>        <span class="p">],</span>
</span><span id="__span-101-25"><a id="__codelineno-101-25" name="__codelineno-101-25" href="#__codelineno-101-25"></a>        <span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-101-26"><a id="__codelineno-101-26" name="__codelineno-101-26" href="#__codelineno-101-26"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-101-27"><a id="__codelineno-101-27" name="__codelineno-101-27" href="#__codelineno-101-27"></a>        <span class="p">],</span>
</span><span id="__span-101-28"><a id="__codelineno-101-28" name="__codelineno-101-28" href="#__codelineno-101-28"></a>    <span class="p">)</span>
</span><span id="__span-101-29"><a id="__codelineno-101-29" name="__codelineno-101-29" href="#__codelineno-101-29"></a>
</span><span id="__span-101-30"><a id="__codelineno-101-30" name="__codelineno-101-30" href="#__codelineno-101-30"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-101-31"><a id="__codelineno-101-31" name="__codelineno-101-31" href="#__codelineno-101-31"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-101-32"><a id="__codelineno-101-32" name="__codelineno-101-32" href="#__codelineno-101-32"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-101-33"><a id="__codelineno-101-33" name="__codelineno-101-33" href="#__codelineno-101-33"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-101-34"><a id="__codelineno-101-34" name="__codelineno-101-34" href="#__codelineno-101-34"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-101-35"><a id="__codelineno-101-35" name="__codelineno-101-35" href="#__codelineno-101-35"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file</span><span class="p">)</span>
</span><span id="__span-101-36"><a id="__codelineno-101-36" name="__codelineno-101-36" href="#__codelineno-101-36"></a><span class="c1">#&gt; .env, .env.prod</span>
</span><span id="__span-101-37"><a id="__codelineno-101-37" name="__codelineno-101-37" href="#__codelineno-101-37"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-101-38"><a id="__codelineno-101-38" name="__codelineno-101-38" href="#__codelineno-101-38"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<ol>
<li>Исключаем из наследования <code>env_exclude_inherit_parent</code> параметр.</li>
</ol>
<blockquote>
<p><strong>Полезно</strong>: Для просмотра всех унаследованных параметров (собственных настроек) используйте свойство <a href="#inherited_params">inherited_params</a> - <code class="language-python highlight"><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">)</span></code></p>
</blockquote>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1" href="#__codelineno-102-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2" href="#__codelineno-102-2"></a><span class="n">env_include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3" href="#__codelineno-102-3"></a><span class="w">    </span><span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-102-4"><a id="__codelineno-102-4" name="__codelineno-102-4" href="#__codelineno-102-4"></a><span class="p">]</span>
</span><span id="__span-102-5"><a id="__codelineno-102-5" name="__codelineno-102-5" href="#__codelineno-102-5"></a><span class="n">env_exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-102-6"><a id="__codelineno-102-6" name="__codelineno-102-6" href="#__codelineno-102-6"></a><span class="w">    </span><span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-102-7"><a id="__codelineno-102-7" name="__codelineno-102-7" href="#__codelineno-102-7"></a><span class="p">]</span>
</span></code></pre></div>
<h2 id="model_config">model_config</h2>
<p>Тип: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">SettingsConfigDict</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">SettingsConfigSchema</span><span class="p">()</span><span class="o">.</span><span class="n">config_model_dict</span><span class="p">()</span></code></p>
<p><strong>Общая информация</strong>:</p>
<p>Содержит все стандартные настройки <code class="language-python highlight"><span class="n">pydantic</span><span class="o">.</span><span class="n">ConfigDict</span></code>, такие как <code>extra</code>, <code>arbitrary_types_allowed</code> и т.д. Поддерживает все настройки, входящие в <code>file_config</code> и <code>env_config</code>. А так же имеет дополнительные собственные настройки, относящиеся к <code>arfi-settings</code>.</p>
<p><strong>Что делает</strong>:</p>
<p>Единое пространство для описания всех настроек модели.</p>
<blockquote>
<p><strong>Важно</strong>: Настройки, указанные в <code>file_config</code> и <code>env_config</code> будут переопределять те же настройки, указанные в <code>model_config</code>.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1" href="#__codelineno-103-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-103-2"><a id="__codelineno-103-2" name="__codelineno-103-2" href="#__codelineno-103-2"></a>
</span><span id="__span-103-3"><a id="__codelineno-103-3" name="__codelineno-103-3" href="#__codelineno-103-3"></a>
</span><span id="__span-103-4"><a id="__codelineno-103-4" name="__codelineno-103-4" href="#__codelineno-103-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-103-5"><a id="__codelineno-103-5" name="__codelineno-103-5" href="#__codelineno-103-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-103-6"><a id="__codelineno-103-6" name="__codelineno-103-6" href="#__codelineno-103-6"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="s2">&quot;settings/config&quot;</span><span class="p">,</span>
</span><span id="__span-103-7"><a id="__codelineno-103-7" name="__codelineno-103-7" href="#__codelineno-103-7"></a>        <span class="n">env_file</span> <span class="o">=</span> <span class="s2">&quot;.env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-103-8"><a id="__codelineno-103-8" name="__codelineno-103-8" href="#__codelineno-103-8"></a>    <span class="p">)</span>
</span><span id="__span-103-9"><a id="__codelineno-103-9" name="__codelineno-103-9" href="#__codelineno-103-9"></a>
</span><span id="__span-103-10"><a id="__codelineno-103-10" name="__codelineno-103-10" href="#__codelineno-103-10"></a>
</span><span id="__span-103-11"><a id="__codelineno-103-11" name="__codelineno-103-11" href="#__codelineno-103-11"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-103-12"><a id="__codelineno-103-12" name="__codelineno-103-12" href="#__codelineno-103-12"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-103-13"><a id="__codelineno-103-13" name="__codelineno-103-13" href="#__codelineno-103-13"></a><span class="c1">#&gt; [PosixPath(&#39;settings/config/config&#39;)]</span>
</span></code></pre></div>
<h3 id="case_sensitive">case_sensitive</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>Задает значение для <a href="#conf_case_sensitive">conf_case_sensitive</a>, если сама переменная <code>conf_case_sensitive</code> не задана ни в <a href="#file_config">file_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Задает значение для <a href="#env_case_sensitive">env_case_sensitive</a>, если сама переменная <code>env_case_sensitive</code> не задана ни в <a href="#env_config">env_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Определяет регистрозависимый или регистронезависимый режим чтения имён файлов из секретной директории <a href="#secrets_dir">secrets_dir</a>.</li>
<li>Влияет на передачу переменных обработчиком от класса-родителя к классу-ребёнку в концепции обратного наследования. Так как на данный момент классу-ребёнку не известно откуда именно класс-родитель прочитал конкретную переменную (из файлов, из переменных окружения или из секретной директории), то настройки регистронезависимости, заданные в классе-ребёнке, не могут быть применены по отдельности к именам конкретных переменных, по этому при передаче переменных от одного обработчика к другому в данный момент применяется значение, указанное в общей переменной <code>case_sensitive</code>.
После доработки режима отладки возможно такое поведение изменится, и, при множественной вложенности моделей, при передаче переменных между обработчиками будут применяться точные настройки регистронезависимости, которые указаны в конкретном классе, к каждой переменной.</li>
</ol>
<blockquote>
<p><strong>Заметка</strong>: Значение, указанное в переменных <code>conf_case_sensitive</code> и <code>env_case_sensitive</code> всегда имеет приоритет над значение, указанным в переменной <code>case_sensitive</code>.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1" href="#__codelineno-104-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-104-2"><a id="__codelineno-104-2" name="__codelineno-104-2" href="#__codelineno-104-2"></a>
</span><span id="__span-104-3"><a id="__codelineno-104-3" name="__codelineno-104-3" href="#__codelineno-104-3"></a>
</span><span id="__span-104-4"><a id="__codelineno-104-4" name="__codelineno-104-4" href="#__codelineno-104-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-104-5"><a id="__codelineno-104-5" name="__codelineno-104-5" href="#__codelineno-104-5"></a>    <span class="k">pass</span>
</span><span id="__span-104-6"><a id="__codelineno-104-6" name="__codelineno-104-6" href="#__codelineno-104-6"></a>
</span><span id="__span-104-7"><a id="__codelineno-104-7" name="__codelineno-104-7" href="#__codelineno-104-7"></a>
</span><span id="__span-104-8"><a id="__codelineno-104-8" name="__codelineno-104-8" href="#__codelineno-104-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-104-9"><a id="__codelineno-104-9" name="__codelineno-104-9" href="#__codelineno-104-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">)</span>
</span><span id="__span-104-10"><a id="__codelineno-104-10" name="__codelineno-104-10" href="#__codelineno-104-10"></a><span class="c1">#&gt; False</span>
</span><span id="__span-104-11"><a id="__codelineno-104-11" name="__codelineno-104-11" href="#__codelineno-104-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_case_sensitive</span><span class="p">)</span>
</span><span id="__span-104-12"><a id="__codelineno-104-12" name="__codelineno-104-12" href="#__codelineno-104-12"></a><span class="c1">#&gt; False</span>
</span><span id="__span-104-13"><a id="__codelineno-104-13" name="__codelineno-104-13" href="#__codelineno-104-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_case_sensitive</span><span class="p">)</span>
</span><span id="__span-104-14"><a id="__codelineno-104-14" name="__codelineno-104-14" href="#__codelineno-104-14"></a><span class="c1">#&gt; False</span>
</span><span id="__span-104-15"><a id="__codelineno-104-15" name="__codelineno-104-15" href="#__codelineno-104-15"></a>
</span><span id="__span-104-16"><a id="__codelineno-104-16" name="__codelineno-104-16" href="#__codelineno-104-16"></a>
</span><span id="__span-104-17"><a id="__codelineno-104-17" name="__codelineno-104-17" href="#__codelineno-104-17"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-104-18"><a id="__codelineno-104-18" name="__codelineno-104-18" href="#__codelineno-104-18"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-104-19"><a id="__codelineno-104-19" name="__codelineno-104-19" href="#__codelineno-104-19"></a>        <span class="n">case_sensitive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-104-20"><a id="__codelineno-104-20" name="__codelineno-104-20" href="#__codelineno-104-20"></a>    <span class="p">)</span>
</span><span id="__span-104-21"><a id="__codelineno-104-21" name="__codelineno-104-21" href="#__codelineno-104-21"></a>
</span><span id="__span-104-22"><a id="__codelineno-104-22" name="__codelineno-104-22" href="#__codelineno-104-22"></a>
</span><span id="__span-104-23"><a id="__codelineno-104-23" name="__codelineno-104-23" href="#__codelineno-104-23"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-104-24"><a id="__codelineno-104-24" name="__codelineno-104-24" href="#__codelineno-104-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">case_sensitive</span><span class="p">)</span>
</span><span id="__span-104-25"><a id="__codelineno-104-25" name="__codelineno-104-25" href="#__codelineno-104-25"></a><span class="c1">#&gt; True</span>
</span><span id="__span-104-26"><a id="__codelineno-104-26" name="__codelineno-104-26" href="#__codelineno-104-26"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_case_sensitive</span><span class="p">)</span>
</span><span id="__span-104-27"><a id="__codelineno-104-27" name="__codelineno-104-27" href="#__codelineno-104-27"></a><span class="c1">#&gt; True</span>
</span><span id="__span-104-28"><a id="__codelineno-104-28" name="__codelineno-104-28" href="#__codelineno-104-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_case_sensitive</span><span class="p">)</span>
</span><span id="__span-104-29"><a id="__codelineno-104-29" name="__codelineno-104-29" href="#__codelineno-104-29"></a><span class="c1">#&gt; True</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1" href="#__codelineno-105-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2" href="#__codelineno-105-2"></a><span class="n">case_sensitive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span></code></pre></div>
<h3 id="ignore_missing">ignore_missing</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>Задает значение для <a href="#conf_ignore_missing">conf_ignore_missing</a>, если сама переменная <code>conf_ignore_missing</code> не задана ни в <a href="#file_config">file_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Задает значение для <a href="#env_ignore_missing">env_ignore_missing</a>, если сама переменная <code>env_ignore_missing</code> не задана ни в <a href="#env_config">env_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Определяет игнорировать или нет отсутствие файлов в секретной директории <a href="#secrets_dir">secrets_dir</a>.</li>
</ol>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1" href="#__codelineno-106-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2" href="#__codelineno-106-2"></a>
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3" href="#__codelineno-106-3"></a>
</span><span id="__span-106-4"><a id="__codelineno-106-4" name="__codelineno-106-4" href="#__codelineno-106-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-106-5"><a id="__codelineno-106-5" name="__codelineno-106-5" href="#__codelineno-106-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-106-6"><a id="__codelineno-106-6" name="__codelineno-106-6" href="#__codelineno-106-6"></a>        <span class="n">ignore_missing</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="__span-106-7"><a id="__codelineno-106-7" name="__codelineno-106-7" href="#__codelineno-106-7"></a>    <span class="p">)</span>
</span><span id="__span-106-8"><a id="__codelineno-106-8" name="__codelineno-106-8" href="#__codelineno-106-8"></a>
</span><span id="__span-106-9"><a id="__codelineno-106-9" name="__codelineno-106-9" href="#__codelineno-106-9"></a>
</span><span id="__span-106-10"><a id="__codelineno-106-10" name="__codelineno-106-10" href="#__codelineno-106-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-106-11"><a id="__codelineno-106-11" name="__codelineno-106-11" href="#__codelineno-106-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">ignore_missing</span><span class="p">)</span>  <span class="c1"># default True</span>
</span><span id="__span-106-12"><a id="__codelineno-106-12" name="__codelineno-106-12" href="#__codelineno-106-12"></a><span class="c1">#&gt; False</span>
</span><span id="__span-106-13"><a id="__codelineno-106-13" name="__codelineno-106-13" href="#__codelineno-106-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_ignore_missing</span><span class="p">)</span>  <span class="c1"># default True</span>
</span><span id="__span-106-14"><a id="__codelineno-106-14" name="__codelineno-106-14" href="#__codelineno-106-14"></a><span class="c1">#&gt; False</span>
</span><span id="__span-106-15"><a id="__codelineno-106-15" name="__codelineno-106-15" href="#__codelineno-106-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_ignore_missing</span><span class="p">)</span>  <span class="c1"># default True</span>
</span><span id="__span-106-16"><a id="__codelineno-106-16" name="__codelineno-106-16" href="#__codelineno-106-16"></a><span class="c1">#&gt; False</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1" href="#__codelineno-107-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2" href="#__codelineno-107-2"></a><span class="n">ignore_missing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h3 id="encoding">encoding</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span>  <span class="c1"># utf-8</span></code></p>
<p><strong>Что делает</strong>:</p>
<ol>
<li>Задает значение для <a href="#conf_file_encoding">conf_file_encoding</a>, если сама переменная <code>conf_file_encoding</code> не задана ни в <a href="#file_config">file_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Задает значение для <a href="#env_file_encoding">env_file_encoding</a>, если сама переменная <code>env_file_encoding</code> не задана ни в <a href="#env_config">env_config</a> ни в <a href="#model_config">model_config</a>.</li>
<li>Определяет кодировку при чтении файлов из секретной директории <a href="#secrets_dir">secrets_dir</a>.</li>
</ol>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1" href="#__codelineno-108-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2" href="#__codelineno-108-2"></a>
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3" href="#__codelineno-108-3"></a>
</span><span id="__span-108-4"><a id="__codelineno-108-4" name="__codelineno-108-4" href="#__codelineno-108-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-108-5"><a id="__codelineno-108-5" name="__codelineno-108-5" href="#__codelineno-108-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-108-6"><a id="__codelineno-108-6" name="__codelineno-108-6" href="#__codelineno-108-6"></a>        <span class="n">encoding</span> <span class="o">=</span> <span class="s2">&quot;ISO-8859-1&quot;</span><span class="p">,</span>
</span><span id="__span-108-7"><a id="__codelineno-108-7" name="__codelineno-108-7" href="#__codelineno-108-7"></a>    <span class="p">)</span>
</span><span id="__span-108-8"><a id="__codelineno-108-8" name="__codelineno-108-8" href="#__codelineno-108-8"></a>
</span><span id="__span-108-9"><a id="__codelineno-108-9" name="__codelineno-108-9" href="#__codelineno-108-9"></a>
</span><span id="__span-108-10"><a id="__codelineno-108-10" name="__codelineno-108-10" href="#__codelineno-108-10"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-108-11"><a id="__codelineno-108-11" name="__codelineno-108-11" href="#__codelineno-108-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>  <span class="c1"># default None</span>
</span><span id="__span-108-12"><a id="__codelineno-108-12" name="__codelineno-108-12" href="#__codelineno-108-12"></a><span class="c1">#&gt; ISO-8859-1</span>
</span><span id="__span-108-13"><a id="__codelineno-108-13" name="__codelineno-108-13" href="#__codelineno-108-13"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">conf_file_encoding</span><span class="p">)</span>  <span class="c1"># default None</span>
</span><span id="__span-108-14"><a id="__codelineno-108-14" name="__codelineno-108-14" href="#__codelineno-108-14"></a><span class="c1">#&gt; ISO-8859-1</span>
</span><span id="__span-108-15"><a id="__codelineno-108-15" name="__codelineno-108-15" href="#__codelineno-108-15"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">env_file_encoding</span><span class="p">)</span>  <span class="c1"># default None</span>
</span><span id="__span-108-16"><a id="__codelineno-108-16" name="__codelineno-108-16" href="#__codelineno-108-16"></a><span class="c1">#&gt; ISO-8859-1</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1" href="#__codelineno-109-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2" href="#__codelineno-109-2"></a><span class="n">encoding</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;utf-8&quot;</span>
</span></code></pre></div>
<h3 id="cli">cli</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">False</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Разрешает или запрещает чтение переменных из командной строки. Так как в большинстве случаев чтение переменных из командной строки не требуется, то по умолчание чтение отключено. При обратном наследовании НЕ наследуется, нужно включать для каждого класса отдельно, либо для всех классов сразу в файле <code>pyproject.toml</code>.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1" href="#__codelineno-110-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-110-2"><a id="__codelineno-110-2" name="__codelineno-110-2" href="#__codelineno-110-2"></a>
</span><span id="__span-110-3"><a id="__codelineno-110-3" name="__codelineno-110-3" href="#__codelineno-110-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-110-4"><a id="__codelineno-110-4" name="__codelineno-110-4" href="#__codelineno-110-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-110-5"><a id="__codelineno-110-5" name="__codelineno-110-5" href="#__codelineno-110-5"></a>        <span class="n">cli</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-110-6"><a id="__codelineno-110-6" name="__codelineno-110-6" href="#__codelineno-110-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1" href="#__codelineno-111-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2" href="#__codelineno-111-2"></a><span class="n">cli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="w">            </span><span class="c1"># (1)!</span>
</span></code></pre></div>
<ol>
<li>Включаем чтение переменных их командной строки для всех классов</li>
</ol>
<h3 id="secrets_dir">secrets_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Задаёт секретную директорию, откуда будут читаться значения для каждого атрибута класса. При этом имена файлов в этой директории должны соответствовать алиасам полей текущей модели. Зависимость от регистра при чтении имён файлов задаётся параметром <a href="#case_sensitive">case_sensitive</a></p>
<p>При обратном наследовании НЕ наследуется, нужно указывать для каждого класса отдельно, либо для всех классов сразу в файле <code>pyproject.toml</code>.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-112-2"><a id="__codelineno-112-2" name="__codelineno-112-2" href="#__codelineno-112-2"></a>
</span><span id="__span-112-3"><a id="__codelineno-112-3" name="__codelineno-112-3" href="#__codelineno-112-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-112-4"><a id="__codelineno-112-4" name="__codelineno-112-4" href="#__codelineno-112-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-112-5"><a id="__codelineno-112-5" name="__codelineno-112-5" href="#__codelineno-112-5"></a>        <span class="n">secrets_dir</span> <span class="o">=</span> <span class="s2">&quot;/var/run/secrets&quot;</span><span class="p">,</span>
</span><span id="__span-112-6"><a id="__codelineno-112-6" name="__codelineno-112-6" href="#__codelineno-112-6"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2" href="#__codelineno-113-2"></a><span class="n">secrets_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/var/run/secrets&quot;</span>
</span></code></pre></div>
<h3 id="exclude_inherit_parent">exclude_inherit_parent</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Общее место для указания настроек, которые нужно исключить из обратного наследования. Поддерживает все значения которые входят в <a href="#conf_exclude_inherit_parent">conf_exclude_inherit_parent</a> и <a href="#env_exclude_inherit_parent">env_exclude_inherit_parent</a>.
При добавлении параметра в <code>exclude_inherit_parent</code>, он автоматически добавляется либо в <code>env_exclude_inherit_parent</code> либо в <code>conf_exclude_inherit_parent</code> в зависимости от того, к каким настройкам этот параметр относится.</p>
<p>При обратном наследовании НЕ наследуется.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-114-2"><a id="__codelineno-114-2" name="__codelineno-114-2" href="#__codelineno-114-2"></a>
</span><span id="__span-114-3"><a id="__codelineno-114-3" name="__codelineno-114-3" href="#__codelineno-114-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-114-4"><a id="__codelineno-114-4" name="__codelineno-114-4" href="#__codelineno-114-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-114-5"><a id="__codelineno-114-5" name="__codelineno-114-5" href="#__codelineno-114-5"></a>        <span class="n">exclude_inherit_parent</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-114-6"><a id="__codelineno-114-6" name="__codelineno-114-6" href="#__codelineno-114-6"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-114-7"><a id="__codelineno-114-7" name="__codelineno-114-7" href="#__codelineno-114-7"></a>            <span class="s2">&quot;conf_custom_ext_handler&quot;</span><span class="p">,</span>
</span><span id="__span-114-8"><a id="__codelineno-114-8" name="__codelineno-114-8" href="#__codelineno-114-8"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-114-9"><a id="__codelineno-114-9" name="__codelineno-114-9" href="#__codelineno-114-9"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-114-10"><a id="__codelineno-114-10" name="__codelineno-114-10" href="#__codelineno-114-10"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-114-11"><a id="__codelineno-114-11" name="__codelineno-114-11" href="#__codelineno-114-11"></a>        <span class="p">],</span>
</span><span id="__span-114-12"><a id="__codelineno-114-12" name="__codelineno-114-12" href="#__codelineno-114-12"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-115-2"><a id="__codelineno-115-2" name="__codelineno-115-2" href="#__codelineno-115-2"></a><span class="n">exclude_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;env_prefix_as_source_mode_dir&quot;</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="include_inherit_parent">include_inherit_parent</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Общее место для указания только тех настроек, которые нужно наследовать от класса-родителя в концепции обратного наследования.
Поддерживает все значения которые входят в <a href="#conf_include_inherit_parent">conf_include_inherit_parent</a> и <a href="#env_include_inherit_parent">env_include_inherit_parent</a>.</p>
<p>При добавлении параметра в <code>include_inherit_parent</code>, он автоматически добавляется либо в <code>env_include_inherit_parent</code> либо в <code>conf_include_inherit_parent</code> в зависимости от того, к каким настройкам этот параметр относится.</p>
<p>При обратном наследовании НЕ наследуется.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2" href="#__codelineno-116-2"></a>
</span><span id="__span-116-3"><a id="__codelineno-116-3" name="__codelineno-116-3" href="#__codelineno-116-3"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-116-4"><a id="__codelineno-116-4" name="__codelineno-116-4" href="#__codelineno-116-4"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-116-5"><a id="__codelineno-116-5" name="__codelineno-116-5" href="#__codelineno-116-5"></a>        <span class="n">include_inherit_parent</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-116-6"><a id="__codelineno-116-6" name="__codelineno-116-6" href="#__codelineno-116-6"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-116-7"><a id="__codelineno-116-7" name="__codelineno-116-7" href="#__codelineno-116-7"></a>            <span class="s2">&quot;conf_custom_ext_handler&quot;</span><span class="p">,</span>
</span><span id="__span-116-8"><a id="__codelineno-116-8" name="__codelineno-116-8" href="#__codelineno-116-8"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-116-9"><a id="__codelineno-116-9" name="__codelineno-116-9" href="#__codelineno-116-9"></a>            <span class="s2">&quot;env_file_encoding&quot;</span><span class="p">,</span>
</span><span id="__span-116-10"><a id="__codelineno-116-10" name="__codelineno-116-10" href="#__codelineno-116-10"></a>        <span class="p">],</span>
</span><span id="__span-116-11"><a id="__codelineno-116-11" name="__codelineno-116-11" href="#__codelineno-116-11"></a>    <span class="p">)</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2" href="#__codelineno-117-2"></a><span class="n">include_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-117-3"><a id="__codelineno-117-3" name="__codelineno-117-3" href="#__codelineno-117-3"></a><span class="w">  </span><span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-117-4"><a id="__codelineno-117-4" name="__codelineno-117-4" href="#__codelineno-117-4"></a><span class="w">  </span><span class="s2">&quot;conf_dir&quot;</span><span class="p">,</span>
</span><span id="__span-117-5"><a id="__codelineno-117-5" name="__codelineno-117-5" href="#__codelineno-117-5"></a><span class="w">  </span><span class="s2">&quot;conf_file&quot;</span>
</span><span id="__span-117-6"><a id="__codelineno-117-6" name="__codelineno-117-6" href="#__codelineno-117-6"></a><span class="p">]</span>
</span></code></pre></div>
<h2 id="file_config_inherit_parent">file_config_inherit_parent</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование всех параметров, относящихся к чтению из файлов конфигураций.
При отключении наследования все значения параметров устанавливаются по умолчанию, либо в значения, указанные в файле <code>pyproject.toml</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">FileConfigDict</span>
</span><span id="__span-118-2"><a id="__codelineno-118-2" name="__codelineno-118-2" href="#__codelineno-118-2"></a>
</span><span id="__span-118-3"><a id="__codelineno-118-3" name="__codelineno-118-3" href="#__codelineno-118-3"></a>
</span><span id="__span-118-4"><a id="__codelineno-118-4" name="__codelineno-118-4" href="#__codelineno-118-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-118-5"><a id="__codelineno-118-5" name="__codelineno-118-5" href="#__codelineno-118-5"></a>    <span class="n">file_config_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-118-6"><a id="__codelineno-118-6" name="__codelineno-118-6" href="#__codelineno-118-6"></a>
</span><span id="__span-118-7"><a id="__codelineno-118-7" name="__codelineno-118-7" href="#__codelineno-118-7"></a>
</span><span id="__span-118-8"><a id="__codelineno-118-8" name="__codelineno-118-8" href="#__codelineno-118-8"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-118-9"><a id="__codelineno-118-9" name="__codelineno-118-9" href="#__codelineno-118-9"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-118-10"><a id="__codelineno-118-10" name="__codelineno-118-10" href="#__codelineno-118-10"></a>
</span><span id="__span-118-11"><a id="__codelineno-118-11" name="__codelineno-118-11" href="#__codelineno-118-11"></a>    <span class="n">file_config</span> <span class="o">=</span> <span class="n">FileConfigDict</span><span class="p">(</span>
</span><span id="__span-118-12"><a id="__codelineno-118-12" name="__codelineno-118-12" href="#__codelineno-118-12"></a>        <span class="n">conf_dir</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-118-13"><a id="__codelineno-118-13" name="__codelineno-118-13" href="#__codelineno-118-13"></a>        <span class="n">conf_file</span> <span class="o">=</span> <span class="s2">&quot;myconfig.json&quot;</span><span class="p">,</span>
</span><span id="__span-118-14"><a id="__codelineno-118-14" name="__codelineno-118-14" href="#__codelineno-118-14"></a>    <span class="p">)</span>
</span><span id="__span-118-15"><a id="__codelineno-118-15" name="__codelineno-118-15" href="#__codelineno-118-15"></a>
</span><span id="__span-118-16"><a id="__codelineno-118-16" name="__codelineno-118-16" href="#__codelineno-118-16"></a>
</span><span id="__span-118-17"><a id="__codelineno-118-17" name="__codelineno-118-17" href="#__codelineno-118-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-118-18"><a id="__codelineno-118-18" name="__codelineno-118-18" href="#__codelineno-118-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-118-19"><a id="__codelineno-118-19" name="__codelineno-118-19" href="#__codelineno-118-19"></a><span class="c1">#&gt; [PosixPath(&#39;myconfig.json&#39;)]</span>
</span><span id="__span-118-20"><a id="__codelineno-118-20" name="__codelineno-118-20" href="#__codelineno-118-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-118-21"><a id="__codelineno-118-21" name="__codelineno-118-21" href="#__codelineno-118-21"></a><span class="c1">#&gt; [PosixPath(&#39;config/child/config&#39;)]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-119-2"><a id="__codelineno-119-2" name="__codelineno-119-2" href="#__codelineno-119-2"></a><span class="n">file_config_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="env_config_inherit_parent">env_config_inherit_parent</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование всех параметров, относящихся к чтению из переменных окружения.
При отключении наследования все значения параметров устанавливаются по умолчанию, либо в значения, указанные в файле <code>pyproject.toml</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2" href="#__codelineno-120-2"></a>
</span><span id="__span-120-3"><a id="__codelineno-120-3" name="__codelineno-120-3" href="#__codelineno-120-3"></a>
</span><span id="__span-120-4"><a id="__codelineno-120-4" name="__codelineno-120-4" href="#__codelineno-120-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-120-5"><a id="__codelineno-120-5" name="__codelineno-120-5" href="#__codelineno-120-5"></a>    <span class="n">env_config_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-120-6"><a id="__codelineno-120-6" name="__codelineno-120-6" href="#__codelineno-120-6"></a>
</span><span id="__span-120-7"><a id="__codelineno-120-7" name="__codelineno-120-7" href="#__codelineno-120-7"></a>
</span><span id="__span-120-8"><a id="__codelineno-120-8" name="__codelineno-120-8" href="#__codelineno-120-8"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-120-9"><a id="__codelineno-120-9" name="__codelineno-120-9" href="#__codelineno-120-9"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-120-10"><a id="__codelineno-120-10" name="__codelineno-120-10" href="#__codelineno-120-10"></a>
</span><span id="__span-120-11"><a id="__codelineno-120-11" name="__codelineno-120-11" href="#__codelineno-120-11"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-120-12"><a id="__codelineno-120-12" name="__codelineno-120-12" href="#__codelineno-120-12"></a>        <span class="n">env_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-120-13"><a id="__codelineno-120-13" name="__codelineno-120-13" href="#__codelineno-120-13"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-120-14"><a id="__codelineno-120-14" name="__codelineno-120-14" href="#__codelineno-120-14"></a>    <span class="p">)</span>
</span><span id="__span-120-15"><a id="__codelineno-120-15" name="__codelineno-120-15" href="#__codelineno-120-15"></a>
</span><span id="__span-120-16"><a id="__codelineno-120-16" name="__codelineno-120-16" href="#__codelineno-120-16"></a>
</span><span id="__span-120-17"><a id="__codelineno-120-17" name="__codelineno-120-17" href="#__codelineno-120-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-120-18"><a id="__codelineno-120-18" name="__codelineno-120-18" href="#__codelineno-120-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">env_path</span><span class="p">)</span>
</span><span id="__span-120-19"><a id="__codelineno-120-19" name="__codelineno-120-19" href="#__codelineno-120-19"></a><span class="c1">#&gt; []</span>
</span><span id="__span-120-20"><a id="__codelineno-120-20" name="__codelineno-120-20" href="#__codelineno-120-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-120-21"><a id="__codelineno-120-21" name="__codelineno-120-21" href="#__codelineno-120-21"></a><span class="c1">#&gt; APP_</span>
</span><span id="__span-120-22"><a id="__codelineno-120-22" name="__codelineno-120-22" href="#__codelineno-120-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">env_path</span><span class="p">)</span>
</span><span id="__span-120-23"><a id="__codelineno-120-23" name="__codelineno-120-23" href="#__codelineno-120-23"></a><span class="c1">#&gt; [PosixPath(&#39;.env&#39;)]</span>
</span><span id="__span-120-24"><a id="__codelineno-120-24" name="__codelineno-120-24" href="#__codelineno-120-24"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">env_prefix</span><span class="p">)</span>
</span><span id="__span-120-25"><a id="__codelineno-120-25" name="__codelineno-120-25" href="#__codelineno-120-25"></a><span class="c1">#&gt; &quot;&quot;</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2" href="#__codelineno-121-2"></a><span class="n">env_config_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="ordered_settings">ordered_settings</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[</span><span class="s2">&quot;cli&quot;</span><span class="p">,</span> <span class="n">init_kwargs</span><span class="s2">&quot;, &quot;</span><span class="n">env</span><span class="s2">&quot;, &quot;</span><span class="n">env_file</span><span class="s2">&quot;, &quot;</span><span class="n">secrets</span><span class="s2">&quot;, &quot;</span><span class="n">conf_file</span><span class="s2">&quot;]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает порядок источников чтения настроек. Первый источник в списке наиболее приоритетный.
На самом деле в этом списке указываются имена обработчиков. Можно указать как короткое имя, как указано в значении по умолчанию, так и полное. Например:
<div class="language-py highlight"><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a><span class="p">[</span>
</span><span id="__span-122-2"><a id="__codelineno-122-2" name="__codelineno-122-2" href="#__codelineno-122-2"></a>  <span class="s2">&quot;cli_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-122-3"><a id="__codelineno-122-3" name="__codelineno-122-3" href="#__codelineno-122-3"></a>  <span class="s2">&quot;init_kwargs_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-122-4"><a id="__codelineno-122-4" name="__codelineno-122-4" href="#__codelineno-122-4"></a>  <span class="s2">&quot;env_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-122-5"><a id="__codelineno-122-5" name="__codelineno-122-5" href="#__codelineno-122-5"></a>  <span class="s2">&quot;env_file_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-122-6"><a id="__codelineno-122-6" name="__codelineno-122-6" href="#__codelineno-122-6"></a>  <span class="s2">&quot;secrets_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-122-7"><a id="__codelineno-122-7" name="__codelineno-122-7" href="#__codelineno-122-7"></a>  <span class="s2">&quot;conf_file_ordered_settings_handler&quot;</span><span class="p">,</span>
</span><span id="__span-122-8"><a id="__codelineno-122-8" name="__codelineno-122-8" href="#__codelineno-122-8"></a><span class="p">]</span>
</span></code></pre></div>
Можно удалять, менять местами и добавлять собственные обработчики.</p>
<p>Как создавать собственные обработчики написано <a href="../handlers/">здесь</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-123-2"><a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>
</span><span id="__span-123-3"><a id="__codelineno-123-3" name="__codelineno-123-3" href="#__codelineno-123-3"></a>
</span><span id="__span-123-4"><a id="__codelineno-123-4" name="__codelineno-123-4" href="#__codelineno-123-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-123-5"><a id="__codelineno-123-5" name="__codelineno-123-5" href="#__codelineno-123-5"></a>    <span class="n">ordered_settings</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-123-6"><a id="__codelineno-123-6" name="__codelineno-123-6" href="#__codelineno-123-6"></a>      <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-123-7"><a id="__codelineno-123-7" name="__codelineno-123-7" href="#__codelineno-123-7"></a>      <span class="s2">&quot;conf_file&quot;</span>
</span><span id="__span-123-8"><a id="__codelineno-123-8" name="__codelineno-123-8" href="#__codelineno-123-8"></a>    <span class="p">]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-124-2"><a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a><span class="n">ordered_settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-124-3"><a id="__codelineno-124-3" name="__codelineno-124-3" href="#__codelineno-124-3"></a><span class="w">  </span><span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-124-4"><a id="__codelineno-124-4" name="__codelineno-124-4" href="#__codelineno-124-4"></a><span class="w">  </span><span class="s2">&quot;conf_file&quot;</span>
</span><span id="__span-124-5"><a id="__codelineno-124-5" name="__codelineno-124-5" href="#__codelineno-124-5"></a><span class="p">]</span>
</span></code></pre></div>
<h2 id="ordered_settings_inherit_parent">ordered_settings_inherit_parent</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование источников чтения настроек.
При отключении наследования значение параметра устанавливается по умолчанию, либо в значения, указанные в файле <code>pyproject.toml</code></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-125-2"><a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a>
</span><span id="__span-125-3"><a id="__codelineno-125-3" name="__codelineno-125-3" href="#__codelineno-125-3"></a>
</span><span id="__span-125-4"><a id="__codelineno-125-4" name="__codelineno-125-4" href="#__codelineno-125-4"></a><span class="k">class</span> <span class="nc">Child</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-125-5"><a id="__codelineno-125-5" name="__codelineno-125-5" href="#__codelineno-125-5"></a>    <span class="n">ordered_settings_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-125-6"><a id="__codelineno-125-6" name="__codelineno-125-6" href="#__codelineno-125-6"></a>
</span><span id="__span-125-7"><a id="__codelineno-125-7" name="__codelineno-125-7" href="#__codelineno-125-7"></a>
</span><span id="__span-125-8"><a id="__codelineno-125-8" name="__codelineno-125-8" href="#__codelineno-125-8"></a><span class="k">class</span> <span class="nc">Parent</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-125-9"><a id="__codelineno-125-9" name="__codelineno-125-9" href="#__codelineno-125-9"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">Child</span>
</span><span id="__span-125-10"><a id="__codelineno-125-10" name="__codelineno-125-10" href="#__codelineno-125-10"></a>
</span><span id="__span-125-11"><a id="__codelineno-125-11" name="__codelineno-125-11" href="#__codelineno-125-11"></a>    <span class="n">ordered_settings</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-125-12"><a id="__codelineno-125-12" name="__codelineno-125-12" href="#__codelineno-125-12"></a>        <span class="s2">&quot;init_kwargs&quot;</span><span class="p">,</span>
</span><span id="__span-125-13"><a id="__codelineno-125-13" name="__codelineno-125-13" href="#__codelineno-125-13"></a>        <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-125-14"><a id="__codelineno-125-14" name="__codelineno-125-14" href="#__codelineno-125-14"></a>    <span class="p">]</span>
</span><span id="__span-125-15"><a id="__codelineno-125-15" name="__codelineno-125-15" href="#__codelineno-125-15"></a>
</span><span id="__span-125-16"><a id="__codelineno-125-16" name="__codelineno-125-16" href="#__codelineno-125-16"></a>
</span><span id="__span-125-17"><a id="__codelineno-125-17" name="__codelineno-125-17" href="#__codelineno-125-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
</span><span id="__span-125-18"><a id="__codelineno-125-18" name="__codelineno-125-18" href="#__codelineno-125-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">ordered_settings</span><span class="p">)</span>
</span><span id="__span-125-19"><a id="__codelineno-125-19" name="__codelineno-125-19" href="#__codelineno-125-19"></a><span class="c1">#&gt; [&#39;init_kwargs&#39;, &#39;conf_file&#39;]</span>
</span><span id="__span-125-20"><a id="__codelineno-125-20" name="__codelineno-125-20" href="#__codelineno-125-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">ordered_settings</span><span class="p">)</span>
</span><span id="__span-125-21"><a id="__codelineno-125-21" name="__codelineno-125-21" href="#__codelineno-125-21"></a><span class="c1">#&gt; [&#39;cli&#39;, &#39;init_kwargs&#39;, &#39;env&#39;, &#39;env_file&#39;, &#39;secrets&#39;, &#39;conf_file&#39;]</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-126-2"><a id="__codelineno-126-2" name="__codelineno-126-2" href="#__codelineno-126-2"></a><span class="n">ordered_settings_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="handler_class">handler_class</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">type</span><span class="p">(</span><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiHandler</span><span class="p">)</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">ArFiHandler</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Класс, который реализует механизм чтения настроек.
Можно создавать собственные классы наследуясь от <code>arfi_settings.ArFiHandler</code>.</p>
<p>Более подробно про обработчики написано <a href="../handlers/">здесь</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">ArFiHandler</span>
</span><span id="__span-127-2"><a id="__codelineno-127-2" name="__codelineno-127-2" href="#__codelineno-127-2"></a>
</span><span id="__span-127-3"><a id="__codelineno-127-3" name="__codelineno-127-3" href="#__codelineno-127-3"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-127-4"><a id="__codelineno-127-4" name="__codelineno-127-4" href="#__codelineno-127-4"></a>    <span class="k">def</span> <span class="nf">default_main_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-127-5"><a id="__codelineno-127-5" name="__codelineno-127-5" href="#__codelineno-127-5"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-127-6"><a id="__codelineno-127-6" name="__codelineno-127-6" href="#__codelineno-127-6"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-127-7"><a id="__codelineno-127-7" name="__codelineno-127-7" href="#__codelineno-127-7"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-127-8"><a id="__codelineno-127-8" name="__codelineno-127-8" href="#__codelineno-127-8"></a>
</span><span id="__span-127-9"><a id="__codelineno-127-9" name="__codelineno-127-9" href="#__codelineno-127-9"></a>
</span><span id="__span-127-10"><a id="__codelineno-127-10" name="__codelineno-127-10" href="#__codelineno-127-10"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-127-11"><a id="__codelineno-127-11" name="__codelineno-127-11" href="#__codelineno-127-11"></a>    <span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span></code></pre></div>
<h2 id="handler">handler</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;default_main_handler&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Это главный обработчик настроек, который запускается при инициализации класса и читает все настройки если значение параметра <a href="#read_config">read_config</a> установлено в <code class="language-python highlight"><span class="kc">True</span></code>
По сути это название метода класса <code>arfi_settings.ArFiHandler</code>. Можно создавать собственные обработчики и назначать их каждому классу индивидуально.</p>
<p>Более подробно про обработчики написано <a href="../handlers/">здесь</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-text highlight"><span class="filename">.env</span><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>PROJECT_NAME=&quot;Awesome project&quot;
</span><span id="__span-128-2"><a id="__codelineno-128-2" name="__codelineno-128-2" href="#__codelineno-128-2"></a>MY_PARAM=&quot;param_from_env&quot;
</span></code></pre></div>
<div class="language-py highlight"><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">ArFiHandler</span>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a>
</span><span id="__span-129-4"><a id="__codelineno-129-4" name="__codelineno-129-4" href="#__codelineno-129-4"></a>
</span><span id="__span-129-5"><a id="__codelineno-129-5" name="__codelineno-129-5" href="#__codelineno-129-5"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-129-6"><a id="__codelineno-129-6" name="__codelineno-129-6" href="#__codelineno-129-6"></a>    <span class="k">def</span> <span class="nf">awesome_main_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-129-7"><a id="__codelineno-129-7" name="__codelineno-129-7" href="#__codelineno-129-7"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-129-8"><a id="__codelineno-129-8" name="__codelineno-129-8" href="#__codelineno-129-8"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-129-9"><a id="__codelineno-129-9" name="__codelineno-129-9" href="#__codelineno-129-9"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;my_param&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;param_from_awesome_handler&quot;</span>
</span><span id="__span-129-10"><a id="__codelineno-129-10" name="__codelineno-129-10" href="#__codelineno-129-10"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-129-11"><a id="__codelineno-129-11" name="__codelineno-129-11" href="#__codelineno-129-11"></a>
</span><span id="__span-129-12"><a id="__codelineno-129-12" name="__codelineno-129-12" href="#__codelineno-129-12"></a>
</span><span id="__span-129-13"><a id="__codelineno-129-13" name="__codelineno-129-13" href="#__codelineno-129-13"></a><span class="n">ArFiSettings</span><span class="o">.</span><span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span><span id="__span-129-14"><a id="__codelineno-129-14" name="__codelineno-129-14" href="#__codelineno-129-14"></a>
</span><span id="__span-129-15"><a id="__codelineno-129-15" name="__codelineno-129-15" href="#__codelineno-129-15"></a>
</span><span id="__span-129-16"><a id="__codelineno-129-16" name="__codelineno-129-16" href="#__codelineno-129-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-129-17"><a id="__codelineno-129-17" name="__codelineno-129-17" href="#__codelineno-129-17"></a>    <span class="n">my_param</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-129-18"><a id="__codelineno-129-18" name="__codelineno-129-18" href="#__codelineno-129-18"></a>
</span><span id="__span-129-19"><a id="__codelineno-129-19" name="__codelineno-129-19" href="#__codelineno-129-19"></a>    <span class="n">handler</span> <span class="o">=</span> <span class="s2">&quot;awesome_main_handler&quot;</span>      <span class="c1"># (1)!</span>
</span><span id="__span-129-20"><a id="__codelineno-129-20" name="__codelineno-129-20" href="#__codelineno-129-20"></a>
</span><span id="__span-129-21"><a id="__codelineno-129-21" name="__codelineno-129-21" href="#__codelineno-129-21"></a>
</span><span id="__span-129-22"><a id="__codelineno-129-22" name="__codelineno-129-22" href="#__codelineno-129-22"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-129-23"><a id="__codelineno-129-23" name="__codelineno-129-23" href="#__codelineno-129-23"></a>    <span class="n">PROJECT_NAME</span><span class="p">:</span> <span class="nb">str</span>                     <span class="c1"># (2)!</span>
</span><span id="__span-129-24"><a id="__codelineno-129-24" name="__codelineno-129-24" href="#__codelineno-129-24"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-129-25"><a id="__codelineno-129-25" name="__codelineno-129-25" href="#__codelineno-129-25"></a>
</span><span id="__span-129-26"><a id="__codelineno-129-26" name="__codelineno-129-26" href="#__codelineno-129-26"></a>
</span><span id="__span-129-27"><a id="__codelineno-129-27" name="__codelineno-129-27" href="#__codelineno-129-27"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-129-28"><a id="__codelineno-129-28" name="__codelineno-129-28" href="#__codelineno-129-28"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">PROJECT_NAME</span><span class="p">)</span>
</span><span id="__span-129-29"><a id="__codelineno-129-29" name="__codelineno-129-29" href="#__codelineno-129-29"></a><span class="c1">#&gt; Awesome project</span>
</span><span id="__span-129-30"><a id="__codelineno-129-30" name="__codelineno-129-30" href="#__codelineno-129-30"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">my_param</span><span class="p">)</span>
</span><span id="__span-129-31"><a id="__codelineno-129-31" name="__codelineno-129-31" href="#__codelineno-129-31"></a><span class="c1">#&gt; param_from_awesome_handler</span>
</span></code></pre></div>
<ol>
<li>Используется пользовательский обработчик. Нет доступа к переменным окружения</li>
<li>Используется обработчик по умолчанию</li>
</ol>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-130-2"><a id="__codelineno-130-2" name="__codelineno-130-2" href="#__codelineno-130-2"></a><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;my_awesome_handler&quot;</span>
</span></code></pre></div>
<h2 id="handler_inherit_parent">handler_inherit_parent</h2>
<p>Тип: <code class="language-python highlight"><span class="nb">bool</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">True</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Включает или отключает обратное наследование главного обработчика <a href="#handler">handler</a></p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span>
</span><span id="__span-131-2"><a id="__codelineno-131-2" name="__codelineno-131-2" href="#__codelineno-131-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">ArFiHandler</span>
</span><span id="__span-131-3"><a id="__codelineno-131-3" name="__codelineno-131-3" href="#__codelineno-131-3"></a>
</span><span id="__span-131-4"><a id="__codelineno-131-4" name="__codelineno-131-4" href="#__codelineno-131-4"></a>
</span><span id="__span-131-5"><a id="__codelineno-131-5" name="__codelineno-131-5" href="#__codelineno-131-5"></a><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">ArFiHandler</span><span class="p">):</span>
</span><span id="__span-131-6"><a id="__codelineno-131-6" name="__codelineno-131-6" href="#__codelineno-131-6"></a>    <span class="k">def</span> <span class="nf">awesome_main_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
</span><span id="__span-131-7"><a id="__codelineno-131-7" name="__codelineno-131-7" href="#__codelineno-131-7"></a>        <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="__span-131-8"><a id="__codelineno-131-8" name="__codelineno-131-8" href="#__codelineno-131-8"></a>        <span class="c1"># Do something ...</span>
</span><span id="__span-131-9"><a id="__codelineno-131-9" name="__codelineno-131-9" href="#__codelineno-131-9"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;my_param&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;param_from_awesome_handler&quot;</span>
</span><span id="__span-131-10"><a id="__codelineno-131-10" name="__codelineno-131-10" href="#__codelineno-131-10"></a>        <span class="k">return</span> <span class="n">data</span>
</span><span id="__span-131-11"><a id="__codelineno-131-11" name="__codelineno-131-11" href="#__codelineno-131-11"></a>
</span><span id="__span-131-12"><a id="__codelineno-131-12" name="__codelineno-131-12" href="#__codelineno-131-12"></a>
</span><span id="__span-131-13"><a id="__codelineno-131-13" name="__codelineno-131-13" href="#__codelineno-131-13"></a><span class="n">ArFiSettings</span><span class="o">.</span><span class="n">handler_class</span> <span class="o">=</span> <span class="n">MyHandler</span>
</span><span id="__span-131-14"><a id="__codelineno-131-14" name="__codelineno-131-14" href="#__codelineno-131-14"></a>
</span><span id="__span-131-15"><a id="__codelineno-131-15" name="__codelineno-131-15" href="#__codelineno-131-15"></a>
</span><span id="__span-131-16"><a id="__codelineno-131-16" name="__codelineno-131-16" href="#__codelineno-131-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-131-17"><a id="__codelineno-131-17" name="__codelineno-131-17" href="#__codelineno-131-17"></a>    <span class="k">pass</span>
</span><span id="__span-131-18"><a id="__codelineno-131-18" name="__codelineno-131-18" href="#__codelineno-131-18"></a>
</span><span id="__span-131-19"><a id="__codelineno-131-19" name="__codelineno-131-19" href="#__codelineno-131-19"></a>
</span><span id="__span-131-20"><a id="__codelineno-131-20" name="__codelineno-131-20" href="#__codelineno-131-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-131-21"><a id="__codelineno-131-21" name="__codelineno-131-21" href="#__codelineno-131-21"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-131-22"><a id="__codelineno-131-22" name="__codelineno-131-22" href="#__codelineno-131-22"></a>
</span><span id="__span-131-23"><a id="__codelineno-131-23" name="__codelineno-131-23" href="#__codelineno-131-23"></a>    <span class="n">handler</span> <span class="o">=</span> <span class="s2">&quot;awesome_main_handler&quot;</span>
</span><span id="__span-131-24"><a id="__codelineno-131-24" name="__codelineno-131-24" href="#__codelineno-131-24"></a>
</span><span id="__span-131-25"><a id="__codelineno-131-25" name="__codelineno-131-25" href="#__codelineno-131-25"></a>
</span><span id="__span-131-26"><a id="__codelineno-131-26" name="__codelineno-131-26" href="#__codelineno-131-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-131-27"><a id="__codelineno-131-27" name="__codelineno-131-27" href="#__codelineno-131-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">handler</span><span class="p">)</span>
</span><span id="__span-131-28"><a id="__codelineno-131-28" name="__codelineno-131-28" href="#__codelineno-131-28"></a><span class="c1">#&gt; awesome_main_handler</span>
</span><span id="__span-131-29"><a id="__codelineno-131-29" name="__codelineno-131-29" href="#__codelineno-131-29"></a>
</span><span id="__span-131-30"><a id="__codelineno-131-30" name="__codelineno-131-30" href="#__codelineno-131-30"></a>
</span><span id="__span-131-31"><a id="__codelineno-131-31" name="__codelineno-131-31" href="#__codelineno-131-31"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-131-32"><a id="__codelineno-131-32" name="__codelineno-131-32" href="#__codelineno-131-32"></a>    <span class="n">handler_inherit_parent</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-131-33"><a id="__codelineno-131-33" name="__codelineno-131-33" href="#__codelineno-131-33"></a>
</span><span id="__span-131-34"><a id="__codelineno-131-34" name="__codelineno-131-34" href="#__codelineno-131-34"></a>
</span><span id="__span-131-35"><a id="__codelineno-131-35" name="__codelineno-131-35" href="#__codelineno-131-35"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-131-36"><a id="__codelineno-131-36" name="__codelineno-131-36" href="#__codelineno-131-36"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">handler</span><span class="p">)</span>
</span><span id="__span-131-37"><a id="__codelineno-131-37" name="__codelineno-131-37" href="#__codelineno-131-37"></a><span class="c1">#&gt; default_main_handler</span>
</span></code></pre></div>
<p>Файл <code>pyproject.toml</code>:</p>
<div class="language-toml highlight"><span class="filename">pyproject.toml</span><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a><span class="k">[tool.arfi_settings]</span>
</span><span id="__span-132-2"><a id="__codelineno-132-2" name="__codelineno-132-2" href="#__codelineno-132-2"></a><span class="n">handler_inherit_parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</span></code></pre></div>
<h2 id="property">Свойства (property)</h2>
<h3 id="root_dir">root_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Указывает на главную директорию проекта. Автоматически определяется один раз для всего проекта. Нет возможности указать вручную.</p>
<p><strong>Принцип автоматического определения</strong>:</p>
<p>Сначала происходит поиск файла <code>pyproject.toml</code> с максимальной глубиной поиска по умолчанию на 3 директории ВВЕРХ от файла, где происходит инициализация инстанса главных настроек. Если файл <code>pyproject.toml</code> найден, главной директорией проекта считается та, в которой лежит этот файл. Если файл <code>pyproject.toml</code> не найден, то главной директорией проекта считается родительская директория для <a href="#BASE_DIR">BASE_DIR</a></p>
<p><strong>Использование</strong>:</p>
<ol>
<li>Файл <code>pyproject.toml</code> существует</li>
</ol>
<p>Структура проекта:
<div class="language-text highlight"><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>~/my-awesome-project
</span><span id="__span-133-2"><a id="__codelineno-133-2" name="__codelineno-133-2" href="#__codelineno-133-2"></a>├── src
</span><span id="__span-133-3"><a id="__codelineno-133-3" name="__codelineno-133-3" href="#__codelineno-133-3"></a>│  └── my_awesome_project
</span><span id="__span-133-4"><a id="__codelineno-133-4" name="__codelineno-133-4" href="#__codelineno-133-4"></a>│     ├── __init__.py
</span><span id="__span-133-5"><a id="__codelineno-133-5" name="__codelineno-133-5" href="#__codelineno-133-5"></a>│     └── main.py
</span><span id="__span-133-6"><a id="__codelineno-133-6" name="__codelineno-133-6" href="#__codelineno-133-6"></a>└── pyproject.toml
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">~/my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-134-2"><a id="__codelineno-134-2" name="__codelineno-134-2" href="#__codelineno-134-2"></a>
</span><span id="__span-134-3"><a id="__codelineno-134-3" name="__codelineno-134-3" href="#__codelineno-134-3"></a>
</span><span id="__span-134-4"><a id="__codelineno-134-4" name="__codelineno-134-4" href="#__codelineno-134-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-134-5"><a id="__codelineno-134-5" name="__codelineno-134-5" href="#__codelineno-134-5"></a>    <span class="k">pass</span>
</span><span id="__span-134-6"><a id="__codelineno-134-6" name="__codelineno-134-6" href="#__codelineno-134-6"></a>
</span><span id="__span-134-7"><a id="__codelineno-134-7" name="__codelineno-134-7" href="#__codelineno-134-7"></a>
</span><span id="__span-134-8"><a id="__codelineno-134-8" name="__codelineno-134-8" href="#__codelineno-134-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-134-9"><a id="__codelineno-134-9" name="__codelineno-134-9" href="#__codelineno-134-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">root_dir</span><span class="p">)</span>
</span><span id="__span-134-10"><a id="__codelineno-134-10" name="__codelineno-134-10" href="#__codelineno-134-10"></a><span class="c1">#&gt; /home/user/my-awesome-project</span>
</span></code></pre></div>
<ol>
<li>Файл <code>pyproject.toml</code> отсутствует</li>
</ol>
<p>Структура проекта:
<div class="language-text highlight"><pre><span></span><code><span id="__span-135-1"><a id="__codelineno-135-1" name="__codelineno-135-1" href="#__codelineno-135-1"></a>~/my-awesome-project
</span><span id="__span-135-2"><a id="__codelineno-135-2" name="__codelineno-135-2" href="#__codelineno-135-2"></a>└── src
</span><span id="__span-135-3"><a id="__codelineno-135-3" name="__codelineno-135-3" href="#__codelineno-135-3"></a>   └── my_awesome_project
</span><span id="__span-135-4"><a id="__codelineno-135-4" name="__codelineno-135-4" href="#__codelineno-135-4"></a>      ├── __init__.py
</span><span id="__span-135-5"><a id="__codelineno-135-5" name="__codelineno-135-5" href="#__codelineno-135-5"></a>      └── main.py
</span></code></pre></div></p>
<div class="language-py highlight"><span class="filename">~/my-awesome-project/src/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-136-1"><a id="__codelineno-136-1" name="__codelineno-136-1" href="#__codelineno-136-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-136-2"><a id="__codelineno-136-2" name="__codelineno-136-2" href="#__codelineno-136-2"></a>
</span><span id="__span-136-3"><a id="__codelineno-136-3" name="__codelineno-136-3" href="#__codelineno-136-3"></a>
</span><span id="__span-136-4"><a id="__codelineno-136-4" name="__codelineno-136-4" href="#__codelineno-136-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-136-5"><a id="__codelineno-136-5" name="__codelineno-136-5" href="#__codelineno-136-5"></a>    <span class="k">pass</span>
</span><span id="__span-136-6"><a id="__codelineno-136-6" name="__codelineno-136-6" href="#__codelineno-136-6"></a>
</span><span id="__span-136-7"><a id="__codelineno-136-7" name="__codelineno-136-7" href="#__codelineno-136-7"></a>
</span><span id="__span-136-8"><a id="__codelineno-136-8" name="__codelineno-136-8" href="#__codelineno-136-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-136-9"><a id="__codelineno-136-9" name="__codelineno-136-9" href="#__codelineno-136-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">root_dir</span><span class="p">)</span>
</span><span id="__span-136-10"><a id="__codelineno-136-10" name="__codelineno-136-10" href="#__codelineno-136-10"></a><span class="c1">#&gt; /home/user/my-awesome-project/src</span>
</span></code></pre></div>
<h3 id="conf_path">conf_path</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. На основе указанных параметров <a href="#conf_dir">conf_dir</a>, <a href="#mode_dir">mode_dir</a> и <a href="#conf_file">conf_file</a> вычисляет список путей к конфигурационным файлам для данного класса. При этом значения параметров, указанные в файле по последнему пути из этого списка всегда будут переопределять значения из предыдущих файлов.</p>
<p>Основной принцип построения путей:
<div class="language-text highlight"><pre><span></span><code><span id="__span-137-1"><a id="__codelineno-137-1" name="__codelineno-137-1" href="#__codelineno-137-1"></a>conf_dir/mode_dir/conf_file
</span></code></pre></div>
При сложной структуре в концепции обратного наследования пути строятся по следующему принципу:
<div class="language-text highlight"><pre><span></span><code><span id="__span-138-1"><a id="__codelineno-138-1" name="__codelineno-138-1" href="#__codelineno-138-1"></a>conf_dir/parent_mode_dir/nested_mode_dir/source_mode_dir/conf_file
</span></code></pre></div>
где:</p>
<ul>
<li>conf_dir - путь к директории конфигурации</li>
<li>parent_mode_dir - вычисляемое значение <code>mode_dir</code> класса-родителя в концепции обратного наследования</li>
<li>nested_mode_dir - точное значение <code>mode_dir</code> параметра класса, от которого наследуется текущий класс, в концепции классического наследования</li>
<li>source_mode_dir - точное значение <code>mode_dir</code> параметра исходного класса</li>
<li>conf_file - значение <code>conf_file</code>, указанное в исходном классе, т.е. имя файла конфигурации</li>
</ul>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-139-1"><a id="__codelineno-139-1" name="__codelineno-139-1" href="#__codelineno-139-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-139-2"><a id="__codelineno-139-2" name="__codelineno-139-2" href="#__codelineno-139-2"></a>
</span><span id="__span-139-3"><a id="__codelineno-139-3" name="__codelineno-139-3" href="#__codelineno-139-3"></a>
</span><span id="__span-139-4"><a id="__codelineno-139-4" name="__codelineno-139-4" href="#__codelineno-139-4"></a><span class="k">class</span> <span class="nc">NestedConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-139-5"><a id="__codelineno-139-5" name="__codelineno-139-5" href="#__codelineno-139-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;nested_mode_dir&quot;</span>
</span><span id="__span-139-6"><a id="__codelineno-139-6" name="__codelineno-139-6" href="#__codelineno-139-6"></a>
</span><span id="__span-139-7"><a id="__codelineno-139-7" name="__codelineno-139-7" href="#__codelineno-139-7"></a>
</span><span id="__span-139-8"><a id="__codelineno-139-8" name="__codelineno-139-8" href="#__codelineno-139-8"></a><span class="k">class</span> <span class="nc">ChildConfig</span><span class="p">(</span><span class="n">NestedConfig</span><span class="p">):</span>
</span><span id="__span-139-9"><a id="__codelineno-139-9" name="__codelineno-139-9" href="#__codelineno-139-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;source_mode_dir&quot;</span>
</span><span id="__span-139-10"><a id="__codelineno-139-10" name="__codelineno-139-10" href="#__codelineno-139-10"></a>
</span><span id="__span-139-11"><a id="__codelineno-139-11" name="__codelineno-139-11" href="#__codelineno-139-11"></a>
</span><span id="__span-139-12"><a id="__codelineno-139-12" name="__codelineno-139-12" href="#__codelineno-139-12"></a><span class="k">class</span> <span class="nc">ParentConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-139-13"><a id="__codelineno-139-13" name="__codelineno-139-13" href="#__codelineno-139-13"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;parent_mode_dir&quot;</span>
</span><span id="__span-139-14"><a id="__codelineno-139-14" name="__codelineno-139-14" href="#__codelineno-139-14"></a>    <span class="n">child</span><span class="p">:</span> <span class="n">ChildConfig</span>
</span><span id="__span-139-15"><a id="__codelineno-139-15" name="__codelineno-139-15" href="#__codelineno-139-15"></a>
</span><span id="__span-139-16"><a id="__codelineno-139-16" name="__codelineno-139-16" href="#__codelineno-139-16"></a>
</span><span id="__span-139-17"><a id="__codelineno-139-17" name="__codelineno-139-17" href="#__codelineno-139-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">ParentConfig</span><span class="p">()</span>
</span><span id="__span-139-18"><a id="__codelineno-139-18" name="__codelineno-139-18" href="#__codelineno-139-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-139-19"><a id="__codelineno-139-19" name="__codelineno-139-19" href="#__codelineno-139-19"></a><span class="c1">#&gt; [PosixPath(&#39;config/parent_mode_dir/config&#39;)]</span>
</span><span id="__span-139-20"><a id="__codelineno-139-20" name="__codelineno-139-20" href="#__codelineno-139-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">child</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-139-21"><a id="__codelineno-139-21" name="__codelineno-139-21" href="#__codelineno-139-21"></a><span class="c1">#&gt; [PosixPath(&#39;config/parent_mode_dir/nested_mode_dir/source_mode_dir/config&#39;)]</span>
</span></code></pre></div>
<h3 id="env_path">env_path</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. На основе заданного параметра <a href="#env_file">env_file</a> вычисляет список путей к файлам с переменными окружения.</p>
<p>Под капотом, для каждого переданного файла, поиск происходит по следующим правилам, если передан относительный путь до файла:</p>
<ul>
<li>Сначала файл ищется в главной директории проекта <a href="#root_dir">root_dir</a>. Если файл найден, то поиск завершается.</li>
<li>Если файл не найден в главной директории, то происходит поиск файла в базовой директории проекта <a href="#BASE_DIR">BASE_DIR</a></li>
</ul>
<blockquote>
<p><strong>Заметка</strong>: При включённом режиме отладки <a href="../../about/debug_mode/">arfi_debug</a> можно увидеть абсолютные пути до файлов в результатах вывода отладочной информации..</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-140-1"><a id="__codelineno-140-1" name="__codelineno-140-1" href="#__codelineno-140-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">EnvConfigDict</span>
</span><span id="__span-140-2"><a id="__codelineno-140-2" name="__codelineno-140-2" href="#__codelineno-140-2"></a>
</span><span id="__span-140-3"><a id="__codelineno-140-3" name="__codelineno-140-3" href="#__codelineno-140-3"></a>
</span><span id="__span-140-4"><a id="__codelineno-140-4" name="__codelineno-140-4" href="#__codelineno-140-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-140-5"><a id="__codelineno-140-5" name="__codelineno-140-5" href="#__codelineno-140-5"></a>    <span class="n">env_config</span> <span class="o">=</span> <span class="n">EnvConfigDict</span><span class="p">(</span>
</span><span id="__span-140-6"><a id="__codelineno-140-6" name="__codelineno-140-6" href="#__codelineno-140-6"></a>        <span class="n">env_file</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-140-7"><a id="__codelineno-140-7" name="__codelineno-140-7" href="#__codelineno-140-7"></a>            <span class="s2">&quot;.env&quot;</span><span class="p">,</span>
</span><span id="__span-140-8"><a id="__codelineno-140-8" name="__codelineno-140-8" href="#__codelineno-140-8"></a>            <span class="s2">&quot;.env.prod&quot;</span><span class="p">,</span>
</span><span id="__span-140-9"><a id="__codelineno-140-9" name="__codelineno-140-9" href="#__codelineno-140-9"></a>        <span class="p">],</span>
</span><span id="__span-140-10"><a id="__codelineno-140-10" name="__codelineno-140-10" href="#__codelineno-140-10"></a>    <span class="p">)</span>
</span><span id="__span-140-11"><a id="__codelineno-140-11" name="__codelineno-140-11" href="#__codelineno-140-11"></a>
</span><span id="__span-140-12"><a id="__codelineno-140-12" name="__codelineno-140-12" href="#__codelineno-140-12"></a>
</span><span id="__span-140-13"><a id="__codelineno-140-13" name="__codelineno-140-13" href="#__codelineno-140-13"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-140-14"><a id="__codelineno-140-14" name="__codelineno-140-14" href="#__codelineno-140-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">env_path</span><span class="p">)</span>
</span><span id="__span-140-15"><a id="__codelineno-140-15" name="__codelineno-140-15" href="#__codelineno-140-15"></a><span class="c1">#&gt; [PosixPath(&#39;.env&#39;), PosixPath(&#39;.env.prod&#39;)]</span>
</span></code></pre></div>
<h3 id="mode_dir_path">mode_dir_path</h3>
<p>Тип: <code class="language-python highlight"><span class="n">Path</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь до поддиректории, в которой будет производиться поиск файлов конфигурации для данного класса.</p>
<p>На основе этого пути строится полный путь до файлов конфигурации текущего класса по следующему принципу:</p>
<p><a href="#BASE_DIR">BASE_DIR</a> / <a href="#conf_dir">conf_dir</a> / <a href="#mode_dir_path">mode_dir_path</a> / <a href="#conf_file">conf_file</a>[.<a href="#conf_ext">conf_ext</a>]</p>
<blockquote>
<p><strong>Заметка</strong>: В начало пути добавляется <code>BASE_DIR /</code> только в том случае, если <code>conf_dir</code> не является абсолютным путём.</p>
</blockquote>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-141-1"><a id="__codelineno-141-1" name="__codelineno-141-1" href="#__codelineno-141-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-141-2"><a id="__codelineno-141-2" name="__codelineno-141-2" href="#__codelineno-141-2"></a>
</span><span id="__span-141-3"><a id="__codelineno-141-3" name="__codelineno-141-3" href="#__codelineno-141-3"></a>
</span><span id="__span-141-4"><a id="__codelineno-141-4" name="__codelineno-141-4" href="#__codelineno-141-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-141-5"><a id="__codelineno-141-5" name="__codelineno-141-5" href="#__codelineno-141-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-141-6"><a id="__codelineno-141-6" name="__codelineno-141-6" href="#__codelineno-141-6"></a>
</span><span id="__span-141-7"><a id="__codelineno-141-7" name="__codelineno-141-7" href="#__codelineno-141-7"></a>
</span><span id="__span-141-8"><a id="__codelineno-141-8" name="__codelineno-141-8" href="#__codelineno-141-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-141-9"><a id="__codelineno-141-9" name="__codelineno-141-9" href="#__codelineno-141-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-141-10"><a id="__codelineno-141-10" name="__codelineno-141-10" href="#__codelineno-141-10"></a>
</span><span id="__span-141-11"><a id="__codelineno-141-11" name="__codelineno-141-11" href="#__codelineno-141-11"></a>
</span><span id="__span-141-12"><a id="__codelineno-141-12" name="__codelineno-141-12" href="#__codelineno-141-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-141-13"><a id="__codelineno-141-13" name="__codelineno-141-13" href="#__codelineno-141-13"></a>    <span class="k">pass</span>
</span><span id="__span-141-14"><a id="__codelineno-141-14" name="__codelineno-141-14" href="#__codelineno-141-14"></a>
</span><span id="__span-141-15"><a id="__codelineno-141-15" name="__codelineno-141-15" href="#__codelineno-141-15"></a>
</span><span id="__span-141-16"><a id="__codelineno-141-16" name="__codelineno-141-16" href="#__codelineno-141-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-141-17"><a id="__codelineno-141-17" name="__codelineno-141-17" href="#__codelineno-141-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-141-18"><a id="__codelineno-141-18" name="__codelineno-141-18" href="#__codelineno-141-18"></a>
</span><span id="__span-141-19"><a id="__codelineno-141-19" name="__codelineno-141-19" href="#__codelineno-141-19"></a>
</span><span id="__span-141-20"><a id="__codelineno-141-20" name="__codelineno-141-20" href="#__codelineno-141-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-141-21"><a id="__codelineno-141-21" name="__codelineno-141-21" href="#__codelineno-141-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-141-22"><a id="__codelineno-141-22" name="__codelineno-141-22" href="#__codelineno-141-22"></a>
</span><span id="__span-141-23"><a id="__codelineno-141-23" name="__codelineno-141-23" href="#__codelineno-141-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-141-24"><a id="__codelineno-141-24" name="__codelineno-141-24" href="#__codelineno-141-24"></a>
</span><span id="__span-141-25"><a id="__codelineno-141-25" name="__codelineno-141-25" href="#__codelineno-141-25"></a>
</span><span id="__span-141-26"><a id="__codelineno-141-26" name="__codelineno-141-26" href="#__codelineno-141-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-141-27"><a id="__codelineno-141-27" name="__codelineno-141-27" href="#__codelineno-141-27"></a><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">mode_dir_path</span><span class="p">))</span>
</span><span id="__span-141-28"><a id="__codelineno-141-28" name="__codelineno-141-28" href="#__codelineno-141-28"></a><span class="c1">#&gt; PosixPath(&#39;dev/app/base/base_config/sub_app&#39;)</span>
</span><span id="__span-141-29"><a id="__codelineno-141-29" name="__codelineno-141-29" href="#__codelineno-141-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-141-30"><a id="__codelineno-141-30" name="__codelineno-141-30" href="#__codelineno-141-30"></a><span class="c1">#&gt; [PosixPath(&#39;config/dev/app/base/base_config/sub_app/config&#39;)]</span>
</span></code></pre></div>
<h3 id="computed_mode_dir">computed_mode_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь до поддиректории, в которой будет производиться поиск файлов конфигурации для данного класса.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-142-1"><a id="__codelineno-142-1" name="__codelineno-142-1" href="#__codelineno-142-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-142-2"><a id="__codelineno-142-2" name="__codelineno-142-2" href="#__codelineno-142-2"></a>
</span><span id="__span-142-3"><a id="__codelineno-142-3" name="__codelineno-142-3" href="#__codelineno-142-3"></a>
</span><span id="__span-142-4"><a id="__codelineno-142-4" name="__codelineno-142-4" href="#__codelineno-142-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-142-5"><a id="__codelineno-142-5" name="__codelineno-142-5" href="#__codelineno-142-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-142-6"><a id="__codelineno-142-6" name="__codelineno-142-6" href="#__codelineno-142-6"></a>
</span><span id="__span-142-7"><a id="__codelineno-142-7" name="__codelineno-142-7" href="#__codelineno-142-7"></a>
</span><span id="__span-142-8"><a id="__codelineno-142-8" name="__codelineno-142-8" href="#__codelineno-142-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-142-9"><a id="__codelineno-142-9" name="__codelineno-142-9" href="#__codelineno-142-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-142-10"><a id="__codelineno-142-10" name="__codelineno-142-10" href="#__codelineno-142-10"></a>
</span><span id="__span-142-11"><a id="__codelineno-142-11" name="__codelineno-142-11" href="#__codelineno-142-11"></a>
</span><span id="__span-142-12"><a id="__codelineno-142-12" name="__codelineno-142-12" href="#__codelineno-142-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-142-13"><a id="__codelineno-142-13" name="__codelineno-142-13" href="#__codelineno-142-13"></a>    <span class="k">pass</span>
</span><span id="__span-142-14"><a id="__codelineno-142-14" name="__codelineno-142-14" href="#__codelineno-142-14"></a>
</span><span id="__span-142-15"><a id="__codelineno-142-15" name="__codelineno-142-15" href="#__codelineno-142-15"></a>
</span><span id="__span-142-16"><a id="__codelineno-142-16" name="__codelineno-142-16" href="#__codelineno-142-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-142-17"><a id="__codelineno-142-17" name="__codelineno-142-17" href="#__codelineno-142-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-142-18"><a id="__codelineno-142-18" name="__codelineno-142-18" href="#__codelineno-142-18"></a>
</span><span id="__span-142-19"><a id="__codelineno-142-19" name="__codelineno-142-19" href="#__codelineno-142-19"></a>
</span><span id="__span-142-20"><a id="__codelineno-142-20" name="__codelineno-142-20" href="#__codelineno-142-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-142-21"><a id="__codelineno-142-21" name="__codelineno-142-21" href="#__codelineno-142-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-142-22"><a id="__codelineno-142-22" name="__codelineno-142-22" href="#__codelineno-142-22"></a>
</span><span id="__span-142-23"><a id="__codelineno-142-23" name="__codelineno-142-23" href="#__codelineno-142-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-142-24"><a id="__codelineno-142-24" name="__codelineno-142-24" href="#__codelineno-142-24"></a>
</span><span id="__span-142-25"><a id="__codelineno-142-25" name="__codelineno-142-25" href="#__codelineno-142-25"></a>
</span><span id="__span-142-26"><a id="__codelineno-142-26" name="__codelineno-142-26" href="#__codelineno-142-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-142-27"><a id="__codelineno-142-27" name="__codelineno-142-27" href="#__codelineno-142-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-142-28"><a id="__codelineno-142-28" name="__codelineno-142-28" href="#__codelineno-142-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-142-29"><a id="__codelineno-142-29" name="__codelineno-142-29" href="#__codelineno-142-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">conf_path</span><span class="p">)</span>
</span><span id="__span-142-30"><a id="__codelineno-142-30" name="__codelineno-142-30" href="#__codelineno-142-30"></a><span class="c1">#&gt; [PosixPath(&#39;config/dev/app/base/base_config/sub_app/config&#39;)]</span>
</span></code></pre></div>
<h3 id="parent_mode_dir">parent_mode_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь до поддиректории класса-родителя в концепции обратного наследования.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-143-1"><a id="__codelineno-143-1" name="__codelineno-143-1" href="#__codelineno-143-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-143-2"><a id="__codelineno-143-2" name="__codelineno-143-2" href="#__codelineno-143-2"></a>
</span><span id="__span-143-3"><a id="__codelineno-143-3" name="__codelineno-143-3" href="#__codelineno-143-3"></a>
</span><span id="__span-143-4"><a id="__codelineno-143-4" name="__codelineno-143-4" href="#__codelineno-143-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-143-5"><a id="__codelineno-143-5" name="__codelineno-143-5" href="#__codelineno-143-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-143-6"><a id="__codelineno-143-6" name="__codelineno-143-6" href="#__codelineno-143-6"></a>
</span><span id="__span-143-7"><a id="__codelineno-143-7" name="__codelineno-143-7" href="#__codelineno-143-7"></a>
</span><span id="__span-143-8"><a id="__codelineno-143-8" name="__codelineno-143-8" href="#__codelineno-143-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-143-9"><a id="__codelineno-143-9" name="__codelineno-143-9" href="#__codelineno-143-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-143-10"><a id="__codelineno-143-10" name="__codelineno-143-10" href="#__codelineno-143-10"></a>
</span><span id="__span-143-11"><a id="__codelineno-143-11" name="__codelineno-143-11" href="#__codelineno-143-11"></a>
</span><span id="__span-143-12"><a id="__codelineno-143-12" name="__codelineno-143-12" href="#__codelineno-143-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-143-13"><a id="__codelineno-143-13" name="__codelineno-143-13" href="#__codelineno-143-13"></a>    <span class="k">pass</span>
</span><span id="__span-143-14"><a id="__codelineno-143-14" name="__codelineno-143-14" href="#__codelineno-143-14"></a>
</span><span id="__span-143-15"><a id="__codelineno-143-15" name="__codelineno-143-15" href="#__codelineno-143-15"></a>
</span><span id="__span-143-16"><a id="__codelineno-143-16" name="__codelineno-143-16" href="#__codelineno-143-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-143-17"><a id="__codelineno-143-17" name="__codelineno-143-17" href="#__codelineno-143-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-143-18"><a id="__codelineno-143-18" name="__codelineno-143-18" href="#__codelineno-143-18"></a>
</span><span id="__span-143-19"><a id="__codelineno-143-19" name="__codelineno-143-19" href="#__codelineno-143-19"></a>
</span><span id="__span-143-20"><a id="__codelineno-143-20" name="__codelineno-143-20" href="#__codelineno-143-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-143-21"><a id="__codelineno-143-21" name="__codelineno-143-21" href="#__codelineno-143-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-143-22"><a id="__codelineno-143-22" name="__codelineno-143-22" href="#__codelineno-143-22"></a>
</span><span id="__span-143-23"><a id="__codelineno-143-23" name="__codelineno-143-23" href="#__codelineno-143-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-143-24"><a id="__codelineno-143-24" name="__codelineno-143-24" href="#__codelineno-143-24"></a>
</span><span id="__span-143-25"><a id="__codelineno-143-25" name="__codelineno-143-25" href="#__codelineno-143-25"></a>
</span><span id="__span-143-26"><a id="__codelineno-143-26" name="__codelineno-143-26" href="#__codelineno-143-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-143-27"><a id="__codelineno-143-27" name="__codelineno-143-27" href="#__codelineno-143-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-143-28"><a id="__codelineno-143-28" name="__codelineno-143-28" href="#__codelineno-143-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-143-29"><a id="__codelineno-143-29" name="__codelineno-143-29" href="#__codelineno-143-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">parent_mode_dir</span><span class="p">)</span>
</span><span id="__span-143-30"><a id="__codelineno-143-30" name="__codelineno-143-30" href="#__codelineno-143-30"></a><span class="c1">#&gt; dev/app</span>
</span></code></pre></div>
<h3 id="nested_mode_dir">nested_mode_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь до поддиректории класса, от которого наследуется в классической концепции наследования.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-144-1"><a id="__codelineno-144-1" name="__codelineno-144-1" href="#__codelineno-144-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-144-2"><a id="__codelineno-144-2" name="__codelineno-144-2" href="#__codelineno-144-2"></a>
</span><span id="__span-144-3"><a id="__codelineno-144-3" name="__codelineno-144-3" href="#__codelineno-144-3"></a>
</span><span id="__span-144-4"><a id="__codelineno-144-4" name="__codelineno-144-4" href="#__codelineno-144-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-144-5"><a id="__codelineno-144-5" name="__codelineno-144-5" href="#__codelineno-144-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-144-6"><a id="__codelineno-144-6" name="__codelineno-144-6" href="#__codelineno-144-6"></a>
</span><span id="__span-144-7"><a id="__codelineno-144-7" name="__codelineno-144-7" href="#__codelineno-144-7"></a>
</span><span id="__span-144-8"><a id="__codelineno-144-8" name="__codelineno-144-8" href="#__codelineno-144-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-144-9"><a id="__codelineno-144-9" name="__codelineno-144-9" href="#__codelineno-144-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-144-10"><a id="__codelineno-144-10" name="__codelineno-144-10" href="#__codelineno-144-10"></a>
</span><span id="__span-144-11"><a id="__codelineno-144-11" name="__codelineno-144-11" href="#__codelineno-144-11"></a>
</span><span id="__span-144-12"><a id="__codelineno-144-12" name="__codelineno-144-12" href="#__codelineno-144-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-144-13"><a id="__codelineno-144-13" name="__codelineno-144-13" href="#__codelineno-144-13"></a>    <span class="k">pass</span>
</span><span id="__span-144-14"><a id="__codelineno-144-14" name="__codelineno-144-14" href="#__codelineno-144-14"></a>
</span><span id="__span-144-15"><a id="__codelineno-144-15" name="__codelineno-144-15" href="#__codelineno-144-15"></a>
</span><span id="__span-144-16"><a id="__codelineno-144-16" name="__codelineno-144-16" href="#__codelineno-144-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-144-17"><a id="__codelineno-144-17" name="__codelineno-144-17" href="#__codelineno-144-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-144-18"><a id="__codelineno-144-18" name="__codelineno-144-18" href="#__codelineno-144-18"></a>
</span><span id="__span-144-19"><a id="__codelineno-144-19" name="__codelineno-144-19" href="#__codelineno-144-19"></a>
</span><span id="__span-144-20"><a id="__codelineno-144-20" name="__codelineno-144-20" href="#__codelineno-144-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-144-21"><a id="__codelineno-144-21" name="__codelineno-144-21" href="#__codelineno-144-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-144-22"><a id="__codelineno-144-22" name="__codelineno-144-22" href="#__codelineno-144-22"></a>
</span><span id="__span-144-23"><a id="__codelineno-144-23" name="__codelineno-144-23" href="#__codelineno-144-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-144-24"><a id="__codelineno-144-24" name="__codelineno-144-24" href="#__codelineno-144-24"></a>
</span><span id="__span-144-25"><a id="__codelineno-144-25" name="__codelineno-144-25" href="#__codelineno-144-25"></a>
</span><span id="__span-144-26"><a id="__codelineno-144-26" name="__codelineno-144-26" href="#__codelineno-144-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-144-27"><a id="__codelineno-144-27" name="__codelineno-144-27" href="#__codelineno-144-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-144-28"><a id="__codelineno-144-28" name="__codelineno-144-28" href="#__codelineno-144-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-144-29"><a id="__codelineno-144-29" name="__codelineno-144-29" href="#__codelineno-144-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">nested_mode_dir</span><span class="p">)</span>
</span><span id="__span-144-30"><a id="__codelineno-144-30" name="__codelineno-144-30" href="#__codelineno-144-30"></a><span class="c1">#&gt; base/base_config</span>
</span></code></pre></div>
<h3 id="source_mode_dir">source_mode_dir</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="s2">&quot;&quot;</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь до собственной поддиректории.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-145-1"><a id="__codelineno-145-1" name="__codelineno-145-1" href="#__codelineno-145-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-145-2"><a id="__codelineno-145-2" name="__codelineno-145-2" href="#__codelineno-145-2"></a>
</span><span id="__span-145-3"><a id="__codelineno-145-3" name="__codelineno-145-3" href="#__codelineno-145-3"></a>
</span><span id="__span-145-4"><a id="__codelineno-145-4" name="__codelineno-145-4" href="#__codelineno-145-4"></a><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-145-5"><a id="__codelineno-145-5" name="__codelineno-145-5" href="#__codelineno-145-5"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base&quot;</span>
</span><span id="__span-145-6"><a id="__codelineno-145-6" name="__codelineno-145-6" href="#__codelineno-145-6"></a>
</span><span id="__span-145-7"><a id="__codelineno-145-7" name="__codelineno-145-7" href="#__codelineno-145-7"></a>
</span><span id="__span-145-8"><a id="__codelineno-145-8" name="__codelineno-145-8" href="#__codelineno-145-8"></a><span class="k">class</span> <span class="nc">BaseConfig</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
</span><span id="__span-145-9"><a id="__codelineno-145-9" name="__codelineno-145-9" href="#__codelineno-145-9"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;base_config&quot;</span>
</span><span id="__span-145-10"><a id="__codelineno-145-10" name="__codelineno-145-10" href="#__codelineno-145-10"></a>
</span><span id="__span-145-11"><a id="__codelineno-145-11" name="__codelineno-145-11" href="#__codelineno-145-11"></a>
</span><span id="__span-145-12"><a id="__codelineno-145-12" name="__codelineno-145-12" href="#__codelineno-145-12"></a><span class="k">class</span> <span class="nc">SubAppSettings</span><span class="p">(</span><span class="n">BaseConfig</span><span class="p">):</span>
</span><span id="__span-145-13"><a id="__codelineno-145-13" name="__codelineno-145-13" href="#__codelineno-145-13"></a>    <span class="k">pass</span>
</span><span id="__span-145-14"><a id="__codelineno-145-14" name="__codelineno-145-14" href="#__codelineno-145-14"></a>
</span><span id="__span-145-15"><a id="__codelineno-145-15" name="__codelineno-145-15" href="#__codelineno-145-15"></a>
</span><span id="__span-145-16"><a id="__codelineno-145-16" name="__codelineno-145-16" href="#__codelineno-145-16"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-145-17"><a id="__codelineno-145-17" name="__codelineno-145-17" href="#__codelineno-145-17"></a>    <span class="n">sub_app</span><span class="p">:</span> <span class="n">SubAppSettings</span>
</span><span id="__span-145-18"><a id="__codelineno-145-18" name="__codelineno-145-18" href="#__codelineno-145-18"></a>
</span><span id="__span-145-19"><a id="__codelineno-145-19" name="__codelineno-145-19" href="#__codelineno-145-19"></a>
</span><span id="__span-145-20"><a id="__codelineno-145-20" name="__codelineno-145-20" href="#__codelineno-145-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-145-21"><a id="__codelineno-145-21" name="__codelineno-145-21" href="#__codelineno-145-21"></a>    <span class="n">mode_dir</span> <span class="o">=</span> <span class="s2">&quot;dev&quot;</span>
</span><span id="__span-145-22"><a id="__codelineno-145-22" name="__codelineno-145-22" href="#__codelineno-145-22"></a>
</span><span id="__span-145-23"><a id="__codelineno-145-23" name="__codelineno-145-23" href="#__codelineno-145-23"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-145-24"><a id="__codelineno-145-24" name="__codelineno-145-24" href="#__codelineno-145-24"></a>
</span><span id="__span-145-25"><a id="__codelineno-145-25" name="__codelineno-145-25" href="#__codelineno-145-25"></a>
</span><span id="__span-145-26"><a id="__codelineno-145-26" name="__codelineno-145-26" href="#__codelineno-145-26"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-145-27"><a id="__codelineno-145-27" name="__codelineno-145-27" href="#__codelineno-145-27"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">computed_mode_dir</span><span class="p">)</span>
</span><span id="__span-145-28"><a id="__codelineno-145-28" name="__codelineno-145-28" href="#__codelineno-145-28"></a><span class="c1">#&gt; dev/app/base/base_config/sub_app</span>
</span><span id="__span-145-29"><a id="__codelineno-145-29" name="__codelineno-145-29" href="#__codelineno-145-29"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">sub_app</span><span class="o">.</span><span class="n">source_mode_dir</span><span class="p">)</span>
</span><span id="__span-145-30"><a id="__codelineno-145-30" name="__codelineno-145-30" href="#__codelineno-145-30"></a><span class="c1">#&gt; sub_app</span>
</span></code></pre></div>
<h3 id="pyproject_toml_path">pyproject_toml_path</h3>
<p>Тип: <code class="language-python highlight"><span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="kc">None</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Вычисляемое значение. Возвращает путь файла <code>pyproject.toml</code>.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><span class="filename">~/my_awesome_project/main.py</span><pre><span></span><code><span id="__span-146-1"><a id="__codelineno-146-1" name="__codelineno-146-1" href="#__codelineno-146-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-146-2"><a id="__codelineno-146-2" name="__codelineno-146-2" href="#__codelineno-146-2"></a>
</span><span id="__span-146-3"><a id="__codelineno-146-3" name="__codelineno-146-3" href="#__codelineno-146-3"></a>
</span><span id="__span-146-4"><a id="__codelineno-146-4" name="__codelineno-146-4" href="#__codelineno-146-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-146-5"><a id="__codelineno-146-5" name="__codelineno-146-5" href="#__codelineno-146-5"></a>    <span class="k">pass</span>
</span><span id="__span-146-6"><a id="__codelineno-146-6" name="__codelineno-146-6" href="#__codelineno-146-6"></a>
</span><span id="__span-146-7"><a id="__codelineno-146-7" name="__codelineno-146-7" href="#__codelineno-146-7"></a>
</span><span id="__span-146-8"><a id="__codelineno-146-8" name="__codelineno-146-8" href="#__codelineno-146-8"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-146-9"><a id="__codelineno-146-9" name="__codelineno-146-9" href="#__codelineno-146-9"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">pyproject_toml_path</span><span class="p">)</span>
</span><span id="__span-146-10"><a id="__codelineno-146-10" name="__codelineno-146-10" href="#__codelineno-146-10"></a><span class="c1">#&gt; /home/user/my_awesome_project/pyproject.toml    # (1)!</span>
</span></code></pre></div>
<ol>
<li>При условии, что файл <code>pyproject.toml</code> существует в корне проекта.</li>
</ol>
<h3 id="inherited_params">inherited_params</h3>
<p>Тип: <code class="language-text highlight">list[str]</code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="p">[]</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Отображает все собственные настройки, которые наследуются от класса-родителя в концепции обратного наследования.</p>
<p><strong>Использование</strong>:</p>
<p>Все настройки, которые наследуются по умолчанию из <code>file_config</code> и <code>env_config</code> класса-родителя в концепции обратного наследования.
<div class="language-py highlight"><pre><span></span><code><span id="__span-147-1"><a id="__codelineno-147-1" name="__codelineno-147-1" href="#__codelineno-147-1"></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="__span-147-2"><a id="__codelineno-147-2" name="__codelineno-147-2" href="#__codelineno-147-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span>
</span><span id="__span-147-3"><a id="__codelineno-147-3" name="__codelineno-147-3" href="#__codelineno-147-3"></a>
</span><span id="__span-147-4"><a id="__codelineno-147-4" name="__codelineno-147-4" href="#__codelineno-147-4"></a>
</span><span id="__span-147-5"><a id="__codelineno-147-5" name="__codelineno-147-5" href="#__codelineno-147-5"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-147-6"><a id="__codelineno-147-6" name="__codelineno-147-6" href="#__codelineno-147-6"></a>    <span class="k">pass</span>
</span><span id="__span-147-7"><a id="__codelineno-147-7" name="__codelineno-147-7" href="#__codelineno-147-7"></a>
</span><span id="__span-147-8"><a id="__codelineno-147-8" name="__codelineno-147-8" href="#__codelineno-147-8"></a>
</span><span id="__span-147-9"><a id="__codelineno-147-9" name="__codelineno-147-9" href="#__codelineno-147-9"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-147-10"><a id="__codelineno-147-10" name="__codelineno-147-10" href="#__codelineno-147-10"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-147-11"><a id="__codelineno-147-11" name="__codelineno-147-11" href="#__codelineno-147-11"></a>
</span><span id="__span-147-12"><a id="__codelineno-147-12" name="__codelineno-147-12" href="#__codelineno-147-12"></a>
</span><span id="__span-147-13"><a id="__codelineno-147-13" name="__codelineno-147-13" href="#__codelineno-147-13"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-147-14"><a id="__codelineno-147-14" name="__codelineno-147-14" href="#__codelineno-147-14"></a><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</span><span id="__span-147-15"><a id="__codelineno-147-15" name="__codelineno-147-15" href="#__codelineno-147-15"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-147-16"><a id="__codelineno-147-16" name="__codelineno-147-16" href="#__codelineno-147-16"></a><span class="sd">[</span>
</span><span id="__span-147-17"><a id="__codelineno-147-17" name="__codelineno-147-17" href="#__codelineno-147-17"></a><span class="sd">    &quot;conf_include_inherit_parent&quot;,</span>
</span><span id="__span-147-18"><a id="__codelineno-147-18" name="__codelineno-147-18" href="#__codelineno-147-18"></a><span class="sd">    &quot;conf_exclude_inherit_parent&quot;,</span>
</span><span id="__span-147-19"><a id="__codelineno-147-19" name="__codelineno-147-19" href="#__codelineno-147-19"></a><span class="sd">    &quot;env_include_inherit_parent&quot;,</span>
</span><span id="__span-147-20"><a id="__codelineno-147-20" name="__codelineno-147-20" href="#__codelineno-147-20"></a><span class="sd">    &quot;env_exclude_inherit_parent&quot;,</span>
</span><span id="__span-147-21"><a id="__codelineno-147-21" name="__codelineno-147-21" href="#__codelineno-147-21"></a><span class="sd">    &quot;conf_file&quot;,</span>
</span><span id="__span-147-22"><a id="__codelineno-147-22" name="__codelineno-147-22" href="#__codelineno-147-22"></a><span class="sd">    &quot;conf_dir&quot;,</span>
</span><span id="__span-147-23"><a id="__codelineno-147-23" name="__codelineno-147-23" href="#__codelineno-147-23"></a><span class="sd">    &quot;conf_ext&quot;,</span>
</span><span id="__span-147-24"><a id="__codelineno-147-24" name="__codelineno-147-24" href="#__codelineno-147-24"></a><span class="sd">    &quot;conf_file_encoding&quot;,</span>
</span><span id="__span-147-25"><a id="__codelineno-147-25" name="__codelineno-147-25" href="#__codelineno-147-25"></a><span class="sd">    &quot;conf_case_sensitive&quot;,</span>
</span><span id="__span-147-26"><a id="__codelineno-147-26" name="__codelineno-147-26" href="#__codelineno-147-26"></a><span class="sd">    &quot;conf_ignore_missing&quot;,</span>
</span><span id="__span-147-27"><a id="__codelineno-147-27" name="__codelineno-147-27" href="#__codelineno-147-27"></a><span class="sd">    &quot;conf_custom_ext_handler&quot;,</span>
</span><span id="__span-147-28"><a id="__codelineno-147-28" name="__codelineno-147-28" href="#__codelineno-147-28"></a><span class="sd">    &quot;env_file&quot;,</span>
</span><span id="__span-147-29"><a id="__codelineno-147-29" name="__codelineno-147-29" href="#__codelineno-147-29"></a><span class="sd">    &quot;env_prefix&quot;,</span>
</span><span id="__span-147-30"><a id="__codelineno-147-30" name="__codelineno-147-30" href="#__codelineno-147-30"></a><span class="sd">    &quot;env_prefix_as_mode_dir&quot;,</span>
</span><span id="__span-147-31"><a id="__codelineno-147-31" name="__codelineno-147-31" href="#__codelineno-147-31"></a><span class="sd">    &quot;env_prefix_as_nested_mode_dir&quot;,</span>
</span><span id="__span-147-32"><a id="__codelineno-147-32" name="__codelineno-147-32" href="#__codelineno-147-32"></a><span class="sd">    &quot;env_prefix_as_source_mode_dir&quot;,</span>
</span><span id="__span-147-33"><a id="__codelineno-147-33" name="__codelineno-147-33" href="#__codelineno-147-33"></a><span class="sd">    &quot;env_file_encoding&quot;,</span>
</span><span id="__span-147-34"><a id="__codelineno-147-34" name="__codelineno-147-34" href="#__codelineno-147-34"></a><span class="sd">    &quot;env_case_sensitive&quot;,</span>
</span><span id="__span-147-35"><a id="__codelineno-147-35" name="__codelineno-147-35" href="#__codelineno-147-35"></a><span class="sd">    &quot;env_nested_delimiter&quot;,</span>
</span><span id="__span-147-36"><a id="__codelineno-147-36" name="__codelineno-147-36" href="#__codelineno-147-36"></a><span class="sd">    &quot;env_ignore_missing&quot;</span>
</span><span id="__span-147-37"><a id="__codelineno-147-37" name="__codelineno-147-37" href="#__codelineno-147-37"></a><span class="sd">]</span>
</span><span id="__span-147-38"><a id="__codelineno-147-38" name="__codelineno-147-38" href="#__codelineno-147-38"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div></p>
<p>Отключаем наследование части настроек:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-148-1"><a id="__codelineno-148-1" name="__codelineno-148-1" href="#__codelineno-148-1"></a><span class="kn">import</span> <span class="nn">json</span>
</span><span id="__span-148-2"><a id="__codelineno-148-2" name="__codelineno-148-2" href="#__codelineno-148-2"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-148-3"><a id="__codelineno-148-3" name="__codelineno-148-3" href="#__codelineno-148-3"></a>
</span><span id="__span-148-4"><a id="__codelineno-148-4" name="__codelineno-148-4" href="#__codelineno-148-4"></a>
</span><span id="__span-148-5"><a id="__codelineno-148-5" name="__codelineno-148-5" href="#__codelineno-148-5"></a><span class="k">class</span> <span class="nc">AppSettings</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-148-6"><a id="__codelineno-148-6" name="__codelineno-148-6" href="#__codelineno-148-6"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-148-7"><a id="__codelineno-148-7" name="__codelineno-148-7" href="#__codelineno-148-7"></a>        <span class="n">include_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-148-8"><a id="__codelineno-148-8" name="__codelineno-148-8" href="#__codelineno-148-8"></a>            <span class="s2">&quot;conf_file&quot;</span><span class="p">,</span>
</span><span id="__span-148-9"><a id="__codelineno-148-9" name="__codelineno-148-9" href="#__codelineno-148-9"></a>            <span class="s2">&quot;env_prefix&quot;</span><span class="p">,</span>
</span><span id="__span-148-10"><a id="__codelineno-148-10" name="__codelineno-148-10" href="#__codelineno-148-10"></a>        <span class="p">],</span>
</span><span id="__span-148-11"><a id="__codelineno-148-11" name="__codelineno-148-11" href="#__codelineno-148-11"></a>        <span class="n">exclude_inherit_parent</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-148-12"><a id="__codelineno-148-12" name="__codelineno-148-12" href="#__codelineno-148-12"></a>            <span class="s2">&quot;conf_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-148-13"><a id="__codelineno-148-13" name="__codelineno-148-13" href="#__codelineno-148-13"></a>            <span class="s2">&quot;conf_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-148-14"><a id="__codelineno-148-14" name="__codelineno-148-14" href="#__codelineno-148-14"></a>            <span class="s2">&quot;env_include_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-148-15"><a id="__codelineno-148-15" name="__codelineno-148-15" href="#__codelineno-148-15"></a>            <span class="s2">&quot;env_exclude_inherit_parent&quot;</span><span class="p">,</span>
</span><span id="__span-148-16"><a id="__codelineno-148-16" name="__codelineno-148-16" href="#__codelineno-148-16"></a>        <span class="p">],</span>
</span><span id="__span-148-17"><a id="__codelineno-148-17" name="__codelineno-148-17" href="#__codelineno-148-17"></a>    <span class="p">)</span>
</span><span id="__span-148-18"><a id="__codelineno-148-18" name="__codelineno-148-18" href="#__codelineno-148-18"></a>
</span><span id="__span-148-19"><a id="__codelineno-148-19" name="__codelineno-148-19" href="#__codelineno-148-19"></a>
</span><span id="__span-148-20"><a id="__codelineno-148-20" name="__codelineno-148-20" href="#__codelineno-148-20"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-148-21"><a id="__codelineno-148-21" name="__codelineno-148-21" href="#__codelineno-148-21"></a>    <span class="n">app</span><span class="p">:</span> <span class="n">AppSettings</span>
</span><span id="__span-148-22"><a id="__codelineno-148-22" name="__codelineno-148-22" href="#__codelineno-148-22"></a>
</span><span id="__span-148-23"><a id="__codelineno-148-23" name="__codelineno-148-23" href="#__codelineno-148-23"></a>
</span><span id="__span-148-24"><a id="__codelineno-148-24" name="__codelineno-148-24" href="#__codelineno-148-24"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-148-25"><a id="__codelineno-148-25" name="__codelineno-148-25" href="#__codelineno-148-25"></a><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">inherited_params</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</span><span id="__span-148-26"><a id="__codelineno-148-26" name="__codelineno-148-26" href="#__codelineno-148-26"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-148-27"><a id="__codelineno-148-27" name="__codelineno-148-27" href="#__codelineno-148-27"></a><span class="sd">[</span>
</span><span id="__span-148-28"><a id="__codelineno-148-28" name="__codelineno-148-28" href="#__codelineno-148-28"></a><span class="sd">    &quot;conf_file&quot;,</span>
</span><span id="__span-148-29"><a id="__codelineno-148-29" name="__codelineno-148-29" href="#__codelineno-148-29"></a><span class="sd">    &quot;env_prefix&quot;,</span>
</span><span id="__span-148-30"><a id="__codelineno-148-30" name="__codelineno-148-30" href="#__codelineno-148-30"></a><span class="sd">]</span>
</span><span id="__span-148-31"><a id="__codelineno-148-31" name="__codelineno-148-31" href="#__codelineno-148-31"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div>
<h3 id="settings_config">settings_config</h3>
<p>Тип: <code class="language-python highlight"><span class="n">pidantic</span><span class="o">.</span><span class="n">BaseModel</span></code></p>
<p>Значение по умолчанию: <code class="language-python highlight"><span class="n">arfi_settings</span><span class="o">.</span><span class="n">schemes</span><span class="o">.</span><span class="n">SettingsConfigSchema</span><span class="p">()</span></code></p>
<p><strong>Что делает</strong>:</p>
<p>Агрегирует все заданные собственные настройки, которые потом использует обработчик при чтении конфигурации.</p>
<p><strong>Использование</strong>:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-149-1"><a id="__codelineno-149-1" name="__codelineno-149-1" href="#__codelineno-149-1"></a><span class="kn">from</span> <span class="nn">arfi_settings</span> <span class="kn">import</span> <span class="n">ArFiSettings</span><span class="p">,</span> <span class="n">SettingsConfigDict</span>
</span><span id="__span-149-2"><a id="__codelineno-149-2" name="__codelineno-149-2" href="#__codelineno-149-2"></a>
</span><span id="__span-149-3"><a id="__codelineno-149-3" name="__codelineno-149-3" href="#__codelineno-149-3"></a>
</span><span id="__span-149-4"><a id="__codelineno-149-4" name="__codelineno-149-4" href="#__codelineno-149-4"></a><span class="k">class</span> <span class="nc">AppConfig</span><span class="p">(</span><span class="n">ArFiSettings</span><span class="p">):</span>
</span><span id="__span-149-5"><a id="__codelineno-149-5" name="__codelineno-149-5" href="#__codelineno-149-5"></a>    <span class="n">model_config</span> <span class="o">=</span> <span class="n">SettingsConfigDict</span><span class="p">(</span>
</span><span id="__span-149-6"><a id="__codelineno-149-6" name="__codelineno-149-6" href="#__codelineno-149-6"></a>        <span class="n">conf_dir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="__span-149-7"><a id="__codelineno-149-7" name="__codelineno-149-7" href="#__codelineno-149-7"></a>        <span class="n">conf_file</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-149-8"><a id="__codelineno-149-8" name="__codelineno-149-8" href="#__codelineno-149-8"></a>            <span class="s2">&quot;appconfig.toml&quot;</span><span class="p">,</span>
</span><span id="__span-149-9"><a id="__codelineno-149-9" name="__codelineno-149-9" href="#__codelineno-149-9"></a>            <span class="s2">&quot;~/.config/myapp/config.toml&quot;</span><span class="p">,</span>
</span><span id="__span-149-10"><a id="__codelineno-149-10" name="__codelineno-149-10" href="#__codelineno-149-10"></a>            <span class="s2">&quot;/var/run/secrets/config.toml&quot;</span><span class="p">,</span>
</span><span id="__span-149-11"><a id="__codelineno-149-11" name="__codelineno-149-11" href="#__codelineno-149-11"></a>        <span class="p">],</span>
</span><span id="__span-149-12"><a id="__codelineno-149-12" name="__codelineno-149-12" href="#__codelineno-149-12"></a>        <span class="n">env_file</span><span class="o">=</span><span class="s2">&quot;/var/run/secrets/.my_environment&quot;</span><span class="p">,</span>
</span><span id="__span-149-13"><a id="__codelineno-149-13" name="__codelineno-149-13" href="#__codelineno-149-13"></a>        <span class="n">env_prefix</span><span class="o">=</span><span class="s2">&quot;APP_&quot;</span><span class="p">,</span>
</span><span id="__span-149-14"><a id="__codelineno-149-14" name="__codelineno-149-14" href="#__codelineno-149-14"></a>        <span class="n">secrets_dir</span><span class="o">=</span><span class="s2">&quot;/var/run/secrets&quot;</span><span class="p">,</span>
</span><span id="__span-149-15"><a id="__codelineno-149-15" name="__codelineno-149-15" href="#__codelineno-149-15"></a>        <span class="n">cli</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-149-16"><a id="__codelineno-149-16" name="__codelineno-149-16" href="#__codelineno-149-16"></a>    <span class="p">)</span>
</span><span id="__span-149-17"><a id="__codelineno-149-17" name="__codelineno-149-17" href="#__codelineno-149-17"></a>
</span><span id="__span-149-18"><a id="__codelineno-149-18" name="__codelineno-149-18" href="#__codelineno-149-18"></a>
</span><span id="__span-149-19"><a id="__codelineno-149-19" name="__codelineno-149-19" href="#__codelineno-149-19"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AppConfig</span><span class="p">()</span>
</span><span id="__span-149-20"><a id="__codelineno-149-20" name="__codelineno-149-20" href="#__codelineno-149-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">settings_config</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</span><span id="__span-149-21"><a id="__codelineno-149-21" name="__codelineno-149-21" href="#__codelineno-149-21"></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-149-22"><a id="__codelineno-149-22" name="__codelineno-149-22" href="#__codelineno-149-22"></a><span class="sd">{</span>
</span><span id="__span-149-23"><a id="__codelineno-149-23" name="__codelineno-149-23" href="#__codelineno-149-23"></a><span class="sd">    &quot;env_file&quot;: &quot;/var/run/secrets/.my_environment&quot;,</span>
</span><span id="__span-149-24"><a id="__codelineno-149-24" name="__codelineno-149-24" href="#__codelineno-149-24"></a><span class="sd">    &quot;env_prefix&quot;: &quot;APP_&quot;,</span>
</span><span id="__span-149-25"><a id="__codelineno-149-25" name="__codelineno-149-25" href="#__codelineno-149-25"></a><span class="sd">    &quot;env_prefix_as_mode_dir&quot;: false,</span>
</span><span id="__span-149-26"><a id="__codelineno-149-26" name="__codelineno-149-26" href="#__codelineno-149-26"></a><span class="sd">    &quot;env_prefix_as_nested_mode_dir&quot;: false,</span>
</span><span id="__span-149-27"><a id="__codelineno-149-27" name="__codelineno-149-27" href="#__codelineno-149-27"></a><span class="sd">    &quot;env_prefix_as_source_mode_dir&quot;: false,</span>
</span><span id="__span-149-28"><a id="__codelineno-149-28" name="__codelineno-149-28" href="#__codelineno-149-28"></a><span class="sd">    &quot;env_file_encoding&quot;: null,</span>
</span><span id="__span-149-29"><a id="__codelineno-149-29" name="__codelineno-149-29" href="#__codelineno-149-29"></a><span class="sd">    &quot;env_case_sensitive&quot;: false,</span>
</span><span id="__span-149-30"><a id="__codelineno-149-30" name="__codelineno-149-30" href="#__codelineno-149-30"></a><span class="sd">    &quot;env_nested_delimiter&quot;: &quot;&quot;,</span>
</span><span id="__span-149-31"><a id="__codelineno-149-31" name="__codelineno-149-31" href="#__codelineno-149-31"></a><span class="sd">    &quot;env_ignore_missing&quot;: true,</span>
</span><span id="__span-149-32"><a id="__codelineno-149-32" name="__codelineno-149-32" href="#__codelineno-149-32"></a><span class="sd">    &quot;env_include_inherit_parent&quot;: [],</span>
</span><span id="__span-149-33"><a id="__codelineno-149-33" name="__codelineno-149-33" href="#__codelineno-149-33"></a><span class="sd">    &quot;env_exclude_inherit_parent&quot;: [],</span>
</span><span id="__span-149-34"><a id="__codelineno-149-34" name="__codelineno-149-34" href="#__codelineno-149-34"></a><span class="sd">    &quot;conf_file&quot;: &quot;[&#39;appconfig.toml&#39;, &#39;~/.config/myapp/config.toml&#39;, &#39;/var/run/secrets/config.toml&#39;]&quot;,</span>
</span><span id="__span-149-35"><a id="__codelineno-149-35" name="__codelineno-149-35" href="#__codelineno-149-35"></a><span class="sd">    &quot;conf_dir&quot;: null,</span>
</span><span id="__span-149-36"><a id="__codelineno-149-36" name="__codelineno-149-36" href="#__codelineno-149-36"></a><span class="sd">    &quot;conf_ext&quot;: [</span>
</span><span id="__span-149-37"><a id="__codelineno-149-37" name="__codelineno-149-37" href="#__codelineno-149-37"></a><span class="sd">        &quot;toml&quot;,</span>
</span><span id="__span-149-38"><a id="__codelineno-149-38" name="__codelineno-149-38" href="#__codelineno-149-38"></a><span class="sd">        &quot;yaml&quot;,</span>
</span><span id="__span-149-39"><a id="__codelineno-149-39" name="__codelineno-149-39" href="#__codelineno-149-39"></a><span class="sd">        &quot;yml&quot;,</span>
</span><span id="__span-149-40"><a id="__codelineno-149-40" name="__codelineno-149-40" href="#__codelineno-149-40"></a><span class="sd">        &quot;json&quot;</span>
</span><span id="__span-149-41"><a id="__codelineno-149-41" name="__codelineno-149-41" href="#__codelineno-149-41"></a><span class="sd">    ],</span>
</span><span id="__span-149-42"><a id="__codelineno-149-42" name="__codelineno-149-42" href="#__codelineno-149-42"></a><span class="sd">    &quot;conf_file_encoding&quot;: null,</span>
</span><span id="__span-149-43"><a id="__codelineno-149-43" name="__codelineno-149-43" href="#__codelineno-149-43"></a><span class="sd">    &quot;conf_case_sensitive&quot;: false,</span>
</span><span id="__span-149-44"><a id="__codelineno-149-44" name="__codelineno-149-44" href="#__codelineno-149-44"></a><span class="sd">    &quot;conf_ignore_missing&quot;: true,</span>
</span><span id="__span-149-45"><a id="__codelineno-149-45" name="__codelineno-149-45" href="#__codelineno-149-45"></a><span class="sd">    &quot;conf_custom_ext_handler&quot;: null,</span>
</span><span id="__span-149-46"><a id="__codelineno-149-46" name="__codelineno-149-46" href="#__codelineno-149-46"></a><span class="sd">    &quot;conf_include_inherit_parent&quot;: [],</span>
</span><span id="__span-149-47"><a id="__codelineno-149-47" name="__codelineno-149-47" href="#__codelineno-149-47"></a><span class="sd">    &quot;conf_exclude_inherit_parent&quot;: [],</span>
</span><span id="__span-149-48"><a id="__codelineno-149-48" name="__codelineno-149-48" href="#__codelineno-149-48"></a><span class="sd">    &quot;case_sensitive&quot;: false,</span>
</span><span id="__span-149-49"><a id="__codelineno-149-49" name="__codelineno-149-49" href="#__codelineno-149-49"></a><span class="sd">    &quot;ignore_missing&quot;: true,</span>
</span><span id="__span-149-50"><a id="__codelineno-149-50" name="__codelineno-149-50" href="#__codelineno-149-50"></a><span class="sd">    &quot;encoding&quot;: null,</span>
</span><span id="__span-149-51"><a id="__codelineno-149-51" name="__codelineno-149-51" href="#__codelineno-149-51"></a><span class="sd">    &quot;cli&quot;: true,</span>
</span><span id="__span-149-52"><a id="__codelineno-149-52" name="__codelineno-149-52" href="#__codelineno-149-52"></a><span class="sd">    &quot;secrets_dir&quot;: &quot;/var/run/secrets&quot;,</span>
</span><span id="__span-149-53"><a id="__codelineno-149-53" name="__codelineno-149-53" href="#__codelineno-149-53"></a><span class="sd">    &quot;conf_path&quot;: [</span>
</span><span id="__span-149-54"><a id="__codelineno-149-54" name="__codelineno-149-54" href="#__codelineno-149-54"></a><span class="sd">        &quot;appconfig.toml&quot;,</span>
</span><span id="__span-149-55"><a id="__codelineno-149-55" name="__codelineno-149-55" href="#__codelineno-149-55"></a><span class="sd">        &quot;/home/user/.config/myapp/config.toml&quot;,</span>
</span><span id="__span-149-56"><a id="__codelineno-149-56" name="__codelineno-149-56" href="#__codelineno-149-56"></a><span class="sd">        &quot;/var/run/secrets/config.toml&quot;</span>
</span><span id="__span-149-57"><a id="__codelineno-149-57" name="__codelineno-149-57" href="#__codelineno-149-57"></a><span class="sd">    ],</span>
</span><span id="__span-149-58"><a id="__codelineno-149-58" name="__codelineno-149-58" href="#__codelineno-149-58"></a><span class="sd">    &quot;env_path&quot;: [</span>
</span><span id="__span-149-59"><a id="__codelineno-149-59" name="__codelineno-149-59" href="#__codelineno-149-59"></a><span class="sd">        &quot;/var/run/secrets/.my_environment&quot;</span>
</span><span id="__span-149-60"><a id="__codelineno-149-60" name="__codelineno-149-60" href="#__codelineno-149-60"></a><span class="sd">    ],</span>
</span><span id="__span-149-61"><a id="__codelineno-149-61" name="__codelineno-149-61" href="#__codelineno-149-61"></a><span class="sd">    &quot;include_inherit_parent&quot;: [],</span>
</span><span id="__span-149-62"><a id="__codelineno-149-62" name="__codelineno-149-62" href="#__codelineno-149-62"></a><span class="sd">    &quot;exclude_inherit_parent&quot;: []</span>
</span><span id="__span-149-63"><a id="__codelineno-149-63" name="__codelineno-149-63" href="#__codelineno-149-63"></a><span class="sd">}</span>
</span><span id="__span-149-64"><a id="__codelineno-149-64" name="__codelineno-149-64" href="#__codelineno-149-64"></a><span class="sd">&quot;&quot;&quot;</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Нижний колонтитул" >
        
          
          <a href="../../about/debug_mode/" class="md-footer__link md-footer__link--prev" aria-label="Назад: Режим отладки">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Назад
              </span>
              <div class="md-ellipsis">
                Режим отладки
              </div>
            </div>
          </a>
        
        
          
          <a href="../pyproject/" class="md-footer__link md-footer__link--next" aria-label="Вперед: Настройки pyproject.toml">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Вперед
              </span>
              <div class="md-ellipsis">
                Настройки pyproject.toml
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">

    <div class="md-copyright__highlight">
    Copyright &copy; 2024 Artur Filin
    </div>


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
    Material for MkDocs
    </a>
    and localized using the
    <a href="https://py-art.github.io/arfi-settings/" target="_blank" rel="noopener">
    ArFiSettings
    </a>

</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.code.copy", "content.tabs.link", "content.tooltips", "content.code.annotate", "content.code.select", "navigation.expand", "navigation.footer", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>